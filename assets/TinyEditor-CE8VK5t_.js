import{w as p,b1 as z,cM as F,r as G,E as H,b4 as Y,dl as W,bo as J,aV as M,au as w,O as Q,c as X,b as B,d as D,e as x,f as Z,k as $,l as I,o as O,s as A,t as P}from"./index-DQmZf-Xj.js";import{V as _}from"./VLabel-DGDnQGXC.js";var ee=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCommentChange","onCompositionEnd","onCompositionStart","onCompositionUpdate","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onInput","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],ne=function(e){return ee.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())!==-1},te=function(e,t,n){Object.keys(t).filter(ne).forEach(function(o){var r=t[o];typeof r=="function"&&(o==="onInit"?r(e,n):n.on(o.substring(2),function(u){return r(u,n)}))})},oe=function(e,t,n,o){var r=e.modelEvents?e.modelEvents:null,u=Array.isArray(r)?r.join(" "):r;p(o,function(a,s){n&&typeof a=="string"&&a!==s&&a!==n.getContent({format:e.outputFormat})&&n.setContent(a)}),n.on(u||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},ie=function(e,t,n,o,r,u){o.setContent(u()),n.attrs["onUpdate:modelValue"]&&oe(t,n,o,r),te(e,n.attrs,o)},j=0,N=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return j++,e+"_"+n+j+String(t)},re=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},k=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},ae=function(e,t){return k(e).concat(k(t))},le=function(e){return e==null},L=function(e){var t;return typeof((t=e.options)===null||t===void 0?void 0:t.set)=="function"&&e.options.isRegistered("disabled")},U=function(){return{listeners:[],scriptId:N("tiny-script"),scriptLoaded:!1}},ue=function(){var e=U(),t=function(r,u,a,s){var l=u.createElement("script");l.referrerPolicy="origin",l.type="application/javascript",l.id=r,l.src=a;var i=function(){l.removeEventListener("load",i),s()};l.addEventListener("load",i),u.head&&u.head.appendChild(l)},n=function(r,u,a){e.scriptLoaded?a():(e.listeners.push(a),r.getElementById(e.scriptId)||t(e.scriptId,r,u,function(){e.listeners.forEach(function(s){return s()}),e.scriptLoaded=!0}))},o=function(){e=U()};return{load:n,reinitialize:o}},de=ue(),se=function(){return typeof window<"u"?window:global},v=function(){var e=se();return e&&e.tinymce?e.tinymce:null},ce={apiKey:String,licenseKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,readonly:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},f=function(){return f=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},f.apply(this,arguments)},fe=function(e,t,n,o){return e(o||"div",{id:t,ref:n})},ve=function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})},h={selector:void 0,target:void 0},V=function(e,t){var n;typeof((n=e.mode)===null||n===void 0?void 0:n.set)=="function"?e.mode.set(t):e.setMode(t)},me=z({props:ce,setup:function(e,t){var n=e.init?f(f({},e.init),h):f({},h),o=F(e),r=o.disabled,u=o.readonly,a=o.modelValue,s=o.tagName,l=G(null),i=null,E=e.id||N("tiny-vue"),b=e.init&&e.init.inline||e.inline,C=!!t.attrs["onUpdate:modelValue"],S=!0,K=e.initialValue?e.initialValue:"",y="",R=function(d){return C?function(){return a!=null&&a.value?a.value:""}:function(){return d?K:y}},g=function(){var d=R(S),c=f(f({},n),{disabled:e.disabled,readonly:e.readonly,target:l.value,plugins:ae(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:b,license_key:e.licenseKey,setup:function(m){i=m,!L(i)&&e.disabled===!0&&V(i,"readonly"),m.on("init",function(q){return ie(q,e,t,m,a,d)}),typeof n.setup=="function"&&n.setup(m)}});re(l.value)&&(l.value.style.visibility=""),v().init(c),S=!1};p(u,function(d){i!==null&&V(i,d?"readonly":"design")}),p(r,function(d){i!==null&&(L(i)?i.options.set("disabled",d):V(i,d?"readonly":"design"))}),p(s,function(d){var c;i&&(C||(y=i.getContent()),(c=v())===null||c===void 0||c.remove(i),w(function(){return g()}))}),H(function(){if(v()!==null)g();else if(l.value&&l.value.ownerDocument){var d=e.cloudChannel?e.cloudChannel:"8",c=e.apiKey?e.apiKey:"no-api-key",m=le(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(d,"/tinymce.min.js"):e.tinymceScriptSrc;de.load(l.value.ownerDocument,m,g)}}),Y(function(){v()!==null&&v().remove(i)}),b||(W(function(){S||g()}),J(function(){var d;i&&(C||(y=i.getContent()),(d=v())===null||d===void 0||d.remove(i))}));var T=function(d){var c;i&&(y=i.getContent(),(c=v())===null||c===void 0||c.remove(i),n=f(f(f({},n),d),h),w(function(){return g()}))};return t.expose({rerender:T,getEditor:function(){return i}}),function(){return b?fe(M,E,l,e.tagName):ve(M,E,l)}}});const pe={__name:"TinyEditor",props:{label:{type:String,required:!0},modelValue:{type:String,required:!0},dir:{type:String,default:"ltr"},errorMessages:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,r="px14vx9kodt0gvyeokbds8xyitpe6q8qf56iejaljwq79bav",u=Q({get:()=>n.modelValue,set:a=>o("update:modelValue",a)});return(a,s)=>(O(),X("div",null,[B(_,{class:"py-4 px-2"},{default:x(()=>[A(P(e.label),1)]),_:1}),s[1]||(s[1]=D("div",{class:"tinymce"},null,-1)),D("div",null,[B(I(me),{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=l=>u.value=l),"api-key":I(r),init:{height:400,menubar:!1,plugins:"lists",toolbar:"undo redo | bold italic underline | bullist numlist | alignleft aligncenter alignright",license_key:"gpl"}},null,8,["modelValue","api-key"]),e.errorMessages?(O(),Z(_,{key:0,class:"my-2 px-2 text-error",color:"error"},{default:x(()=>[A(P(e.errorMessages),1)]),_:1})):$("",!0)])]))}};export{pe as default};

import{C as B}from"./vue3-perfect-scrollbar-CYNmQCJN.js";import{aL as S,i as A,aM as i,O as v,f as l,k as b,l as e,o as r,e as a,b as o,a9 as u,d as n,t as c,s as p,c as y,F as _,h as C,aN as N,p as R,a2 as z}from"./index-DLyiUI4T.js";import{$ as D}from"./api-BtdnJSD2.js";import{V as g}from"./VAvatar-GwUQM--D.js";import{V}from"./VImg-W922IUCz.js";import{V as T}from"./VMenu-CnM5Ce9N.js";import{V as $,a as k,d as E,b as F}from"./VList-BLAOQF4q.js";import{V as M}from"./VListItemAction-DKGMtE3h.js";import{V as d}from"./VBadge-17IInVLo.js";import{V as O}from"./VDivider-DZkdhmn8.js";import"./index-CvOPxmL5.js";import"./VOverlay-BpuXFPpY.js";import"./easing-Bybner-F.js";import"./delay-CJQMA8o3.js";import"./lazy-D7mfu-eq.js";import"./scopeId-BqXwnYFS.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-B2cZjoh4.js";import"./ssrBoot-Co57-A6O.js";const U=()=>S(),j={class:"d-flex gap-2 align-center"},q={class:"text-h6 font-weight-medium"},G={class:"px-4 py-2"},dt={__name:"UserProfile",setup(H){const h=A(),x=U(),t=i("userData"),I=async()=>{try{await D("/v1/logout",{method:"POST",onResponseError({response:m}){}})}catch{}finally{i("accessToken").value=null,i("userAbilityRules").value=null,t.value=null,x.update([]),await h.push("/login")}},L=v(()=>t.value.role=="client"?{name:"pages-user-profile-tab",params:{tab:"profile"}}:{name:"pages-consultant-profile-tab",params:{tab:"profile"}}),P=v(()=>t.value.role=="client"?{name:"pages-account-settings-tab",params:{tab:"account"}}:{name:"pages-consultant-account-settings-tab",params:{tab:"account"}}),w=[{type:"divider"},{type:"navItem",icon:"tabler-user",title:"Profile",to:L.value},{type:"navItem",icon:"tabler-settings",title:"Settings",to:P.value},{type:"divider"}];return(m,f)=>e(t)?(r(),l(d,{key:0,dot:"",bordered:"",location:"bottom right","offset-x":"1","offset-y":"2",color:"success"},{default:a(()=>[o(g,{size:"38",class:"cursor-pointer",color:e(t)&&e(t).avatar?void 0:"primary",variant:e(t)&&e(t).avatar?void 0:"tonal"},{default:a(()=>[e(t)&&e(t).avatar?(r(),l(V,{key:0,src:e(t).avatar},null,8,["src"])):(r(),l(u,{key:1,icon:"tabler-user"})),o(T,{activator:"parent",width:"240",location:"bottom end",offset:"12px"},{default:a(()=>[o($,null,{default:a(()=>[o(k,null,{default:a(()=>[n("div",j,[o(M,null,{default:a(()=>[o(d,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success",bordered:""},{default:a(()=>[o(g,{color:e(t)&&e(t).avatar?void 0:"primary",variant:e(t)&&e(t).avatar?void 0:"tonal"},{default:a(()=>[e(t)&&e(t).avatar?(r(),l(V,{key:0,src:e(t).avatar},null,8,["src"])):(r(),l(u,{key:1,icon:"tabler-user"}))]),_:1},8,["color","variant"])]),_:1})]),_:1}),n("div",null,[n("h6",q,c(e(t).name||e(t).username),1),o(E,{class:"text-capitalize text-disabled"},{default:a(()=>[p(c(e(t).role),1)]),_:1})])])]),_:1}),o(e(B),{options:{wheelPropagation:!1}},{default:a(()=>[e(t).role!="admin"?(r(),y(_,{key:0},C(w,s=>(r(),y(_,{key:s.title},[s.type==="navItem"?(r(),l(k,{key:0,to:s.to},N({prepend:a(()=>[o(u,{icon:s.icon,size:"22"},null,8,["icon"])]),default:a(()=>[o(F,null,{default:a(()=>[p(c(s.title),1)]),_:2},1024)]),_:2},[s.badgeProps?{name:"append",fn:a(()=>[o(d,R({rounded:"sm",class:"me-3",ref_for:!0},s.badgeProps),null,16)]),key:"0"}:void 0]),1032,["to"])):(r(),l(O,{key:1,class:"my-2"}))],64))),64)):b("",!0),n("div",G,[o(z,{block:"",size:"small",color:"error","append-icon":"tabler-logout",onClick:I},{default:a(()=>f[0]||(f[0]=[p(" Logout ")])),_:1,__:[0]})])]),_:1})]),_:1})]),_:1})]),_:1},8,["color","variant"])]),_:1})):b("",!0)}};export{dt as default};

import{al as O,O as m,u as U,aX as Y,E as X,c as b,f as y,l as a,e as o,i as q,o as u,b as e,aY as G,s as d,t as s,d as t,a2 as h,a9 as _,k as j}from"./index-D_BsgN_d.js";import{u as H}from"./useApi-CM-u9C21.js";import{c as J}from"./createUrl-g3-_zHjx.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as g,b as T}from"./VCard-DA3WH8Yk.js";import{V as p}from"./VCardText-BreTWY-m.js";import{V}from"./VSheet-Chqu0LdH.js";import{V as S}from"./VChip-BTQY4HnE.js";import{V as w,a as r}from"./VRow-dG5tZQ8o.js";import{V as Q}from"./VAvatar-DiDwKfKQ.js";import{V as k}from"./VDivider-B9RRXbEE.js";import{V as Z}from"./VTable-Dk3u47PW.js";import"./index-CvOPxmL5.js";import"./VImg-ht9GXiJm.js";import"./VSlideGroup-CQSza4gX.js";/* empty css              */const tt={class:"mb-4"},et={class:"d-flex justify-space-between align-start flex-wrap gap-4"},st={class:"d-flex flex-column gap-1"},at={class:"text-caption text-medium-emphasis"},ot={class:"text-h5 mb-1"},it={class:"text-body-2 text-medium-emphasis"},nt={class:"d-flex flex-column align-end gap-3"},lt={class:"text-right"},ct={class:"text-caption text-medium-emphasis"},dt={class:"d-flex align-center justify-end gap-1"},ut={class:"text-h4 font-weight-bold"},rt={class:"d-flex gap-2"},mt={class:"d-flex align-center gap-3 mb-2"},_t={class:"d-flex flex-column"},pt={class:"text-caption text-medium-emphasis"},vt={class:"text-subtitle-1 font-weight-medium"},ft={class:"mt-2 text-body-2"},bt={key:0,class:"d-flex align-center mb-1"},ht={key:1,class:"d-flex align-center"},xt={class:"text-caption text-medium-emphasis"},yt={class:"text-body-1 font-weight-medium"},gt={class:"text-caption text-medium-emphasis"},Vt={class:"text-caption text-medium-emphasis"},kt={class:"text-body-2"},wt={class:"text-caption text-medium-emphasis"},Ct={class:"text-body-2"},At={class:"text-caption text-medium-emphasis"},It={class:"text-body-2"},zt={key:0},Nt={key:1},jt={class:"text-subtitle-1 mb-3"},Tt={class:"text-left text-caption text-medium-emphasis"},St={class:"text-right text-caption text-medium-emphasis"},Bt={class:"text-body-2"},Dt={class:"text-right text-body-2"},Rt={class:"d-flex justify-space-between mb-2"},Wt={class:"text-body-2 text-medium-emphasis"},Ft={class:"text-body-2"},Lt={class:"d-flex justify-space-between mb-2"},Pt={class:"text-body-2 text-medium-emphasis"},$t={class:"text-body-2"},Et={class:"d-flex justify-space-between align-center"},Mt={class:"text-subtitle-1 font-weight-medium"},Ot={class:"text-h6 font-weight-bold"},Ut={__name:"[id]",async setup(Yt){let x,C;const{t:i}=O(),B=U(),A=q(),D=m(()=>B.params.id),v=n=>Number(n??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),R=n=>n?n.split(" ").map(c=>c[0]).join("").toUpperCase():"?",f=n=>{const c=String(n||"").toLowerCase();return c==="paid"?{color:"success",icon:"tabler-check",label:i("invoice.status.paid")}:c==="unpaid"?{color:"warning",icon:"tabler-circle-off",label:i("invoice.status.unpaid")}:c==="cancelled"?{color:"secondary",icon:"tabler-ban",label:i("invoice.status.cancelled")}:{color:"secondary",icon:"tabler-help",label:n||i("invoice.status.unknown")}},{data:W,execute:I,isLoading:F,error:L}=([x,C]=Y(()=>H(J(`/v1/invoices/${D.value}`))),x=await x,C(),x);X(()=>{I()});const l=m(()=>{var n;return((n=W.value)==null?void 0:n.data)??null}),z=m(()=>{var n;return Number(((n=l.value)==null?void 0:n.subtotal)??0)}),P=m(()=>{var n;return Number(((n=l.value)==null?void 0:n.tax_rate)??0)}),$=m(()=>{var n;return Number(((n=l.value)==null?void 0:n.tax_amount)??0)}),N=m(()=>{var n;return Number(((n=l.value)==null?void 0:n.total)??0)}),E=m(()=>{var n;return!!((n=l.value)!=null&&n.paid_at)});return(n,c)=>(u(),b("section",null,[a(F)?(u(),y(g,{key:0},{default:o(()=>[e(p,{class:"d-flex align-center justify-center py-8"},{default:o(()=>[e(G,{indeterminate:""})]),_:1})]),_:1})):a(L)?(u(),y(g,{key:1},{default:o(()=>[e(T,null,{default:o(()=>[d(s(a(i)("invoice.states.errorTitle")),1)]),_:1}),e(p,null,{default:o(()=>[t("p",tt,s(a(i)("invoice.states.errorDesc")),1),e(h,{color:"primary",onClick:a(I)},{default:o(()=>[d(s(a(i)("invoice.actions.retry")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})):l.value?(u(),y(g,{key:3,class:"invoice-card overflow-hidden"},{default:o(()=>[e(V,{class:"invoice-header"},{default:o(()=>[t("div",et,[t("div",st,[t("span",at,s(a(i)("invoice.header.caption")),1),t("h1",ot,s(a(i)("invoice.header.invoiceNumber",{number:l.value.invoice_number})),1),t("span",it,s(a(i)("invoice.header.issuedOn",{date:l.value.issued_at})),1)]),t("div",nt,[e(S,{color:f(l.value.status).color,variant:"tonal",label:"",size:"small"},{default:o(()=>[e(_,{icon:f(l.value.status).icon,size:"16",class:"me-1"},null,8,["icon"]),d(" "+s(f(l.value.status).label),1)]),_:1},8,["color"]),t("div",lt,[t("span",ct,s(a(i)("invoice.header.totalAmount")),1),t("div",dt,[t("span",ut,s(a(i)("invoice.currencyWithAmount",{amount:v(N.value)})),1)])]),t("div",rt,[e(h,{variant:"outlined",color:"secondary",size:"small",onClick:c[1]||(c[1]=M=>a(A).back())},{default:o(()=>[e(_,{icon:"tabler-arrow-left",size:"18",class:"me-1"}),d(" "+s(a(i)("invoice.actions.back")),1)]),_:1}),e(h,{variant:"outlined",color:"primary",size:"small"},{default:o(()=>[e(_,{icon:"tabler-download",size:"18",class:"me-1"}),d(" "+s(a(i)("invoice.actions.download")),1)]),_:1}),e(h,{variant:"flat",color:"primary",size:"small"},{default:o(()=>[e(_,{icon:"tabler-printer",size:"18",class:"me-1"}),d(" "+s(a(i)("invoice.actions.print")),1)]),_:1})])])])]),_:1}),e(p,{class:"pt-4 pb-4"},{default:o(()=>[e(w,null,{default:o(()=>[e(r,{cols:"12",md:"6",class:"mb-4"},{default:o(()=>[e(V,{rounded:"lg",class:"pa-4 billed-to-sheet"},{default:o(()=>[t("div",mt,[e(Q,{size:"44",color:"primary",variant:"tonal"},{default:o(()=>[t("span",null,s(R(l.value.client_name)),1)]),_:1}),t("div",_t,[t("span",pt,s(a(i)("invoice.sections.billedTo")),1),t("span",vt,s(l.value.client_name),1)])]),t("div",ft,[l.value.client_email?(u(),b("div",bt,[e(_,{icon:"tabler-mail",size:"18",class:"me-2"}),t("span",null,s(l.value.client_email),1)])):j("",!0),l.value.client_phone?(u(),b("div",ht,[e(_,{icon:"tabler-phone",size:"18",class:"me-2"}),t("span",null,s(l.value.client_phone),1)])):j("",!0)])]),_:1})]),_:1}),e(r,{cols:"12",md:"6",class:"mb-4"},{default:o(()=>[e(V,{rounded:"lg",class:"pa-4 invoice-info-sheet"},{default:o(()=>[e(w,{"no-gutters":""},{default:o(()=>[e(r,{cols:"6",class:"mb-3"},{default:o(()=>[t("span",xt,s(a(i)("invoice.sections.invoiceInfo.invoiceNumber")),1),c[2]||(c[2]=t("br",null,null,-1)),t("span",yt,s(l.value.invoice_number),1)]),_:1,__:[2]}),e(r,{cols:"6",class:"mb-3 text-right"},{default:o(()=>[t("span",gt,s(a(i)("invoice.sections.invoiceInfo.status")),1),c[3]||(c[3]=t("br",null,null,-1)),e(S,{color:f(l.value.status).color,size:"small",variant:"tonal",label:"",class:"mt-1"},{default:o(()=>[d(s(f(l.value.status).label),1)]),_:1},8,["color"])]),_:1,__:[3]}),e(r,{cols:"6",class:"mb-2"},{default:o(()=>[t("span",Vt,s(a(i)("invoice.sections.invoiceInfo.issuedAt")),1),c[4]||(c[4]=t("br",null,null,-1)),t("span",kt,s(l.value.issued_at),1)]),_:1,__:[4]}),e(r,{cols:"6",class:"mb-2 text-right"},{default:o(()=>[t("span",wt,s(a(i)("invoice.sections.invoiceInfo.dueAt")),1),c[5]||(c[5]=t("br",null,null,-1)),t("span",Ct,s(l.value.due_at),1)]),_:1,__:[5]}),e(r,{cols:"12",class:"mt-2"},{default:o(()=>[t("span",At,s(a(i)("invoice.sections.invoiceInfo.payment")),1),c[6]||(c[6]=t("br",null,null,-1)),t("span",It,[E.value?(u(),b("span",zt,s(a(i)("invoice.sections.invoiceInfo.paidAt",{date:l.value.paid_at})),1)):(u(),b("span",Nt,s(a(i)("invoice.sections.invoiceInfo.notPaidYet")),1))])]),_:1,__:[6]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(k),e(p,{class:"pt-4 pb-2"},{default:o(()=>[t("h3",jt,s(a(i)("invoice.items.title")),1),e(Z,{density:"comfortable",class:"invoice-items-table"},{default:o(()=>[t("thead",null,[t("tr",null,[t("th",Tt,s(a(i)("invoice.items.columns.description")),1),t("th",St,s(a(i)("invoice.items.columns.amountSar")),1)])]),t("tbody",null,[t("tr",null,[t("td",Bt,[d(s(a(i)("invoice.items.consultationWith"))+" ",1),t("strong",null,s(l.value.consultant_name),1)]),t("td",Dt,s(v(z.value)),1)])])]),_:1})]),_:1}),e(k),e(p,{class:"pt-4 pb-6"},{default:o(()=>[e(w,{justify:"end"},{default:o(()=>[e(r,{cols:"12",md:"6",lg:"4"},{default:o(()=>[e(V,{rounded:"lg",class:"pa-4 totals-sheet"},{default:o(()=>[t("div",Rt,[t("span",Wt,s(a(i)("invoice.totals.subtotal")),1),t("span",Ft,s(a(i)("invoice.currencyWithAmount",{amount:v(z.value)})),1)]),t("div",Lt,[t("span",Pt,s(a(i)("invoice.totals.tax",{rate:P.value})),1),t("span",$t,s(a(i)("invoice.currencyWithAmount",{amount:v($.value)})),1)]),e(k,{class:"my-3"}),t("div",Et,[t("span",Mt,s(a(i)("invoice.totals.total")),1),t("span",Ot,s(a(i)("invoice.currencyWithAmount",{amount:v(N.value)})),1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(k),e(p,{class:"text-body-2 text-medium-emphasis"},{default:o(()=>[d(s(a(i)("invoice.footerNote")),1)]),_:1})]),_:1})):(u(),y(g,{key:2},{default:o(()=>[e(T,null,{default:o(()=>[d(s(a(i)("invoice.states.notFoundTitle")),1)]),_:1}),e(p,null,{default:o(()=>[e(h,{color:"primary",variant:"text",onClick:c[0]||(c[0]=M=>a(A).back())},{default:o(()=>[e(_,{icon:"tabler-arrow-left",class:"me-2"}),d(" "+s(a(i)("invoice.actions.back")),1)]),_:1})]),_:1})]),_:1}))]))}},ce=K(Ut,[["__scopeId","data-v-1b0e9e59"]]);export{ce as default};

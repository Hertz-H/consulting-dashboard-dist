import{al as A,u as j,r as b,aX as B,O as V,E as D,c,b as t,e as r,i as R,o as l,d as e,f as N,k as S,a2 as I,l as n,s as u,a9 as d,t as a,aY as T}from"./index-D_BsgN_d.js";import{u as E}from"./useApi-CM-u9C21.js";import{c as F}from"./createUrl-g3-_zHjx.js";import{$ as M}from"./api-CqwGmpgL.js";import{V as P}from"./VCard-DA3WH8Yk.js";import{V as H}from"./VAlert-Chvp9_6f.js";import{V as L,a as v}from"./VRow-dG5tZQ8o.js";import{V as O}from"./VDivider-B9RRXbEE.js";import{V as U}from"./VChip-BTQY4HnE.js";import{V as X}from"./VSheet-Chqu0LdH.js";import"./index-CvOPxmL5.js";import"./VAvatar-DiDwKfKQ.js";import"./VImg-ht9GXiJm.js";import"./VCardText-BreTWY-m.js";/* empty css              */import"./VSlideGroup-CQSza4gX.js";const Y={class:"d-flex justify-space-between align-center mb-4"},q={class:"d-flex align-center gap-2"},G={key:0,class:"text-sm text-medium-emphasis text-end"},J={key:0,class:"d-flex justify-center py-8"},K={key:2},Q={class:"d-flex align-start gap-2"},W={class:"text-caption text-medium-emphasis"},Z={class:"text-body-1 font-weight-medium"},ee={class:"d-flex align-start gap-2"},se={class:"text-caption text-medium-emphasis"},te={class:"text-body-1"},ae=["href"],oe={key:1},ie={class:"d-flex align-start gap-2"},le={class:"text-caption text-medium-emphasis"},ce={class:"text-body-1"},re=["href"],ne={key:1},de={class:"d-flex align-center justify-space-between mb-3"},me={class:"d-flex align-center gap-2"},ue={class:"text-caption text-medium-emphasis"},_e={class:"text-body-1 font-weight-medium"},pe={class:"d-flex align-start gap-2"},ve={class:"w-100"},fe={class:"text-caption text-medium-emphasis mb-1"},he={class:"mb-0 message-pre"},ge={key:3,class:"py-8 text-center text-medium-emphasis"},Ee={__name:"[id]",async setup(xe){let m,f;const{t:o}=A(),w=j(),k=R(),h=w.params.id,_=b(!0),p=b(null),{data:C,execute:g}=([m,f]=B(()=>E(F(`/v1/contact-messages/${h}`))),m=await m,f(),m),s=V(()=>{var i;return((i=C.value)==null?void 0:i.data)??null}),$=i=>{if(!i)return"-";try{return new Date(i).toLocaleString()}catch{return i}},z=async()=>{try{if(!s.value||s.value.is_read)return;await M(`/v1/contact-messages/${h}/read`,{method:"PATCH"}),await g()}catch(i){console.error("Failed to mark message as read",i)}};D(async()=>{try{_.value=!0,await g(),await z()}catch{p.value=o("messageView.errors.loadFailed")}finally{_.value=!1}});const x=V(()=>s.value?s.value.is_read?{color:"success",label:o("messageView.status.viewed")}:{color:"primary",label:o("messageView.status.new")}:{color:"secondary",label:"-"});return(i,y)=>(l(),c("section",null,[t(P,{class:"pa-4"},{default:r(()=>[e("div",Y,[e("div",q,[t(I,{variant:"text",color:"primary",onClick:y[0]||(y[0]=ye=>n(k).back())},{default:r(()=>[t(d,{icon:"tabler-arrow-left",class:"me-1"}),u(" "+a(n(o)("common.back")),1)]),_:1})]),s.value?(l(),c("div",G,[u(a(n(o)("messageView.receivedAt"))+": ",1),e("strong",null,a($(s.value.created_at)),1)])):S("",!0)]),_.value?(l(),c("div",J,[t(T,{indeterminate:""})])):p.value?(l(),N(H,{key:1,type:"error",variant:"tonal",class:"mb-4"},{default:r(()=>[u(a(p.value),1)]),_:1})):s.value?(l(),c("div",K,[t(L,{class:"mb-4"},{default:r(()=>[t(v,{cols:"12",md:"4"},{default:r(()=>[e("div",Q,[t(d,{icon:"tabler-building",size:"22",class:"mt-1"}),e("div",null,[e("div",W,a(n(o)("messageView.fields.company")),1),e("div",Z,a(s.value.company_name||"-"),1)])])]),_:1}),t(v,{cols:"12",md:"4"},{default:r(()=>[e("div",ee,[t(d,{icon:"tabler-mail",size:"22",class:"mt-1"}),e("div",null,[e("div",se,a(n(o)("messageView.fields.email")),1),e("div",te,[s.value.email?(l(),c("a",{key:0,href:`mailto:${s.value.email}`,class:"text-link"},a(s.value.email),9,ae)):(l(),c("span",oe,"-"))])])])]),_:1}),t(v,{cols:"12",md:"4"},{default:r(()=>[e("div",ie,[t(d,{icon:"tabler-phone",size:"22",class:"mt-1"}),e("div",null,[e("div",le,a(n(o)("messageView.fields.phone")),1),e("div",ce,[s.value.phone?(l(),c("a",{key:0,href:`tel:${s.value.phone}`,class:"text-link"},a(s.value.phone),9,re)):(l(),c("span",ne,"-"))])])])]),_:1})]),_:1}),t(O,{class:"my-4"}),e("div",null,[e("div",de,[e("div",me,[t(d,{icon:"tabler-heading",size:"22"}),e("div",null,[e("div",ue,a(n(o)("messageView.fields.subject")),1),e("div",_e,a(s.value.subject||"-"),1)])]),t(U,{color:x.value.color,size:"small",label:""},{default:r(()=>[u(a(x.value.label),1)]),_:1},8,["color"])]),e("div",pe,[t(d,{icon:"tabler-message-2",size:"22",class:"mt-1"}),e("div",ve,[e("div",fe,a(n(o)("messageView.fields.message")),1),t(X,{class:"pa-4 rounded message-box",color:"grey-lighten-4"},{default:r(()=>[e("pre",he,a(s.value.message),1)]),_:1})])])])])):(l(),c("div",ge,a(n(o)("messageView.noData")),1))]),_:1})]))}};export{Ee as default};

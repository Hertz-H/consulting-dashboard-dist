import{_ as M}from"./AppTextarea-BQTJ-7tI.js";import{_ as z}from"./AppTextField-6Zt2y8Qn.js";import{al as G,u as q,r as b,bc as A,O as H,E as K,f as U,e as s,i as Q,o as g,b as r,k as S,s as x,t as v,aR as W,d as _,a9 as C,l as i,aF as X,a2 as Y}from"./index-DLyiUI4T.js";import N from"./TinyEditor-CEQJp4hN.js";import{$ as F}from"./api-BtdnJSD2.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as w,a as m}from"./VRow-BThkmVdP.js";import{V as D}from"./VCard-Bp3Y2g69.js";import{V as ee}from"./VSnackbar-TawvNeit.js";import{V as ae}from"./VCardText-CNPcEnqc.js";import{V as te}from"./VChip-C_HpRD3G.js";import{V as oe}from"./VForm-Vmkhs5rN.js";import"./VLabel-Bj0ZLaaG.js";import"./VTextarea-Cl4UfxkA.js";/* empty css                   */import"./VCounter-DSUdNhJf.js";import"./VImg-W922IUCz.js";import"./VField-DJvLbBqg.js";import"./form-4FzIkTDC.js";import"./easing-Bybner-F.js";import"./VInput-CZKa1bvG.js";import"./forwardRefs-C-GTDzx5.js";import"./VTextField-D_VDXh9N.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-GwUQM--D.js";import"./VOverlay-BpuXFPpY.js";import"./delay-CJQMA8o3.js";import"./lazy-D7mfu-eq.js";import"./scopeId-BqXwnYFS.js";import"./VSlideGroup-BBTw8Lc6.js";const re={class:"consultation-header d-flex flex-column flex-md-row align-center justify-space-between"},se={class:"header-left d-flex align-center"},ne={class:"header-icon-container"},le={class:"ms-4"},ie={class:"header-title"},de={class:"header-subtitle"},pe={class:"mt-4 mt-md-0 d-flex align-center gap-2"},ue="PUT",ce={__name:"[id]",setup(me){const{t:n}=G(),I=q(),L=Q(),V=I.params.id,O=`/v1/consultationTypes/${V}`,$=`/v1/consultationTypes/${V}`,f=b(!1),T=b(""),y=b("success"),u=b(!1),c=b(!1),e=A({name_ar:"",name_en:"",description_ar:"",description_en:"",support_areas_ar:"",support_areas_en:""}),p=A({name_ar:"",name_en:"",description_ar:"",description_en:"",support_areas_ar:"",support_areas_en:""}),h=t=>{if(!t)return{};if(typeof t=="object")return t;try{return JSON.parse(t)}catch{return{}}},E=t=>{const a=h(t==null?void 0:t.name),o=h(t==null?void 0:t.description),d=h(t==null?void 0:t.support_areas);e.name_ar=(a==null?void 0:a.ar)??"",e.name_en=(a==null?void 0:a.en)??"",e.description_ar=(o==null?void 0:o.ar)??"",e.description_en=(o==null?void 0:o.en)??"",e.support_areas_ar=(d==null?void 0:d.ar)??"",e.support_areas_en=(d==null?void 0:d.en)??"",p.name_ar=e.name_ar,p.name_en=e.name_en,p.description_ar=e.description_ar,p.description_en=e.description_en,p.support_areas_ar=e.support_areas_ar,p.support_areas_en=e.support_areas_en},B=()=>!!e.name_ar.trim()&&!!e.description_ar.trim()&&!!e.support_areas_ar.trim(),R=H(()=>e.name_ar!==p.name_ar||e.name_en!==p.name_en||e.description_ar!==p.description_ar||e.description_en!==p.description_en||e.support_areas_ar!==p.support_areas_ar||e.support_areas_en!==p.support_areas_en),k=(t,a)=>{var l;const o=((l=a==null?void 0:a._data)==null?void 0:l.errors)||{},d=Object.values(o).flat().filter(Boolean).join(`
`);T.value=d||n(t),y.value="error",f.value=!0},j=t=>{T.value=n(t),y.value="success",f.value=!0},P=async()=>{u.value=!0;try{const t=await F(O,{method:"GET",onResponseError({response:o}){k("consultationTypesUpdate.messages.loadFailed",o)}}),a=(t==null?void 0:t.data)??t;E(a)}finally{u.value=!1}};async function J(){if(!B()){T.value=n("consultationTypesUpdate.validation.requiredAr"),y.value="error",f.value=!0;return}c.value=!0;try{const t={name:JSON.stringify({ar:e.name_ar,en:e.name_en}),description:JSON.stringify({ar:e.description_ar,en:e.description_en}),support_areas:JSON.stringify({ar:e.support_areas_ar,en:e.support_areas_en})},a=await F($,{method:ue,body:t,onResponseError({response:d}){k("consultationTypesUpdate.messages.updateFailed",d)}}),o=(a==null?void 0:a.data)??a;o&&(o!=null&&o.id||o!=null&&o.name||o!=null&&o.support_areas)?E(o):await P(),j("consultationTypesUpdate.messages.updated"),L.push({name:"consultationTypes-index"})}finally{c.value=!1}}return K(P),(t,a)=>{const o=z,d=M;return g(),U(w,null,{default:s(()=>[r(m,{cols:"12"},{default:s(()=>[r(D,null,{default:s(()=>[r(ee,{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=l=>f.value=l),timeout:2600,color:y.value,location:"top right",class:"elevation-24"},{default:s(()=>[x(v(T.value),1)]),_:1},8,["modelValue","color"]),u.value?(g(),U(W,{key:0,indeterminate:"",class:"mb-0"})):S("",!0),r(ae,null,{default:s(()=>[r(w,null,{default:s(()=>[r(m,{cols:"12"},{default:s(()=>[_("div",re,[_("div",se,[_("div",ne,[r(C,{icon:"tabler-clipboard-check",size:"38"})]),_("div",le,[_("h2",ie,v(i(n)("consultationTypesUpdate.header.title")),1),_("p",de,v(i(n)("consultationTypesUpdate.header.subtitle")),1)])]),_("div",pe,[i(V)?(g(),U(te,{key:0,variant:"tonal",size:"small"},{default:s(()=>[x(" #"+v(i(V)),1)]),_:1})):S("",!0)])])]),_:1})]),_:1}),r(oe,{onSubmit:X(J,["prevent"])},{default:s(()=>[r(w,null,{default:s(()=>[r(m,{cols:"12",md:"6"},{default:s(()=>[r(o,{modelValue:e.name_ar,"onUpdate:modelValue":a[1]||(a[1]=l=>e.name_ar=l),label:i(n)("consultationTypesUpdate.form.nameArLabel"),placeholder:i(n)("consultationTypesUpdate.form.nameArPlaceholder"),"prepend-inner-icon":"tabler-letter-case",disabled:u.value||c.value},null,8,["modelValue","label","placeholder","disabled"])]),_:1}),r(m,{cols:"12",md:"6"},{default:s(()=>[r(o,{modelValue:e.name_en,"onUpdate:modelValue":a[2]||(a[2]=l=>e.name_en=l),label:i(n)("consultationTypesUpdate.form.nameEnLabel"),placeholder:i(n)("consultationTypesUpdate.form.nameEnPlaceholder"),"prepend-inner-icon":"tabler-letter-case",disabled:u.value||c.value},null,8,["modelValue","label","placeholder","disabled"])]),_:1}),r(m,{cols:"12",md:"6"},{default:s(()=>[r(d,{modelValue:e.description_ar,"onUpdate:modelValue":a[3]||(a[3]=l=>e.description_ar=l),label:i(n)("consultationTypesUpdate.form.descArLabel"),placeholder:i(n)("consultationTypesUpdate.form.descArPlaceholder"),"auto-grow":"",rows:"4","prepend-inner-icon":"tabler-file-text",disabled:u.value||c.value},null,8,["modelValue","label","placeholder","disabled"])]),_:1}),r(m,{cols:"12",md:"6"},{default:s(()=>[r(d,{modelValue:e.description_en,"onUpdate:modelValue":a[4]||(a[4]=l=>e.description_en=l),label:i(n)("consultationTypesUpdate.form.descEnLabel"),placeholder:i(n)("consultationTypesUpdate.form.descEnPlaceholder"),"auto-grow":"",rows:"4","prepend-inner-icon":"tabler-file-text",disabled:u.value||c.value},null,8,["modelValue","label","placeholder","disabled"])]),_:1}),r(m,{cols:"12",md:"6"},{default:s(()=>[r(N,{modelValue:e.support_areas_ar,"onUpdate:modelValue":a[5]||(a[5]=l=>e.support_areas_ar=l),"api-key":"",label:i(n)("consultationTypesUpdate.form.supportArLabel"),disabled:u.value||c.value},null,8,["modelValue","label","disabled"])]),_:1}),r(m,{cols:"12",md:"6"},{default:s(()=>[r(N,{modelValue:e.support_areas_en,"onUpdate:modelValue":a[6]||(a[6]=l=>e.support_areas_en=l),"api-key":"",label:i(n)("consultationTypesUpdate.form.supportEnLabel"),disabled:u.value||c.value},null,8,["modelValue","label","disabled"])]),_:1}),r(m,{cols:"12",class:"d-flex gap-4 mt-4"},{default:s(()=>[r(Y,{type:"submit",loading:c.value,disabled:u.value||c.value||!R.value,color:"primary"},{default:s(()=>[r(C,{icon:"tabler-device-floppy",class:"me-2"}),x(" "+v(i(n)("consultationTypesUpdate.actions.update")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},qe=Z(ce,[["__scopeId","data-v-b86ddbb4"]]);export{qe as default};

import{al as E,O as y,f as C,o as i,e as n,b as l,k,d as a,a9 as p,t as c,c as u,F as g,h as D,s as O,u as R,r as P,bd as q,w as L,l as F}from"./index-Df0vDIYO.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as N,V as U}from"./VRow-C48oP8rF.js";import{V as w}from"./VCard-CgfAP4z1.js";import{V as x}from"./VSheet-9kb09pNt.js";import{V}from"./VCardText-CB6nWipv.js";import{V as j}from"./VImg-D-iRAKzb.js";import{$ as M}from"./api-BZDa_H6V.js";/* empty css              */import"./VAvatar-BSK7_YRS.js";import"./index-CvOPxmL5.js";const G={class:"section-title"},J={key:0,class:"kv-list"},K={class:"kv-label"},Q={class:"kv-value"},W={class:"section-title"},X={key:0,class:"kv-list"},Y={class:"kv-label"},Z={class:"kv-value"},ee={class:"section-title"},te={key:0,class:"kv-list"},le={class:"kv-label"},se={class:"kv-value"},ie={class:"section-title"},ae={key:0,class:"kv-list"},oe={class:"kv-label"},ne={class:"kv-value"},re={class:"section-title"},ce={key:0,class:"kv-list mb-2"},ue={class:"kv-label"},de={class:"kv-value"},pe={key:1,class:"office-files"},ve={class:"file-thumb"},_e={class:"file-meta"},fe={class:"file-label"},be=["href"],me={key:2,class:"text-caption px-4 py-2"},ye={__name:"About",props:{data:{type:null,required:!0}},setup(I){const{t:f,te:b}=E({useScope:"global"}),m=I,A=t=>t?String(t).replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase()):"--",o=t=>t==null||t===""?"--":t,v=t=>typeof t=="string"&&/\.(png|jpe?g|gif|webp|bmp|svg)$/i.test(t||""),e=(t,s)=>b(t)?f(t):s??t,h=y(()=>{const t=m.data??{},s=t.bank_account??{};return{about:[{property:e("clientDetails.fields.client","Client"),value:o(t.name),icon:"tabler-user"},{property:e("clientDetails.fields.manager","Manager"),value:o(t.manager_name),icon:"tabler-id"},{property:e("clientDetails.fields.clientType","Client Type"),value:A(t.client_type),icon:"tabler-badge"},{property:e("clientDetails.fields.activity","Activity"),value:o(t.activity),icon:"tabler-briefcase"}],overview:[{property:e("clientDetails.fields.accountHolder","Account Holder"),value:o(s.account_holder_name),icon:"tabler-building-bank"},{property:e("clientDetails.fields.accountNo","Account No."),value:o(s.account_number),icon:"tabler-hash"},{property:e("clientDetails.fields.bank","Bank"),value:o(s.bank_name),icon:"tabler-building"}]}}),z=y(()=>{var s;const t=((s=m.data)==null?void 0:s.user)??{};return[{property:e("clientDetails.fields.userName","User Name"),value:o(t.name),icon:"tabler-user-circle"},{property:e("clientDetails.fields.email","Email"),value:o(t.email),icon:"tabler-mail"},{property:e("clientDetails.fields.phone","Phone"),value:o(t.phone),icon:"tabler-phone-call"},{property:e("clientDetails.fields.status","Status"),value:A(t.status),icon:"tabler-circle-dot"}]}),B=y(()=>{var s;const t=((s=m.data)==null?void 0:s.address)??{};return[{property:e("clientDetails.fields.city","City"),value:o(t.city),icon:"tabler-building-skyscraper"},{property:e("clientDetails.fields.district","District"),value:o(t.district),icon:"tabler-map"},{property:e("clientDetails.fields.street","Street"),value:o(t.street),icon:"tabler-road"},{property:e("clientDetails.fields.buildingNo","Building No."),value:o(t.building_number),icon:"tabler-building"},{property:e("clientDetails.fields.additionalNo","Additional No."),value:o(t.additional_number),icon:"tabler-plus"},{property:e("clientDetails.fields.postalCode","Postal Code"),value:o(t.postal_code),icon:"tabler-mailbox"},{property:e("clientDetails.fields.shortAddress","Short Address"),value:o(t.short_address),icon:"tabler-map-pin"}]}),S=y(()=>{var t;return((t=m.data)==null?void 0:t.office)??null}),T=y(()=>{const t=S.value;return t?[{property:e("clientDetails.fields.commercialRegNo","Commercial Reg. No."),value:o(t.commercial_registration_number),icon:"tabler-building-store"},{property:e("clientDetails.fields.establishmentNo","Establishment No."),value:o(t.establishment_number),icon:"tabler-id"},{property:e("clientDetails.fields.unifiedNo","Unified No."),value:o(t.unified_number),icon:"tabler-hash"},{property:e("clientDetails.fields.taxNo","Tax No."),value:o(t.tax_number),icon:"tabler-receipt-tax"},{property:e("clientDetails.fields.insuranceNo","Insurance No."),value:o(t.insurance_number),icon:"tabler-shield-lock"}]:[]}),$=y(()=>{const t=S.value;return t?[{key:"logo",label:e("clientDetails.files.logo","Logo"),url:t.logo||null},{key:"letterhead",label:e("clientDetails.files.letterhead","Letterhead"),url:t.letterhead||null},{key:"unified_doc",label:e("clientDetails.files.unifiedDoc","Unified Doc"),url:t.unified_doc||null},{key:"establishment_doc",label:e("clientDetails.files.establishmentDoc","Establishment Doc"),url:t.establishment_doc||null},{key:"registeration_doc",label:e("clientDetails.files.registrationDoc","Registration Doc"),url:t.registeration_doc||null}].filter(s=>!!s.url):[]});return(t,s)=>(i(),C(U,{class:"section-grid",align:"stretch"},{default:n(()=>[l(N,{cols:"12",md:"6"},{default:n(()=>[l(w,{class:"section",elevation:"1"},{default:n(()=>[l(x,{class:"section-header"},{default:n(()=>[l(p,{icon:"tabler-user-check",class:"me-2"}),a("span",G,c(e("clientDetails.titles.about","About"))+" - "+c(e("clientDetails.titles.client","Client")),1)]),_:1}),l(V,{class:"section-body"},{default:n(()=>{var d;return[(d=h.value.about)!=null&&d.length?(i(),u("div",J,[(i(!0),u(g,null,D(h.value.about,r=>(i(),u("div",{key:r.property,class:"kv-row"},[l(p,{icon:r.icon,size:"22",class:"kv-icon"},null,8,["icon"]),a("div",K,c(r.property),1),s[0]||(s[0]=a("div",{class:"kv-sep"},null,-1)),a("div",Q,c(r.value),1)]))),128))])):k("",!0)]}),_:1})]),_:1})]),_:1}),l(N,{cols:"12",md:"6"},{default:n(()=>[l(w,{class:"section",elevation:"1"},{default:n(()=>[l(x,{class:"section-header"},{default:n(()=>[l(p,{icon:"tabler-id-badge-2",class:"me-2"}),a("span",W,c(e("clientDetails.titles.user","User")),1)]),_:1}),l(V,{class:"section-body"},{default:n(()=>{var d;return[(d=z.value)!=null&&d.length?(i(),u("div",X,[(i(!0),u(g,null,D(z.value,r=>(i(),u("div",{key:r.property,class:"kv-row"},[l(p,{icon:r.icon,size:"22",class:"kv-icon"},null,8,["icon"]),a("div",Y,c(r.property),1),s[1]||(s[1]=a("div",{class:"kv-sep"},null,-1)),a("div",Z,c(r.value),1)]))),128))])):k("",!0)]}),_:1})]),_:1})]),_:1}),l(N,{cols:"12",md:"6"},{default:n(()=>[l(w,{class:"section",elevation:"1"},{default:n(()=>[l(x,{class:"section-header"},{default:n(()=>[l(p,{icon:"tabler-map-pin",class:"me-2"}),a("span",ee,c(e("clientDetails.titles.address","Address")),1)]),_:1}),l(V,{class:"section-body"},{default:n(()=>{var d;return[(d=B.value)!=null&&d.length?(i(),u("div",te,[(i(!0),u(g,null,D(B.value,r=>(i(),u("div",{key:r.property,class:"kv-row"},[l(p,{icon:r.icon,size:"22",class:"kv-icon"},null,8,["icon"]),a("div",le,c(r.property),1),s[2]||(s[2]=a("div",{class:"kv-sep"},null,-1)),a("div",se,c(r.value),1)]))),128))])):k("",!0)]}),_:1})]),_:1})]),_:1}),l(N,{cols:"12",md:"6"},{default:n(()=>[l(w,{class:"section",elevation:"1"},{default:n(()=>[l(x,{class:"section-header"},{default:n(()=>[l(p,{icon:"tabler-credit-card",class:"me-2"}),a("span",ie,c(e("clientDetails.titles.overview","Overview"))+" - "+c(e("clientDetails.titles.bank","Bank")),1)]),_:1}),l(V,{class:"section-body"},{default:n(()=>{var d;return[(d=h.value.overview)!=null&&d.length?(i(),u("div",ae,[(i(!0),u(g,null,D(h.value.overview,r=>(i(),u("div",{key:r.property,class:"kv-row"},[l(p,{icon:r.icon,size:"22",class:"kv-icon"},null,8,["icon"]),a("div",oe,c(r.property),1),s[3]||(s[3]=a("div",{class:"kv-sep"},null,-1)),a("div",ne,c(r.value),1)]))),128))])):k("",!0)]}),_:1})]),_:1})]),_:1}),S.value?(i(),C(N,{key:0,cols:"12"},{default:n(()=>[l(w,{class:"section",elevation:"1"},{default:n(()=>[l(x,{class:"section-header"},{default:n(()=>[l(p,{icon:"tabler-building-warehouse",class:"me-2"}),a("span",re,c(e("clientDetails.titles.office","Office")),1)]),_:1}),l(V,{class:"section-body"},{default:n(()=>{var d,r;return[(d=T.value)!=null&&d.length?(i(),u("div",ce,[(i(!0),u(g,null,D(T.value,_=>(i(),u("div",{key:_.property,class:"kv-row"},[l(p,{icon:_.icon,size:"22",class:"kv-icon"},null,8,["icon"]),a("div",ue,c(_.property),1),s[4]||(s[4]=a("div",{class:"kv-sep"},null,-1)),a("div",de,c(_.value),1)]))),128))])):k("",!0),(r=$.value)!=null&&r.length?(i(),u("div",pe,[(i(!0),u(g,null,D($.value,_=>(i(),u("div",{key:_.key,class:"file-card"},[a("div",ve,[v(_.url)?(i(),C(j,{key:0,src:_.url,cover:"",class:"thumb-img"},null,8,["src"])):(i(),C(p,{key:1,icon:"tabler-file-description",size:"28"}))]),a("div",_e,[a("div",fe,c(_.label),1),a("a",{class:"file-link",href:_.url,target:"_blank"},[l(p,{icon:"tabler-external-link",size:"16",class:"me-1"}),O(" "+c(e("clientDetails.actions.open","Open")),1)],8,be)])]))),128))])):(i(),u("div",me,c(e("clientDetails.empty.officeFiles","No office files on record.")),1))]}),_:1})]),_:1})]),_:1})):k("",!0)]),_:1}))}},he=H(ye,[["__scopeId","data-v-f193218d"]]),ke={__name:"index",setup(I){const f=R(),b=P(null),m=q(),A=y(()=>{var e,h;const v=f.query.clientId;return v||(((h=(e=m.user)==null?void 0:e.client)==null?void 0:h.id)??null)}),o=async()=>{if(f.params.tab!=="profile")return;const v=A.value;if(!v){b.value=null;return}try{const e=await M(`/v1/clients/${v}`);b.value=(e==null?void 0:e.data)??null}catch(e){console.error("Failed to fetch client profile",e),b.value=null}};return L([()=>f.params.tab,()=>f.query.clientId,()=>{var v,e;return(e=(v=m.user)==null?void 0:v.client)==null?void 0:e.id}],()=>{o()},{immediate:!0}),(v,e)=>F(b)?(i(),C(U,{key:0},{default:n(()=>[l(N,{cols:"12"},{default:n(()=>[l(he,{data:F(b)},null,8,["data"])]),_:1})]),_:1})):k("",!0)}},Be={__name:"[tab]",setup(I){const f=R();return y({get:()=>f.params.tab,set:()=>f.params.tab}),(b,m)=>(i(),u("div",null,[l(ke)]))}};export{Be as default};

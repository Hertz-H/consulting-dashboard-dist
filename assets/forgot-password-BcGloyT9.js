import{_ as N}from"./AppTextField-jGANKBQX.js";import{al as P,i as j,r as c,O as q,c as w,o as C,b as e,e as s,d as o,l as i,k as A,s as u,a9 as g,t as m,aF as E,a2 as S,au as M}from"./index-Df0vDIYO.js";import{_ as O}from"./sc-Cf-H3ghh.js";import{u as R}from"./authStore-DUaivpLC.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as F,a as f}from"./VRow-C48oP8rF.js";import{V as $}from"./VCard-CgfAP4z1.js";import{V as z}from"./VCardText-CB6nWipv.js";import{V as D}from"./VForm-LJs8z4wK.js";import{V as G}from"./VContainer-CkDeoApE.js";import{V as H}from"./VSnackbar-U_R2qOlN.js";import"./VLabel-X6aAEUPa.js";import"./VTextField-Bk-xicTH.js";/* empty css                   */import"./VCounter-CDNaFmaS.js";import"./VImg-D-iRAKzb.js";import"./VField-uLTC6ZdN.js";import"./form-CH_H7Z9j.js";import"./easing-Bybner-F.js";import"./VInput-DH7V_F8-.js";import"./forwardRefs-C-GTDzx5.js";import"./useApi-CrpjD065.js";/* empty css              */import"./VAvatar-BSK7_YRS.js";import"./VOverlay-CEc4fXoL.js";import"./delay-FQ7L2EsZ.js";import"./lazy-B5EM0j6M.js";import"./scopeId-DhzGCC8_.js";const J={class:"admin-forgot-page",dir:"rtl"},K={class:"hero-visual"},L={class:"hero-image"},Q={class:"img-container"},W=["alt"],X={class:"float-card float-top float-top--mini"},Y={class:"mini-head"},Z={class:"mini-badge"},tt={class:"mini-state"},et={key:0,class:"mini-desc"},ot={class:"hero-copy"},at={class:"hero-title"},st={class:"hero-subtitle"},lt={__name:"forgot-password",setup(rt){const{t:r}=P(),h=j(),I=R(),p=c(!1),_=c(!1),V=c(""),b=c("success"),y=(n,t="success")=>{V.value=n,b.value=t,_.value=!0},d=c({email:""}),T=q(()=>{var n;return!!((n=d.value.email)!=null&&n.trim())}),v=c(""),B=async()=>{var n,t;if(!T.value){y(r("auth.forgot.validation_required")||"اكتب البريد الإلكتروني","error");return}p.value=!0,v.value="";try{const l=d.value.email.trim(),{message:a}=await I.forgotPassword({channel:"email",identifier:l});sessionStorage.setItem("reset_identifier",l),sessionStorage.setItem("reset_channel","email"),await M(()=>h.replace({name:"verify",query:{identifier:l,channel:"email"}}))}catch(l){const a=(n=l==null?void 0:l.response)==null?void 0:n.data;let k=(a==null?void 0:a.message)||(l==null?void 0:l.message)||r("auth.forgot.failed")||"فشل إرسال الرمز";const x=a!=null&&a.errors?(t=Object.values(a.errors).flat())==null?void 0:t[0]:null;x&&(k=x),y(k,"error")}finally{p.value=!1}};return(n,t)=>{const l=N;return C(),w("section",J,[e(G,{class:"content",fluid:""},{default:s(()=>[e(F,{class:"align-center",style:{"min-height":"100vh"}},{default:s(()=>[e(f,{cols:"12",md:"6",class:"d-flex justify-center"},{default:s(()=>[o("div",K,[o("div",L,[t[4]||(t[4]=o("div",{class:"shimmer"},null,-1)),t[5]||(t[5]=o("div",{class:"visual-bg"},null,-1)),o("div",Q,[o("img",{src:O,alt:i(r)("auth.forgot.title")||"Forgot Password"},null,8,W)]),o("div",X,[o("div",Y,[o("div",Z,[e(g,{icon:"tabler-mail",size:"16",class:"me-1"}),u(" "+m(i(r)("auth.forgot.otp")||"إرسال رمز"),1)]),o("div",tt,[t[3]||(t[3]=o("span",{class:"mini-dot"},null,-1)),u(" "+m(i(r)("auth.forgot.secure")||"آمن"),1)])]),v.value?(C(),w("div",et,m(v.value),1)):A("",!0)])])])]),_:1}),e(f,{cols:"12",md:"6"},{default:s(()=>[o("div",ot,[o("h1",at,m(i(r)("auth.forgot.title")||"نسيت كلمة المرور؟"),1),o("p",st,m(i(r)("auth.forgot.subtitle")||"ادخل بريدك الإلكتروني وسنرسل لك رمز تحقق لإعادة التعيين."),1),e($,{class:"forgot-card",elevation:"0"},{default:s(()=>[e(z,null,{default:s(()=>[e(D,{onSubmit:E(B,["prevent"])},{default:s(()=>[e(F,null,{default:s(()=>[e(f,{cols:"12"},{default:s(()=>[e(l,{modelValue:d.value.email,"onUpdate:modelValue":t[0]||(t[0]=a=>d.value.email=a),label:i(r)("auth.forgot.email")||"البريد الإلكتروني",placeholder:i(r)("auth.forgot.email_placeholder")||"example@email.com","prepend-inner-icon":"tabler-mail",autocomplete:"email"},null,8,["modelValue","label","placeholder"])]),_:1}),e(f,{cols:"12",class:"d-flex gap-3 mt-2"},{default:s(()=>[e(S,{type:"submit",loading:p.value,color:"primary",class:"btn-primary"},{default:s(()=>[e(g,{icon:"tabler-send",class:"me-2"}),u(" "+m(i(r)("auth.forgot.send")||"إرسال الرمز"),1)]),_:1},8,["loading"]),e(S,{variant:"outlined",class:"btn-outline",onClick:t[1]||(t[1]=a=>i(h).replace({name:"login"}))},{default:s(()=>[e(g,{icon:"tabler-arrow-back",class:"me-2"}),u(" "+m(i(r)("auth.forgot.back")||"رجوع لتسجيل الدخول"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),e(H,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=a=>_.value=a),color:b.value,location:"bottom end",timeout:"3500"},{default:s(()=>[u(m(V.value),1)]),_:1},8,["modelValue","color"])])}}},At=U(lt,[["__scopeId","data-v-02848528"]]);export{At as default};

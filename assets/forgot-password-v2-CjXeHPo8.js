import{_ as I}from"./AppTextField-jGANKBQX.js";import{al as P,i as j,r as c,O as q,c as w,o as C,b as o,e as s,d as e,l as i,k as A,s as u,a9 as h,t as m,aF as E,a2 as F,au as M}from"./index-Df0vDIYO.js";import{_ as O}from"./sc-Cf-H3ghh.js";import{u as R}from"./authStore-DUaivpLC.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as T,a as p}from"./VRow-C48oP8rF.js";import{V as $}from"./VCard-CgfAP4z1.js";import{V as z}from"./VCardText-CB6nWipv.js";import{V as D}from"./VForm-LJs8z4wK.js";import{V as G}from"./VContainer-CkDeoApE.js";import{V as H}from"./VSnackbar-U_R2qOlN.js";import"./VLabel-X6aAEUPa.js";import"./VTextField-Bk-xicTH.js";/* empty css                   */import"./VCounter-CDNaFmaS.js";import"./VImg-D-iRAKzb.js";import"./VField-uLTC6ZdN.js";import"./form-CH_H7Z9j.js";import"./easing-Bybner-F.js";import"./VInput-DH7V_F8-.js";import"./forwardRefs-C-GTDzx5.js";import"./useApi-CrpjD065.js";/* empty css              */import"./VAvatar-BSK7_YRS.js";import"./VOverlay-CEc4fXoL.js";import"./delay-FQ7L2EsZ.js";import"./lazy-B5EM0j6M.js";import"./scopeId-DhzGCC8_.js";const J={class:"admin-forgot-page",dir:"rtl"},K={class:"hero-visual"},L={class:"hero-image"},Q={class:"img-container"},W=["alt"],X={class:"float-card float-top float-top--mini"},Y={class:"mini-head"},Z={class:"mini-badge"},tt={class:"mini-state"},ot={key:0,class:"mini-desc"},at={class:"hero-copy"},et={class:"hero-title"},st={class:"hero-subtitle"},lt={__name:"forgot-password-v2",setup(rt){const{t:l}=P(),V=j(),B=R(),_=c(!1),v=c(!1),b=c(""),y=c("success"),g=(n,t="success")=>{b.value=n,y.value=t,v.value=!0},d=c({email:""}),N=q(()=>{var n;return!!((n=d.value.email)!=null&&n.trim())}),f=c(""),S=async()=>{var n,t;if(!N.value){g(l("auth.forgot.validation_required")||"اكتب البريد الإلكتروني","error");return}_.value=!0,f.value="";try{const r=d.value.email.trim(),{message:a}=await B.forgotPassword({channel:"email",identifier:r});a&&(f.value=a),g(l("auth.forgot.otp_sent")||"تم إرسال رمز التحقق إلى البريد الإلكتروني","success"),await M(()=>V.replace({name:"admin-reset-verify",query:{channel:"email",identifier:r}}))}catch(r){const a=(n=r==null?void 0:r.response)==null?void 0:n.data;let k=(a==null?void 0:a.message)||(r==null?void 0:r.message)||l("auth.forgot.failed")||"فشل إرسال الرمز";const x=a!=null&&a.errors?(t=Object.values(a.errors).flat())==null?void 0:t[0]:null;x&&(k=x),g(k,"error")}finally{_.value=!1}};return(n,t)=>{const r=I;return C(),w("section",J,[o(G,{class:"content",fluid:""},{default:s(()=>[o(T,{class:"align-center",style:{"min-height":"100vh"}},{default:s(()=>[o(p,{cols:"12",md:"6",class:"d-flex justify-center"},{default:s(()=>[e("div",K,[e("div",L,[t[4]||(t[4]=e("div",{class:"shimmer"},null,-1)),t[5]||(t[5]=e("div",{class:"visual-bg"},null,-1)),e("div",Q,[e("img",{src:O,alt:i(l)("auth.forgot.title")||"Forgot Password"},null,8,W)]),e("div",X,[e("div",Y,[e("div",Z,[o(h,{icon:"tabler-mail",size:"16",class:"me-1"}),u(" "+m(i(l)("auth.forgot.otp")||"إرسال رمز"),1)]),e("div",tt,[t[3]||(t[3]=e("span",{class:"mini-dot"},null,-1)),u(" "+m(i(l)("auth.forgot.secure")||"آمن"),1)])]),f.value?(C(),w("div",ot,m(f.value),1)):A("",!0)])])])]),_:1}),o(p,{cols:"12",md:"6"},{default:s(()=>[e("div",at,[e("h1",et,m(i(l)("auth.forgot.title")||"نسيت كلمة المرور؟"),1),e("p",st,m(i(l)("auth.forgot.subtitle")||"ادخل بريدك الإلكتروني وسنرسل لك رمز تحقق لإعادة التعيين."),1),o($,{class:"forgot-card",elevation:"0"},{default:s(()=>[o(z,null,{default:s(()=>[o(D,{onSubmit:E(S,["prevent"])},{default:s(()=>[o(T,null,{default:s(()=>[o(p,{cols:"12"},{default:s(()=>[o(r,{modelValue:d.value.email,"onUpdate:modelValue":t[0]||(t[0]=a=>d.value.email=a),label:i(l)("auth.forgot.email")||"البريد الإلكتروني",placeholder:i(l)("auth.forgot.email_placeholder")||"example@email.com","prepend-inner-icon":"tabler-mail",autocomplete:"email"},null,8,["modelValue","label","placeholder"])]),_:1}),o(p,{cols:"12",class:"d-flex gap-3 mt-2"},{default:s(()=>[o(F,{type:"submit",loading:_.value,color:"primary",class:"btn-primary"},{default:s(()=>[o(h,{icon:"tabler-send",class:"me-2"}),u(" "+m(i(l)("auth.forgot.send")||"إرسال الرمز"),1)]),_:1},8,["loading"]),o(F,{variant:"outlined",class:"btn-outline",onClick:t[1]||(t[1]=a=>i(V).replace({name:"login"}))},{default:s(()=>[o(h,{icon:"tabler-arrow-back",class:"me-2"}),u(" "+m(i(l)("auth.forgot.back")||"رجوع لتسجيل الدخول"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),o(H,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=a=>v.value=a),color:y.value,location:"bottom end",timeout:"3500"},{default:s(()=>[u(m(b.value),1)]),_:1},8,["modelValue","color"])])}}},At=U(lt,[["__scopeId","data-v-fed9c53b"]]);export{At as default};

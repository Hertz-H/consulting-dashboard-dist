import{b5 as p,at as u,G as i}from"./index-BVpKynl4.js";import{$ as y}from"./api-DA_9kprT.js";function h(t,s,a="en"){return!t||typeof t!="object"?t:t[s]??t[a]??t[Object.keys(t)[0]]??""}function c(t,s){return Array.isArray(t)?t.map(a=>{const n={...a};return Object.keys(n).forEach(o=>{const e=n[o];e&&typeof e=="object"&&!Array.isArray(e)&&!e.id&&(e.ar!==void 0||e.en!==void 0||e.fr!==void 0)&&(n[o]=h(e,s))}),n}):[]}const _=p("global",{state:()=>({currentLanguage:u("language",i.app.i18n.defaultLocale).value||i.app.i18n.defaultLocale||"en",activities:[],consultations_types:[],consultations_statuses:[],cities:[],notifications:[]}),actions:{syncLanguage(){const s=u("language",i.app.i18n.defaultLocale).value||i.app.i18n.defaultLocale||"en";return this.currentLanguage=s,s},async fetchFeedData(){try{const t=this.syncLanguage(),s=await y("/v1/dashboard/feed"),a=(s==null?void 0:s.data)??s??{},n=a.activities??[],o=c(n,t),e=a.consultations_types??[],l=c(e,t),r=a.consultations_statuses??[],d=c(r,t),g=a.cities??[],f=c(g,t);this.activities=o,this.consultations_types=l,this.cities=f,this.consultations_statuses=d,console.log("Fetched feed data with language:",t),console.log("Activities:",this.activities),console.log("Consultations Types:",this.consultations_types),console.log("rowConsultations Statuses:",r),console.log("Consultations Statuses:",this.consultations_statuses)}catch(t){console.error("fetchFeedData failed:",t)}}}});export{_ as u};

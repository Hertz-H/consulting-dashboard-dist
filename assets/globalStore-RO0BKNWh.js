import{b5 as p,at as r,G as o}from"./index-CbS20ExG.js";import{$ as y}from"./api-AcZyo7DO.js";function L(t,a,e="en"){return!t||typeof t!="object"?t:t[a]??t[e]??t[Object.keys(t)[0]]??""}function c(t,a){return Array.isArray(t)?t.map(e=>{const n={...e};return Object.keys(n).forEach(i=>{const s=n[i];s&&typeof s=="object"&&!Array.isArray(s)&&!s.id&&(s.ar!==void 0||s.en!==void 0||s.fr!==void 0)&&(n[i]=L(s,a))}),n}):[]}const _=p("global",{state:()=>({currentLanguage:r("language",o.app.i18n.defaultLocale).value||o.app.i18n.defaultLocale||"en",activities:[],consultations_types:[],consultations_statuses:[],cities:[],notifications:[]}),actions:{syncLanguage(){const a=r("language",o.app.i18n.defaultLocale).value||o.app.i18n.defaultLocale||"en";return this.currentLanguage=a,a},async fetchFeedData(){try{const t=this.syncLanguage(),a=await y("/v1/dashboard/feed"),e=(a==null?void 0:a.data)??a??{},n=e.activities??[],i=c(n,t),s=e.consultations_types??[],u=c(s,t),l=e.consultations_statuses??[],d=c(l,t),f=e.cities??[],g=c(f,t);this.activities=i,this.consultations_types=u,this.cities=g,this.consultations_statuses=d}catch(t){console.error("fetchFeedData failed:",t)}}}});export{_ as u};

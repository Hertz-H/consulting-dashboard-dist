function o(e){const r=e.indexOf("base64,")+7;return e.substring(r)}function i(e){if(!e)return"file";const r=e.lastIndexOf(".");return r>0?e.slice(0,r):e}function u(e=""){try{const n=new URL(e,window.location.origin).pathname.split("/").filter(Boolean);return n[n.length-1]||"file"}catch{return String(e).split("/").pop()||"file"}}async function p(e){const r=Array.isArray(e)?e:Array.from(e||[]),n=await Promise.all(r.map(a=>l(a)));return r.map((a,t)=>({base64:n[t],name:i(a.name),type:a.type||"",size:a.size??null}))}async function m(e){return e?{base64:await l(e),name:i(e.name),type:e.type||"",size:e.size??null}:null}const l=(e=[],r=!1)=>{try{if(r){const n=e.map(a=>new Promise((t,c)=>{const s=new FileReader;s.readAsDataURL(a),s.onload=()=>t(o(s.result)),s.onerror=c}));return Promise.all(n)}else return new Promise((n,a)=>{const t=new FileReader;t.readAsDataURL(e),t.onload=()=>n(o(t.result)),t.onerror=a})}catch(n){return console.warn(n),null}};export{m as a,l as b,p as f,u as n};

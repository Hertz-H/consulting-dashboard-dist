import{_ as Ee}from"./TablePagination-DMxhjePK.js";import{_ as qe}from"./AppDateTimePicker-Cs_usY5u.js";import{_ as Ge}from"./AppSelect-CDuCHJJN.js";import{_ as He}from"./AppTextField-B_Hg2V0D.js";import{u as Qe}from"./globalStore-D98SJR2D.js";import{al as We,aL as Xe,O as h,r as _,w as de,aX as Ye,E as Je,c as g,b as s,e as o,o as m,s as f,t as u,l as r,a2 as D,a9 as p,d as i,F as T,h as oe,f as x,k as w,v as me}from"./index-C7qtdPxF.js";import{u as Ze}from"./useApi-Dcbdi9nb.js";import{c as et}from"./createUrl-w7QDhdQJ.js";import{V as tt}from"./VNavigationDrawer-BXjgVPmi.js";import{V as Y,b as lt,d as at}from"./VCard-CvoYH-tB.js";import{V as st}from"./VDialog-DJVPmYlj.js";import{V as pe,a as Le}from"./VToolbar-DC6uBGuH.js";import{V as ne}from"./VSpacer-BDvFYnO8.js";import{V as j}from"./VDivider-_zTHJTS9.js";import{V as ot}from"./VSheet-DN0xJD9A.js";import{V as ie}from"./VCardText--YnIOn_v.js";import{V as fe,a as ve}from"./VRow-B7mc-M76.js";import{V as De}from"./VAvatar-G0k920wU.js";import{V as nt}from"./VDataTableServer-BK3527GT.js";import{V as it}from"./VMenu-I2_LsuYP.js";import{V as ut,a as be,b as _e}from"./VList-Dy3hiU5v.js";import{V}from"./VChip-0oIqGjbL.js";import"./VPagination-BTWbNfov.js";import"./VField-BqJwITnM.js";import"./VLabel-BL0IdVQU.js";import"./form-ZFmfzYYs.js";import"./easing-Bybner-F.js";import"./VInput-CbX7aBHh.js";import"./VImg-CqiRrtog.js";import"./VSelect-LtwgNZ1_.js";import"./VTextField-BsIs5QE9.js";/* empty css                   */import"./VCounter-Cj1o1Vys.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-Bjxq3jQa.js";import"./VOverlay-CWnbyjJr.js";import"./delay-DqFvUsxw.js";import"./lazy-CS65LDuN.js";import"./scopeId-CskrSFPb.js";import"./VCheckboxBtn-DtO76zpK.js";import"./VSelectionControl-B5WYu4tx.js";import"./api-CdP6DVdi.js";import"./index-CvOPxmL5.js";import"./ssrBoot-DTheOfQd.js";/* empty css              */import"./VDataTable-CkvRXYf-.js";import"./VTable-B4rWIEzF.js";import"./filter-DjVrZkvV.js";import"./VSlideGroup-D5YnXd4F.js";const rt={class:"text-body-2 font-weight-medium mb-1 d-block"},ct={class:"text-body-2 font-weight-medium mb-1 d-block"},dt={class:"text-body-2 font-weight-medium mb-1 d-block"},mt={class:"text-body-2 font-weight-medium mb-1 d-block"},pt={class:"text-body-2 font-weight-medium mb-1 d-block"},ft={class:"text-body-2 font-weight-medium mb-1 d-block"},vt={class:"d-flex justify-space-between mt-2"},bt={class:"d-flex flex-column"},_t={class:"text-h4"},yt={class:"text-body-1 text-capitalize"},gt={class:"d-flex flex-column"},ht={class:"text-h4"},Pt={key:0,class:"text-body-2 ms-1"},At={class:"text-body-1 text-capitalize"},xt={class:"d-flex gap-4 align-center flex-wrap"},wt={class:"d-flex align-center gap-2"},kt={class:"text-medium-emphasis text-body-2"},Vt={class:"pa-8 text-center"},St={class:"text-h6 mb-1"},Ct={class:"text-body-2 text-medium-emphasis mb-4"},zt={class:"d-flex flex-column"},Lt={class:"text-base font-weight-medium text-link"},Dt={class:"text-body-1"},jt={class:"text-body-1"},$t={class:"text-body-1"},Ut={class:"text-body-1"},Ft={class:"d-flex align-center gap-2"},Tt={key:0,class:"consultation-price"},Bt={class:"consultation-price__value"},It={key:1,class:"text-body-1"},Rt={class:"details-top mb-4"},Nt={class:"details-badge"},Kt={class:"text-caption text-medium-emphasis"},Mt={class:"text-h6 font-weight-bold"},Ot={class:"d-flex flex-wrap gap-2 justify-end"},Et={class:"text-body-1 font-weight-semibold"},qt={class:"details-rows"},Gt={class:"d-flex align-center gap-2"},Ht={class:"text-body-2 font-weight-medium details-row__label"},Qt={class:"details-row__value"},Wt=["href"],Gl={__name:"index",async setup(Xt){let J,ye;const{t:a}=We(),k=Qe(),je=Xe(),Z=h(()=>k.currentLanguage),I=(e,t)=>{const n=t||Z.value;return e==null?"—":typeof e=="string"?e:e[n]??e.en??e.ar??"—"},$e=e=>{const t=typeof e=="object"?e.en||e.ar||"":e||"";return String(t).trim().toLowerCase()},R=_(""),N=_(null),K=_(null),M=_(null),O=_(null),E=_(null),$=_(void 0),U=_(void 0),S=_(10),C=_(1),ee=_(),te=_(),ge=_([]),q=_(!1),Ue=e=>{var t,n;ee.value=(t=e.sortBy[0])==null?void 0:t.key,te.value=(n=e.sortBy[0])==null?void 0:n.order,S.value=e.itemsPerPage,C.value=e.page},B=e=>e?e instanceof Date?e.toISOString().slice(0,10):String(e).slice(0,10):void 0;de(N,e=>{if(!e){$.value=void 0,U.value=void 0;return}if(Array.isArray(e)){const[t,n]=e;$.value=B(t),U.value=B(n);return}if(typeof e=="object"){$.value=B(e.start),U.value=B(e.end);return}if(typeof e=="string"){const t=e.split(" to ");$.value=B(t[0]||""),U.value=B(t[1]||"");return}$.value=void 0,U.value=void 0},{immediate:!0});const z=e=>{const t=String(e||"").toLowerCase();return t==="chat"?{icon:"tabler-message-circle",color:"info",label:a("consultationsAllPage.method.chat")}:t==="session"?{icon:"tabler-video",color:"success",label:a("consultationsAllPage.method.session")}:t==="none"?{icon:"tabler-minus",color:"secondary",label:a("consultationsAllPage.method.none")}:{icon:"tabler-circle-dashed",color:"secondary",label:a("consultationsAllPage.method.dash")}},he=e=>{const t=String(e||"").trim().toLowerCase();return t==="collected"?"paid":t==="issue"?"rejected":t==="pending_review"?"under_review":t||"unpaid"},F=e=>{const t=he(e);return t==="paid"?{color:"success",icon:"tabler-checks",label:a("consultationsAllPage.paymentStatus.paid")}:t==="under_review"?{color:"warning",icon:"tabler-hourglass",label:a("consultationsAllPage.paymentStatus.under_review")}:t==="rejected"?{color:"error",icon:"tabler-x",label:a("consultationsAllPage.paymentStatus.rejected")}:t==="failed"?{color:"error",icon:"tabler-alert-circle",label:a("consultationsAllPage.paymentStatus.failed")}:t==="cancelled"?{color:"secondary",icon:"tabler-ban",label:a("consultationsAllPage.paymentStatus.cancelled")}:t==="unpaid"?{color:"primary",icon:"tabler-circle-off",label:a("consultationsAllPage.paymentStatus.unpaid")}:{color:"secondary",icon:"tabler-circle-dashed",label:a("consultationsAllPage.paymentStatus.dash")}},Fe=h(()=>[{title:a("consultationsAllPage.table.headers.consultationNumber"),key:"consultation_number"},{title:a("consultationsAllPage.table.headers.subject"),key:"subject"},{title:a("consultationsAllPage.table.headers.date"),key:"date"},{title:a("consultationsAllPage.table.headers.activity"),key:"activity"},{title:a("consultationsAllPage.table.headers.type"),key:"type"},{title:a("consultationsAllPage.table.headers.method"),key:"method"},{title:a("consultationsAllPage.table.headers.price"),key:"price"},{title:a("consultationsAllPage.table.headers.paymentStatus"),key:"payment_status"},{title:a("consultationsAllPage.table.headers.status"),key:"status"},{title:a("consultationsAllPage.table.headers.actions"),key:"actions",sortable:!1}]),{data:G,execute:Te}=([J,ye]=Ye(()=>Ze(et("/v1/all/consultations",{query:{search:R,type_id:M,status:K,method:O,payment_status:E,date_from:$,date_to:U,itemsPerPage:S,page:C,sortBy:ee,orderBy:te}}))),J=await J,ye(),J);de([R,N,K,M,O,E,S,C,ee,te],()=>Te());const Be=h(()=>{var t;const e=Z.value;return(((t=G.value)==null?void 0:t.data)||[]).map(n=>{var l,d,P,v,b,H,Q,W,X;const c=$e((l=n.status)==null?void 0:l.title),A=n.price??n.amount??n.total??n.final_price??n.consultation_price??null,L=he(n.payment_status??n.paymentStatus??n.invoice_status??((d=n.invoice)==null?void 0:d.status)??n.collection_status??n.collectionStatus??"unpaid");return{id:n.id,consultation_number:n.consultation_number,subject:n.subject||"—",description:n.description||"—",date:n.date,attachments_count:((P=n.attachments)==null?void 0:P.length)||0,activity:I((v=n.activity)==null?void 0:v.name,e),type:I((b=n.type)==null?void 0:b.name,e),status:I((H=n.status)==null?void 0:H.title,e),status_id:((Q=n.status)==null?void 0:Q.id)||null,method:n.oppointment_method||"none",method_date:n.oppointment_date||null,method_time:n.oppointment_time||null,method_url:n.oppointment_url||null,price:A,payment_status:L,_activity_id:((W=n.activity)==null?void 0:W.id)||n.activity_id,_type_id:((X=n.type)==null?void 0:X.id)||n.type_id,_statusKey:c}})}),ue=h(()=>{var e,t;return((t=(e=G.value)==null?void 0:e.meta)==null?void 0:t.total)||0}),Pe=h(()=>{var t,n,c,A,L,l,d,P,v,b,H,Q,W,X,we,ke,Ve,Se,Ce,ze;const e=((t=G.value)==null?void 0:t.stats)||{};return{total:e.total??((c=(n=G.value)==null?void 0:n.meta)==null?void 0:c.total)??(((L=(A=G.value)==null?void 0:A.data)==null?void 0:L.length)||0),status:{new:((l=e.status)==null?void 0:l.new)??0,under_study:((d=e.status)==null?void 0:d.under_study)??0,finished:((P=e.status)==null?void 0:P.finished)??0},methods:{chat:((v=e.methods)==null?void 0:v.chat)??0,session:((b=e.methods)==null?void 0:b.session)??0,none:((H=e.methods)==null?void 0:H.none)??0},revenue:{paid_total:((Q=e.revenue)==null?void 0:Q.paid_total)??0,unpaid_total:((W=e.revenue)==null?void 0:W.unpaid_total)??0,under_review_total:((X=e.revenue)==null?void 0:X.under_review_total)??0},payment_status:{paid:((we=e.payment_status)==null?void 0:we.paid)??0,unpaid:((ke=e.payment_status)==null?void 0:ke.unpaid)??0,under_review:((Ve=e.payment_status)==null?void 0:Ve.under_review)??0,rejected:((Se=e.payment_status)==null?void 0:Se.rejected)??0,failed:((Ce=e.payment_status)==null?void 0:Ce.failed)??0,cancelled:((ze=e.payment_status)==null?void 0:ze.cancelled)??0}}}),le=h(()=>{const e=Pe.value;return[{title:a("consultationsAllPage.widgets.new"),value:e.status.new,icon:"tabler-sparkles",color:"info"},{title:a("consultationsAllPage.widgets.underStudy"),value:e.status.under_study,icon:"tabler-clock-hour-4",color:"warning"},{title:a("consultationsAllPage.widgets.finished"),value:e.status.finished,icon:"tabler-checks",color:"success"},{title:a("consultationsAllPage.widgets.sessionsChats"),value:`${e.methods.session} / ${e.methods.chat}`,icon:"tabler-video",color:"primary"}]}),re=e=>Number(e||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),ae=h(()=>{const e=Pe.value;return[{title:a("consultationsAllPage.widgets.totalPaid"),value:re(e.revenue.paid_total),suffix:"SAR",icon:"tabler-currency-riyal",color:"success"},{title:a("consultationsAllPage.widgets.totalUnpaid"),value:re(e.revenue.unpaid_total),suffix:"SAR",icon:"tabler-currency-riyal",color:"primary"},{title:a("consultationsAllPage.widgets.totalUnderReview"),value:re(e.revenue.under_review_total),suffix:"SAR",icon:"tabler-currency-riyal",color:"warning"},{title:a("consultationsAllPage.widgets.unpaidCount"),value:e.payment_status.unpaid,icon:"tabler-circle-off",color:"primary"}]}),Ie=h(()=>{const e=k.consultations_types||[],t=Z.value;return e.map(n=>({title:I(n.name,t)||"—",value:n.id}))}),Re=h(()=>{const e=k.consultations_statuses||[],t=Z.value,n=c=>{var l,d,P,v;const L=[c.slug,c.key,c.code,c.name,c.title,(l=c.title)==null?void 0:l.en,(d=c.title)==null?void 0:d.ar,(P=c.name)==null?void 0:P.en,(v=c.name)==null?void 0:v.ar].map(b=>typeof b=="object"?(b==null?void 0:b.en)||(b==null?void 0:b.ar)||"":b).filter(Boolean).join(" ");return String(L).trim().toLowerCase()};return e.filter(c=>!n(c).includes("draft")).map(c=>{var A;return{title:I(c.title||c.name,t)||"—",value:c.id??c.slug??c.key??((A=c.name)==null?void 0:A.toLowerCase())??""}})}),Ne=h(()=>[{title:a("consultationsAllPage.method.chat"),value:"chat"},{title:a("consultationsAllPage.method.session"),value:"session"},{title:a("consultationsAllPage.method.none"),value:"none"}]),Ke=h(()=>[{title:a("consultationsAllPage.paymentStatus.paid"),value:"paid"},{title:a("consultationsAllPage.paymentStatus.unpaid"),value:"unpaid"},{title:a("consultationsAllPage.paymentStatus.under_review"),value:"under_review"},{title:a("consultationsAllPage.paymentStatus.rejected"),value:"rejected"},{title:a("consultationsAllPage.paymentStatus.failed"),value:"failed"},{title:a("consultationsAllPage.paymentStatus.cancelled"),value:"cancelled"}]),Ae=()=>{R.value="",M.value=null,K.value=null,O.value=null,E.value=null,N.value=null,$.value=void 0,U.value=void 0,C.value=1,ee.value=void 0,te.value=void 0};Je(async()=>{var e,t,n;(!((e=k.activities)!=null&&e.length)||!((t=k.consultations_types)!=null&&t.length)||!((n=k.consultations_statuses)!=null&&n.length))&&await k.fetchFeedData()}),de(()=>k.currentLanguage,()=>{k.fetchFeedData()});const ce=e=>{const t=String(e||"").toLowerCase();return t==="pending"||t==="under study"?"warning":t==="closed"||t==="finished"?"success":t==="new"?"info":t==="archived"?"secondary":t==="draft"?"info":"primary"},se=_(!1),y=_(null),Me=e=>{y.value=e||null,se.value=!0},xe=()=>{se.value=!1,y.value=null},Oe=h(()=>{const e=y.value||{},t=z(e.method),n=F(e.payment_status);return[{title:a("consultationsAllPage.detailsPopup.sections.basic"),icon:"tabler-info-circle",rows:[{label:a("consultationsAllPage.detailsPopup.labels.number"),value:e.consultation_number??"—",icon:"tabler-hash"},{label:a("consultationsAllPage.detailsPopup.labels.subject"),value:e.subject??"—",icon:"tabler-notes"},{label:a("consultationsAllPage.detailsPopup.labels.date"),value:e.date??"—",icon:"tabler-calendar"},{label:a("consultationsAllPage.detailsPopup.labels.activity"),value:e.activity??"—",icon:"tabler-briefcase"},{label:a("consultationsAllPage.detailsPopup.labels.type"),value:e.type??"—",icon:"tabler-category"}]},{title:a("consultationsAllPage.detailsPopup.sections.payment"),icon:"tabler-credit-card",rows:[{label:a("consultationsAllPage.detailsPopup.labels.price"),value:e.price!==null&&e.price!==void 0&&e.price!==""?`${Number(e.price).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})} SAR`:"—",icon:"tabler-currency-riyal"},{label:a("consultationsAllPage.detailsPopup.labels.paymentStatus"),value:n.label,icon:n.icon,chip:{color:n.color}}]},{title:a("consultationsAllPage.detailsPopup.sections.method"),icon:"tabler-video",rows:[{label:a("consultationsAllPage.detailsPopup.labels.method"),value:t.label,icon:t.icon,chip:{color:t.color}},{label:a("consultationsAllPage.detailsPopup.labels.methodDate"),value:e.method_date??"—",icon:"tabler-calendar"},{label:a("consultationsAllPage.detailsPopup.labels.methodTime"),value:e.method_time??"—",icon:"tabler-clock"},{label:a("consultationsAllPage.detailsPopup.labels.methodUrl"),value:e.method_url??"—",icon:"tabler-link",link:e.method_url||null}]},{title:a("consultationsAllPage.detailsPopup.sections.more"),icon:"tabler-list-details",rows:[{label:a("consultationsAllPage.detailsPopup.labels.status"),value:e.status??"—",icon:"tabler-circle-dot",chip:{color:ce(e._statusKey)}},{label:a("consultationsAllPage.detailsPopup.labels.attachments"),value:String(e.attachments_count??0),icon:"tabler-paperclip"},{label:a("consultationsAllPage.detailsPopup.labels.description"),value:e.description??"—",icon:"tabler-align-left",multiline:!0}]}]});return(e,t)=>{const n=He,c=Ge,A=qe,L=Ee;return m(),g("section",null,[s(tt,{modelValue:q.value,"onUpdate:modelValue":t[8]||(t[8]=l=>q.value=l),location:"end",temporary:"",scrim:!1,width:"360",class:"consultation-filter-drawer",color:"background"},{default:o(()=>[s(pe,{flat:""},{default:o(()=>[s(Le,null,{default:o(()=>[f(u(r(a)("consultationsAllPage.filters.title")),1)]),_:1}),s(ne),s(D,{icon:"",variant:"text",onClick:t[0]||(t[0]=l=>q.value=!1)},{default:o(()=>[s(p,{icon:"tabler-x"})]),_:1})]),_:1}),s(j),s(ot,{class:"pa-4 d-flex flex-column gap-4 consultation-filter-sheet",elevation:"0"},{default:o(()=>[i("div",null,[i("span",rt,u(r(a)("consultationsAllPage.filters.searchLabel")),1),s(n,{modelValue:R.value,"onUpdate:modelValue":t[1]||(t[1]=l=>R.value=l),placeholder:r(a)("consultationsAllPage.filters.searchPlaceholder"),density:"compact"},null,8,["modelValue","placeholder"])]),i("div",null,[i("span",ct,u(r(a)("consultationsAllPage.filters.typeLabel")),1),s(c,{modelValue:M.value,"onUpdate:modelValue":t[2]||(t[2]=l=>M.value=l),items:Ie.value,placeholder:r(a)("consultationsAllPage.filters.typePlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),i("div",null,[i("span",dt,u(r(a)("consultationsAllPage.filters.statusLabel")),1),s(c,{modelValue:K.value,"onUpdate:modelValue":t[3]||(t[3]=l=>K.value=l),items:Re.value,placeholder:r(a)("consultationsAllPage.filters.statusPlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),i("div",null,[i("span",mt,u(r(a)("consultationsAllPage.filters.paymentStatusLabel")),1),s(c,{modelValue:E.value,"onUpdate:modelValue":t[4]||(t[4]=l=>E.value=l),items:Ke.value,placeholder:r(a)("consultationsAllPage.filters.paymentStatusPlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),i("div",null,[i("span",pt,u(r(a)("consultationsAllPage.filters.methodLabel")),1),s(c,{modelValue:O.value,"onUpdate:modelValue":t[5]||(t[5]=l=>O.value=l),items:Ne.value,placeholder:r(a)("consultationsAllPage.filters.methodPlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),i("div",null,[i("span",ft,u(r(a)("consultationsAllPage.filters.dateRangeLabel")),1),s(A,{modelValue:N.value,"onUpdate:modelValue":t[6]||(t[6]=l=>N.value=l),config:{mode:"range",dateFormat:"Y-m-d"},density:"compact",class:"mt-1",placeholder:r(a)("consultationsAllPage.filters.dateRangePlaceholder")},null,8,["modelValue","placeholder"])]),s(j,{class:"my-2"}),i("div",vt,[s(D,{variant:"outlined",color:"secondary",onClick:Ae},{default:o(()=>[s(p,{icon:"tabler-refresh",class:"me-1"}),f(" "+u(r(a)("consultationsAllPage.filters.reset")),1)]),_:1}),s(D,{class:"consultation-filter-btn",variant:"text","prepend-icon":"tabler-filter",onClick:t[7]||(t[7]=l=>q.value=!1)},{default:o(()=>[f(u(r(a)("consultationsAllPage.filters.applyAndClose")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),s(Y,{class:"mb-6"},{default:o(()=>[s(ie,{class:"px-3"},{default:o(()=>[s(fe,null,{default:o(()=>[(m(!0),g(T,null,oe(le.value,(l,d)=>(m(),g(T,{key:d},[s(ve,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:o(()=>[i("div",{class:me(["d-flex justify-space-between align-center",e.$vuetify.display.xs?d!==le.value.length-1?"border-b pb-4":"":e.$vuetify.display.sm&&d<le.value.length/2?"border-b pb-4":""])},[i("div",bt,[i("h4",_t,u(l.value),1),i("span",yt,u(l.title),1)]),s(De,{color:l.color,variant:"tonal",rounded:"",size:"42"},{default:o(()=>[s(p,{icon:l.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])],2)]),_:2},1024),(e.$vuetify.display.mdAndUp?d!==le.value.length-1:e.$vuetify.display.smAndUp&&d%2===0)?(m(),x(j,{key:0,vertical:"",inset:"",length:"60"})):w("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),s(Y,{class:"mb-6"},{default:o(()=>[s(ie,{class:"px-3"},{default:o(()=>[s(fe,null,{default:o(()=>[(m(!0),g(T,null,oe(ae.value,(l,d)=>(m(),g(T,{key:`tot-${d}`},[s(ve,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:o(()=>[i("div",{class:me(["d-flex justify-space-between align-center",e.$vuetify.display.xs?d!==ae.value.length-1?"border-b pb-4":"":e.$vuetify.display.sm&&d<ae.value.length/2?"border-b pb-4":""])},[i("div",gt,[i("h4",ht,[f(u(l.value)+" ",1),l.suffix?(m(),g("span",Pt,u(l.suffix),1)):w("",!0)]),i("span",At,u(l.title),1)]),s(De,{color:l.color,variant:"tonal",rounded:"",size:"42"},{default:o(()=>[s(p,{icon:l.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])],2)]),_:2},1024),(e.$vuetify.display.mdAndUp?d!==ae.value.length-1:e.$vuetify.display.smAndUp&&d%2===0)?(m(),x(j,{key:0,vertical:"",inset:"",length:"60"})):w("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),s(Y,{id:"consultation-list"},{default:o(()=>[s(pe,{flat:"",density:"comfortable",class:"px-4"},{default:o(()=>[i("div",xt,[i("div",wt,[i("span",null,u(r(a)("consultationsAllPage.table.show")),1),s(c,{"model-value":S.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[9]||(t[9]=l=>S.value=parseInt(l,10))},null,8,["model-value"])]),i("span",kt,u(r(a)("consultationsAllPage.table.totalLabel",{count:ue.value})),1)]),s(ne),s(D,{class:"consultation-filter-btn",variant:"text","prepend-icon":"tabler-filter",onClick:t[10]||(t[10]=l=>q.value=!0)},{default:o(()=>[f(u(r(a)("consultationsAllPage.filters.title")),1)]),_:1})]),_:1}),s(j),s(nt,{"items-per-page":S.value,"onUpdate:itemsPerPage":t[12]||(t[12]=l=>S.value=l),"model-value":ge.value,"onUpdate:modelValue":t[13]||(t[13]=l=>ge.value=l),page:C.value,"onUpdate:page":t[14]||(t[14]=l=>C.value=l),items:Be.value,"items-length":ue.value,headers:Fe.value,class:"text-no-wrap","onUpdate:options":Ue},{"no-data":o(()=>[i("div",Vt,[s(p,{icon:"tabler-clipboard-list",size:"40",class:"mb-2"}),i("div",St,u(r(a)("consultationsAllPage.table.noDataTitle")),1),i("div",Ct,u(r(a)("consultationsAllPage.table.noDataHint")),1),s(D,{variant:"outlined",color:"secondary",onClick:Ae},{default:o(()=>[s(p,{icon:"tabler-refresh",class:"me-1"}),f(" "+u(r(a)("consultationsAllPage.filters.resetFilters")),1)]),_:1})])]),"item.consultation_number":o(({item:l})=>[i("div",zt,[i("h6",Lt,u(l.consultation_number),1)])]),"item.subject":o(({item:l})=>[i("div",Dt,u(l.subject),1)]),"item.date":o(({item:l})=>[i("div",jt,u(l.date),1)]),"item.activity":o(({item:l})=>[i("div",$t,u(l.activity),1)]),"item.type":o(({item:l})=>[i("div",Ut,u(l.type),1)]),"item.method":o(({item:l})=>[i("div",Ft,[s(V,{color:z(l.method).label===r(a)("consultationsAllPage.method.dash")?"secondary":z(l.method).color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>[s(p,{icon:z(l.method).icon,class:"me-1"},null,8,["icon"]),f(" "+u(z(l.method).label),1)]),_:2},1032,["color"]),l.method&&l.method!=="none"?(m(),g(T,{key:0},[l.method_date?(m(),x(V,{key:0,size:"x-small",variant:"tonal",color:"primary"},{default:o(()=>[s(p,{icon:"tabler-calendar",class:"me-1"}),f(" "+u(l.method_date),1)]),_:2},1024)):w("",!0),l.method_time?(m(),x(V,{key:1,size:"x-small",variant:"tonal",color:"primary"},{default:o(()=>[s(p,{icon:"tabler-clock",class:"me-1"}),f(" "+u(l.method_time),1)]),_:2},1024)):w("",!0)],64)):w("",!0)])]),"item.price":o(({item:l})=>[l.price!==null&&l.price!==void 0&&l.price!==""?(m(),g("div",Tt,[i("span",Bt,u(Number(l.price).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1),t[16]||(t[16]=i("span",{class:"consultation-price__currency"},"SAR",-1))])):(m(),g("div",It,"—"))]),"item.payment_status":o(({item:l})=>[s(V,{color:F(l.payment_status).color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>[s(p,{icon:F(l.payment_status).icon,class:"me-1"},null,8,["icon"]),f(" "+u(F(l.payment_status).label),1)]),_:2},1032,["color"])]),"item.status":o(({item:l})=>[s(V,{color:ce(l._statusKey),size:"small",label:"",class:"text-capitalize"},{default:o(()=>[f(u(l.status),1)]),_:2},1032,["color"])]),"item.actions":o(({item:l})=>[s(D,{icon:"",variant:"text",color:"medium-emphasis"},{default:o(()=>[s(p,{icon:"tabler-dots-vertical"}),s(it,{activator:"parent"},{default:o(()=>[s(ut,null,{default:o(()=>[s(be,{to:{name:"apps-consultations-show-id",params:{id:l.id}}},{prepend:o(()=>[s(p,{icon:"tabler-eye"})]),default:o(()=>[s(_e,null,{default:o(()=>[f(u(r(a)("consultationsAllPage.table.actions.view")),1)]),_:1})]),_:2},1032,["to"]),s(be,{onClick:d=>Me(l)},{prepend:o(()=>[s(p,{icon:"tabler-eye-filled"})]),default:o(()=>[s(_e,null,{default:o(()=>[f(u(r(a)("consultationsAllPage.detailsPopup.action")),1)]),_:1})]),_:2},1032,["onClick"]),r(je).can("update","consultation")&&l.status_id==1?(m(),x(be,{key:0,to:{name:"apps-consultations-edit-id",params:{id:l.id}}},{prepend:o(()=>[s(p,{icon:"tabler-pencil"})]),default:o(()=>[s(_e,null,{default:o(()=>[f(u(r(a)("consultationsAllPage.table.actions.edit")),1)]),_:1})]),_:2},1032,["to"])):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:o(()=>[s(L,{page:C.value,"onUpdate:page":t[11]||(t[11]=l=>C.value=l),"items-per-page":S.value,"total-items":ue.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","headers"])]),_:1}),s(st,{modelValue:se.value,"onUpdate:modelValue":t[15]||(t[15]=l=>se.value=l),width:"880",scrollable:""},{default:o(()=>[s(Y,{class:"details-card"},{default:o(()=>[s(pe,{flat:"",class:"px-4"},{default:o(()=>[s(p,{icon:"tabler-eye",class:"me-2"}),s(Le,{class:"text-subtitle-1 font-weight-semibold"},{default:o(()=>[f(u(r(a)("consultationsAllPage.detailsPopup.title")),1)]),_:1}),s(ne),s(D,{icon:"",variant:"text",onClick:xe},{default:o(()=>[s(p,{icon:"tabler-x"})]),_:1})]),_:1}),s(j),s(ie,{class:"pa-4"},{default:o(()=>{var l;return[i("div",Rt,[i("div",Nt,[i("div",Kt,u(r(a)("consultationsAllPage.detailsPopup.labels.number")),1),i("div",Mt,u(((l=y.value)==null?void 0:l.consultation_number)||"—"),1)]),i("div",Ot,[y.value?(m(),x(V,{key:0,color:F(y.value.payment_status).color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>[s(p,{icon:F(y.value.payment_status).icon,class:"me-1"},null,8,["icon"]),f(" "+u(F(y.value.payment_status).label),1)]),_:1},8,["color"])):w("",!0),y.value?(m(),x(V,{key:1,color:ce(y.value._statusKey),size:"small",label:"",class:"text-capitalize"},{default:o(()=>[f(u(y.value.status),1)]),_:1},8,["color"])):w("",!0),y.value?(m(),x(V,{key:2,color:z(y.value.method).color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>[s(p,{icon:z(y.value.method).icon,class:"me-1"},null,8,["icon"]),f(" "+u(z(y.value.method).label),1)]),_:1},8,["color"])):w("",!0)])]),s(fe,null,{default:o(()=>[(m(!0),g(T,null,oe(Oe.value,(d,P)=>(m(),x(ve,{key:`sec-${P}`,cols:"12",md:"6"},{default:o(()=>[s(Y,{variant:"outlined",class:"details-section"},{default:o(()=>[s(lt,{class:"d-flex align-center gap-2 py-3 px-4"},{default:o(()=>[s(p,{icon:d.icon},null,8,["icon"]),i("span",Et,u(d.title),1)]),_:2},1024),s(j),s(ie,{class:"px-4 py-3"},{default:o(()=>[i("div",qt,[(m(!0),g(T,null,oe(d.rows,(v,b)=>(m(),g("div",{key:`r-${P}-${b}`,class:"details-row"},[i("div",Gt,[s(p,{icon:v.icon,size:"18",class:"details-row__icon"},null,8,["icon"]),i("div",Ht,u(v.label),1)]),i("div",Qt,[v.chip?(m(),x(V,{key:0,color:v.chip.color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>[f(u(v.value),1)]),_:2},1032,["color"])):v.link?(m(),g("a",{key:1,href:v.link,target:"_blank",class:"details-link"},[s(p,{icon:"tabler-external-link",size:"16",class:"me-1"}),f(" "+u(r(a)("consultationsAllPage.detailsPopup.openLink")),1)],8,Wt)):(m(),g("div",{key:2,class:me(v.multiline?"details-multiline":"")},u(v.value),3))])]))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]}),_:1}),s(j),s(at,{class:"px-4 py-3"},{default:o(()=>[s(ne),s(D,{variant:"outlined",color:"secondary",onClick:xe},{default:o(()=>[s(p,{icon:"tabler-x",class:"me-1"}),f(" "+u(r(a)("consultationsAllPage.detailsPopup.close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Gl as default};

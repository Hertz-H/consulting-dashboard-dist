import{_ as O}from"./TablePagination-CS4oRDKK.js";import{u as Q}from"./useApi-C1A9lyWN.js";import{c as W}from"./createUrl-BHOIYPx0.js";import"./api-DA_9kprT.js";import{V as $}from"./VCard-CcIsawTw.js";import{V as j}from"./VDataTableServer-C6VjO0Ui.js";import{r as o,aW as F,w as G,O as u,c as L,b as i,e as s,o as N,l as r,ap as f,a2 as J,a9 as h,s as d,t as m,d as p,k as K}from"./index-BVpKynl4.js";import{V as X}from"./VMenu-BXpJdMwU.js";import{V as Y,a as q,b as D}from"./VList-BZR-KaJu.js";import{V as v}from"./VChip-B2bouHh-.js";import"./VDivider-MvBfrnW2.js";import"./VPagination-DxI2BG0X.js";import"./index-CvOPxmL5.js";import"./VAvatar-QJTJwQfz.js";import"./VImg-B5byWgVS.js";import"./VCardText-ZhV-99WX.js";import"./VDataTable-BLPts6on.js";import"./VSelect-prDainHh.js";import"./VTextField-DPG1ptcm.js";/* empty css                   */import"./VCounter-BrEPeYtP.js";import"./VField-hxsHU2Y6.js";import"./form-BTaXsSip.js";import"./easing-Bybner-F.js";import"./VInput-ts4WNp2Q.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-CsJHPI1x.js";import"./VOverlay-DwBuqUsh.js";import"./delay-GoSZAG7F.js";import"./lazy-BKTO8477.js";import"./scopeId-DCEPhMdw.js";import"./VCheckboxBtn-BLmahUsD.js";import"./VSelectionControl-Q0rF2zv_.js";import"./VTable-DIyP_YSt.js";import"./filter-Cwoj8dY7.js";import"./ssrBoot-CVxQAPjj.js";import"./VSlideGroup-DCs3qmnQ.js";const Z={class:"d-flex flex-column"},tt={class:"text-base"},et={key:0,class:"text-xs text-medium-emphasis"},at={class:"text-body-1"},st={class:"text-body-1 text-capitalize"},it={class:"text-body-1"},ot={class:"d-flex gap-2"},Wt={__name:"index",async setup(rt){let y,V;const k=o(""),w=o(),A=o(),B=o(),C=o(),g=o(),x=o(),c=o(10),n=o(1),S=o(),z=o(),b=o([]),R=a=>{var t,l;S.value=(t=a.sortBy[0])==null?void 0:t.key,z.value=(l=a.sortBy[0])==null?void 0:l.order},E=[{title:"Client",key:"name"},{title:"Manager",key:"manager_name"},{title:"Type",key:"client_type"},{title:"Activity",key:"activity"},{title:"City",key:"city"},{title:"Readiness",key:"readiness"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:T,execute:H}=([y,V]=F(()=>Q(W("/v1/clients",{query:{q:k,type:w||void 0,activity:A||void 0,city:B||void 0,status:C||void 0,has_bank:g==="with"?1:g==="without"?0:void 0,has_address:x==="with"?1:x==="without"?0:void 0}}))),y=await y,V(),y);G([k,w,A,B,C,g,x,c,n,S,z],()=>H());const _=u(()=>{var a;return(((a=T.value)==null?void 0:a.data)||[]).map(t=>{var l,e,I,P;return{id:t.id,name:t.name,manager_name:t.manager_name,client_type:t.client_type,activity:t.activity,city:((l=t.address)==null?void 0:l.city)||"—",shortAddress:((e=t.address)==null?void 0:e.short_address)||"",hasAddress:!!t.address,hasBank:!!t.bank_account,status:((I=t.user)==null?void 0:I.status)||"inactive",userId:(P=t.user)==null?void 0:P.id}})}),U=u(()=>{var a,t;return((t=(a=T.value)==null?void 0:a.meta)==null?void 0:t.total)||0});u(()=>Array.from(new Set(_.value.map(a=>a.client_type).filter(Boolean))).map(a=>({title:a,value:a}))),u(()=>Array.from(new Set(_.value.map(a=>a.activity).filter(Boolean))).map(a=>({title:a,value:a}))),u(()=>Array.from(new Set(_.value.map(a=>a.city).filter(a=>a&&a!=="—"))).map(a=>({title:a,value:a})));const M=a=>{const t=(a||"").toLowerCase();return t==="pending"?"warning":t==="active"?"success":t==="inactive"?"secondary":"primary"};return(a,t)=>{const l=O;return N(),L("section",null,[i($,null,{default:s(()=>[i(j,{"items-per-page":r(c),"onUpdate:itemsPerPage":t[1]||(t[1]=e=>f(c)?c.value=e:null),"model-value":r(b),"onUpdate:modelValue":t[2]||(t[2]=e=>f(b)?b.value=e:null),page:r(n),"onUpdate:page":t[3]||(t[3]=e=>f(n)?n.value=e:null),items:r(_),"items-length":r(U),headers:E,class:"text-no-wrap","show-select":"","onUpdate:options":R},{"item.name":s(({item:e})=>[p("div",Z,[p("h6",tt,m(e.name),1),e.shortAddress?(N(),L("div",et,m(e.shortAddress),1)):K("",!0)])]),"item.manager_name":s(({item:e})=>[p("div",at,m(e.manager_name),1)]),"item.client_type":s(({item:e})=>[i(v,{size:"small",label:"",class:"text-capitalize"},{default:s(()=>[d(m(e.client_type),1)]),_:2},1024)]),"item.activity":s(({item:e})=>[p("div",st,m(e.activity),1)]),"item.city":s(({item:e})=>[p("div",it,m(e.city),1)]),"item.readiness":s(({item:e})=>[p("div",ot,[i(v,{color:e.hasAddress?"success":"secondary",size:"x-small",label:""},{default:s(()=>t[4]||(t[4]=[d("Address")])),_:2,__:[4]},1032,["color"]),i(v,{color:e.hasBank?"success":"warning",size:"x-small",label:""},{default:s(()=>t[5]||(t[5]=[d("Bank")])),_:2,__:[5]},1032,["color"])])]),"item.status":s(({item:e})=>[i(v,{color:M(e.status),size:"small",label:"",class:"text-capitalize"},{default:s(()=>[d(m(e.status),1)]),_:2},1032,["color"])]),"item.actions":s(({item:e})=>[i(J,{icon:"",variant:"text",color:"medium-emphasis"},{default:s(()=>[i(h,{icon:"tabler-dots-vertical"}),i(X,{activator:"parent"},{default:s(()=>[i(Y,null,{default:s(()=>[i(q,{to:{name:"pages-user-profile-tab",params:{tab:"profile"},query:{clientId:e.id}}},{prepend:s(()=>[i(h,{icon:"tabler-eye"})]),default:s(()=>[i(D,null,{default:s(()=>t[6]||(t[6]=[d("View")])),_:1,__:[6]})]),_:2},1032,["to"]),i(q,{to:{name:"pages-account-settings-tab",params:{tab:"account"}}},{prepend:s(()=>[i(h,{icon:"tabler-pencil"})]),default:s(()=>[i(D,null,{default:s(()=>t[7]||(t[7]=[d("Edit")])),_:1,__:[7]})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[i(l,{page:r(n),"onUpdate:page":t[0]||(t[0]=e=>f(n)?n.value=e:null),"items-per-page":r(c),"total-items":r(U)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1})])}}};export{Wt as default};

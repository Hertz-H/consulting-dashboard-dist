import{_ as Q}from"./TablePagination-DKXCs0-X.js";import{u as W}from"./useApi-B0gRGbMk.js";import{c as $}from"./createUrl-BR4MHi8J.js";import"./api-DkRQUd_R.js";import{V as j}from"./VDataTableServer-Chg_P70C.js";import{r as o,aW as F,w as G,O as u,a as H,c as U,o as q,b as i,e as a,l as n,ap as g,a2 as J,a9 as v,s as m,t as p,d,k as K}from"./index-SPEBqYHt.js";import{V as X}from"./VMenu--ms9XuqF.js";import{V as Y,a as T,b as P}from"./VList-CwNcYVXs.js";import{V}from"./VChip-B5nePUHp.js";import{V as Z}from"./VCard-DFyVdlJ0.js";import"./VDivider-BvrLIspP.js";import"./VPagination-DJ475fR3.js";import"./index-CvOPxmL5.js";import"./VDataTable-DgfEu6ut.js";import"./VSelect-D2gtKb5q.js";import"./VTextField-Dk17KehR.js";/* empty css                   */import"./VCounter-DoeQn-hJ.js";import"./VImg-C2uT5hpN.js";import"./VField-CzZV76dA.js";import"./form-BKQV1BJc.js";import"./easing-Bybner-F.js";import"./VInput-Bl-immxi.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-Cqb1NDWa.js";import"./VOverlay-xhDqojca.js";import"./delay-CrsiKRgC.js";import"./lazy-JwJA2OAy.js";import"./scopeId-Bqh3wK4d.js";import"./VCheckboxBtn-PoFdamqx.js";import"./VSelectionControl-CDsRdMYR.js";import"./VAvatar-C9-XCtkR.js";import"./VTable-B6BBeB9Z.js";import"./filter-DHl6CSsz.js";import"./ssrBoot-BCVcJQit.js";import"./VSlideGroup-BmrsWah-.js";import"./VCardText-IJlnlLC_.js";const tt={class:"d-flex align-center gap-x-3"},et={class:"d-flex flex-column"},at={class:"text-base"},st={key:0,class:"text-xs text-medium-emphasis"},it={class:"text-body-1 text-capitalize"},ot={class:"text-body-1"},$t={__name:"index",async setup(nt){let f,k;const h=o(""),w=o(),z=o(),B=o(),b=o(),C=o(),c=o(10),l=o(1),S=o(),A=o(),x=o([]),R=s=>{var t,r;S.value=(t=s.sortBy[0])==null?void 0:t.key,A.value=(r=s.sortBy[0])==null?void 0:r.order},D=[{title:"Consultant",key:"name"},{title:"License",key:"licenseBadge"},{title:"Type",key:"type"},{title:"Specialization",key:"specialization"},{title:"City",key:"city"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:L,execute:E}=([f,k]=F(()=>W($("/v1/consultants",{query:{q:h,type:w||void 0,specialization:z||void 0,status:B||void 0,licensed:b==="licensed"?1:b==="unlicensed"?0:void 0,city:C||void 0}}))),f=await f,k(),f);G([w,z,B,b,C,h,c,l,S,A],()=>E());const y=u(()=>{var s;return(((s=L.value)==null?void 0:s.data)||[]).map(t=>{var r,_,e,N;return{id:t.id,name:t.name,licenseNumber:t.license_number,type:t.consultant_type,specialization:t.specialization,qualification:t.qualification,city:((r=t.address)==null?void 0:r.city)||"—",shortAddress:((_=t.address)==null?void 0:_.short_address)||"",hasBank:!!t.bank_account,status:((e=t.user)==null?void 0:e.status)||"inactive",userId:(N=t.user)==null?void 0:N.id}})}),I=u(()=>{var s,t;return((t=(s=L.value)==null?void 0:s.meta)==null?void 0:t.total)||0});u(()=>{const s=new Set(y.value.map(t=>t.type).filter(Boolean));return Array.from(s).map(t=>({title:t,value:t}))}),u(()=>{const s=new Set(y.value.map(t=>t.specialization).filter(Boolean));return Array.from(s).map(t=>({title:t,value:t}))}),u(()=>{const s=new Set(y.value.map(t=>t.city).filter(t=>t&&t!=="—"));return Array.from(s).map(t=>({title:t,value:t}))});const O=s=>{const t=(s||"").toLowerCase();return t==="pending"?"warning":t==="active"?"success":t==="inactive"?"secondary":"primary"},M=s=>s==="individual"?"tabler-user":"tabler-building";return(s,t)=>{const r=H("RouterLink"),_=Q;return q(),U("section",null,[i(Z,null,{default:a(()=>[i(j,{"items-per-page":n(c),"onUpdate:itemsPerPage":t[1]||(t[1]=e=>g(c)?c.value=e:null),"model-value":n(x),"onUpdate:modelValue":t[2]||(t[2]=e=>g(x)?x.value=e:null),page:n(l),"onUpdate:page":t[3]||(t[3]=e=>g(l)?l.value=e:null),items:n(y),"items-length":n(I),headers:D,class:"text-no-wrap","onUpdate:options":R},{"item.name":a(({item:e})=>[d("div",tt,[i(v,{icon:M(e.type),size:"20",class:"text-medium-emphasis"},null,8,["icon"]),d("div",et,[d("h6",at,[i(r,{to:{name:"pages-consultant-profile-tab",params:{tab:"profile"},query:{consultantId:e.id}},class:"font-weight-medium text-link"},{default:a(()=>[m(p(e.name),1)]),_:2},1032,["to"])]),e.shortAddress?(q(),U("div",st,p(e.shortAddress),1)):K("",!0)])])]),"item.licenseBadge":a(({item:e})=>[i(V,{color:e.licenseNumber?"success":"warning",size:"small",label:""},{default:a(()=>[m(p(e.licenseNumber||"Unlicensed"),1)]),_:2},1032,["color"])]),"item.type":a(({item:e})=>[i(V,{size:"small",label:"",class:"text-capitalize"},{default:a(()=>[m(p(e.type),1)]),_:2},1024)]),"item.specialization":a(({item:e})=>[d("div",it,p(e.specialization),1)]),"item.city":a(({item:e})=>[d("div",ot,p(e.city),1)]),"item.status":a(({item:e})=>[i(V,{color:O(e.status),size:"small",label:"",class:"text-capitalize"},{default:a(()=>[m(p(e.status),1)]),_:2},1032,["color"])]),"item.actions":a(({item:e})=>[i(J,{icon:"",variant:"text",color:"medium-emphasis"},{default:a(()=>[i(v,{icon:"tabler-dots-vertical"}),i(X,{activator:"parent"},{default:a(()=>[i(Y,null,{default:a(()=>[i(T,{to:{name:"pages-consultant-profile-tab",params:{tab:"profile"},query:{consultantId:e.id}}},{prepend:a(()=>[i(v,{icon:"tabler-eye"})]),default:a(()=>[i(P,null,{default:a(()=>t[4]||(t[4]=[m("View")])),_:1,__:[4]})]),_:2},1032,["to"]),i(T,{to:{name:"pages-consultant-account-settings-tab",params:{tab:"account"}}},{prepend:a(()=>[i(v,{icon:"tabler-pencil"})]),default:a(()=>[i(P,null,{default:a(()=>t[5]||(t[5]=[m("Edit")])),_:1,__:[5]})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:a(()=>[i(_,{page:n(l),"onUpdate:page":t[0]||(t[0]=e=>g(l)?l.value=e:null),"items-per-page":n(c),"total-items":n(I)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1})])}}};export{$t as default};

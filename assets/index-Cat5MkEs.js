import{_ as we}from"./TablePagination-DMxhjePK.js";import{_ as Pe}from"./AppDateTimePicker-Cs_usY5u.js";import{_ as ke}from"./AppSelect-CDuCHJJN.js";import{_ as Ce}from"./AppTextField-B_Hg2V0D.js";import{u as Ae}from"./useApi-Dcbdi9nb.js";import{c as Te}from"./createUrl-w7QDhdQJ.js";import{$ as Z}from"./api-CdP6DVdi.js";import{V as $e}from"./VNavigationDrawer-BXjgVPmi.js";import{V as Q}from"./VCard-CvoYH-tB.js";import{V as ee,a as Ue}from"./VToolbar-DC6uBGuH.js";import{V as te}from"./VSpacer-BDvFYnO8.js";import{al as Se,r as d,w as ae,aX as le,O as p,c as C,b as l,e as s,a as ze,o as v,s as f,t as o,l as r,a2 as U,a9 as h,d as n,F as N,h as se,f as F,k as X,v as ie}from"./index-C7qtdPxF.js";import{V as A}from"./VDivider-_zTHJTS9.js";import{V as Ie}from"./VSheet-DN0xJD9A.js";import{V as ne}from"./VCardText--YnIOn_v.js";import{V as oe,a as re}from"./VRow-B7mc-M76.js";import{V as ue}from"./VAvatar-G0k920wU.js";import{V as Le}from"./VDataTableServer-BK3527GT.js";import{V as Be}from"./VMenu-I2_LsuYP.js";import{V as De,a as Y,b as G}from"./VList-Dy3hiU5v.js";import{V as ce}from"./VChip-0oIqGjbL.js";import"./VPagination-BTWbNfov.js";import"./VField-BqJwITnM.js";import"./VLabel-BL0IdVQU.js";import"./form-ZFmfzYYs.js";import"./easing-Bybner-F.js";import"./VInput-CbX7aBHh.js";import"./VImg-CqiRrtog.js";import"./VSelect-LtwgNZ1_.js";import"./VTextField-BsIs5QE9.js";/* empty css                   */import"./VCounter-Cj1o1Vys.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-Bjxq3jQa.js";import"./VOverlay-CWnbyjJr.js";import"./delay-DqFvUsxw.js";import"./lazy-CS65LDuN.js";import"./scopeId-CskrSFPb.js";import"./VCheckboxBtn-DtO76zpK.js";import"./VSelectionControl-B5WYu4tx.js";import"./index-CvOPxmL5.js";import"./ssrBoot-DTheOfQd.js";/* empty css              */import"./VDataTable-CkvRXYf-.js";import"./VTable-B4rWIEzF.js";import"./filter-DjVrZkvV.js";import"./VSlideGroup-D5YnXd4F.js";const Ne={class:"text-body-2 font-weight-medium mb-1 d-block"},Fe={class:"text-body-2 font-weight-medium mb-1 d-block"},qe={class:"text-body-2 font-weight-medium mb-1 d-block"},Oe={class:"text-body-2 font-weight-medium mb-1 d-block"},je={class:"d-flex justify-space-between mt-2"},Ee={class:"d-flex flex-column"},He={class:"text-h4"},Me={class:"text-body-1 text-capitalize"},Qe={class:"d-flex flex-column"},Xe={class:"text-h4"},Ye={class:"text-body-1 text-capitalize"},Ge={class:"d-flex gap-4 align-center flex-wrap"},Je={class:"d-flex align-center gap-2"},Ke={class:"text-medium-emphasis text-body-2"},Re={class:"d-flex flex-column"},We={class:"text-base"},Ze={key:0,class:"text-xs text-medium-emphasis"},et={class:"text-body-1"},tt={class:"text-body-1 text-capitalize"},at={class:"text-body-1"},Rt={__name:"index",async setup(lt){let V,S;const{t:i}=Se(),z=d(""),I=d(null),T=d(null),J=d([]),$=d(!1),L=d(null),K=d(void 0),R=d(void 0),b=d(10),y=d(1),q=d("id"),O=d("desc"),g=d({q:"",type:null,status:null,created_from:void 0,created_to:void 0}),w=e=>{if(e)return e instanceof Date?e.toISOString().slice(0,10):String(e).slice(0,10)},de=(e,t,u)=>{if(!e){t.value=void 0,u.value=void 0;return}if(Array.isArray(e)){const[c,_]=e;t.value=w(c),u.value=w(_);return}if(typeof e=="object"){t.value=w(e.start),u.value=w(e.end);return}if(typeof e=="string"){const c=e.split(" to ");t.value=w(c[0]||""),u.value=w(c[1]||"");return}t.value=void 0,u.value=void 0},me=e=>{var u;y.value=e.page,b.value=e.itemsPerPage;const t=(u=e.sortBy)==null?void 0:u[0];q.value=(t==null?void 0:t.key)||"id",O.value=(t==null?void 0:t.order)||"desc"},j=e=>{if(e==null||e==="")return 2;if(typeof e=="number")return[0,1,2].includes(e)?e:2;const t=String(e).trim();if(t==="0"||t==="1"||t==="2")return Number(t);const u=t.toLowerCase();return u==="active"?1:u==="pending"?0:2},pe={1:"active",0:"pending",2:"inactive"},ve=e=>{const t=j(e);return t===0?"warning":t===1?"success":t===2?"secondary":"primary"},fe=e=>{const t=j(e);return pe[t]??"inactive"},ye=[{title:"Active",value:1},{title:"Pending",value:0},{title:"Inactive",value:2}],_e=[{title:"Entrepreneur",value:"entrepreneur"},{title:"Startup",value:"startup"},{title:"Small Business",value:"small_business"}];ae(L,e=>de(e,K,R),{immediate:!0});const be=async()=>{var e;g.value={q:((e=z.value)==null?void 0:e.trim())||"",type:I.value||null,status:T.value===null?null:Number(T.value),created_from:K.value,created_to:R.value},y.value=1,await P(),$.value=!1},ge=async()=>{z.value="",I.value=null,T.value=null,L.value=null,g.value={q:"",type:null,status:null,created_from:void 0,created_to:void 0},y.value=1,await P()};ae([b,y,q,O],()=>{P()});const{data:E,execute:P}=([V,S]=le(()=>Ae(Te("/v1/clients",{query:{q:p(()=>g.value.q||void 0),type:p(()=>g.value.type||void 0),status:p(()=>g.value.status===null?void 0:Number(g.value.status)),created_from:p(()=>g.value.created_from),created_to:p(()=>g.value.created_to),page:y,per_page:b,sortBy:q,orderBy:O}}))),V=await V,S(),V);[V,S]=le(()=>P()),await V,S();const W=p(()=>{var e;return(((e=E.value)==null?void 0:e.data)??[]).map(t=>{var u,c,_,k;return{id:t.id,name:t.name,manager_name:t.manager_name,client_type:t.client_type,activity:t.activity,user:t.user,address:t.address,bank_account:t.bank_account,office:t.office,city:((u=t.address)==null?void 0:u.city)||"â€”",shortAddress:((c=t.address)==null?void 0:c.short_address)||"",hasAddress:!!t.address,hasBank:!!t.bank_account,hasOffice:!!t.office,status:j((_=t.user)==null?void 0:_.status),userId:(k=t.user)==null?void 0:k.id}})}),H=p(()=>{var e,t;return((t=(e=E.value)==null?void 0:e.meta)==null?void 0:t.total)??0}),x=p(()=>{var _;const e=(_=E.value)==null?void 0:_.summary,t={total:(e==null?void 0:e.total)??0,active:(e==null?void 0:e.active)??0,pending:(e==null?void 0:e.pending)??0,inactive:(e==null?void 0:e.inactive)??0},u=W.value,c=k=>u.filter(M=>M.client_type===k).length;return{...t,entrepreneur:(e==null?void 0:e.entrepreneur)??c("entrepreneur"),startup:(e==null?void 0:e.startup)??c("startup"),small_business:(e==null?void 0:e.small_business)??c("small_business")}}),B=p(()=>[{title:"clientsPage.widgets.totalClients",value:x.value.total,icon:"tabler-users",color:"primary"},{title:"clientsPage.widgets.active",value:x.value.active,icon:"tabler-user-check",color:"success"},{title:"clientsPage.widgets.pending",value:x.value.pending,icon:"tabler-user-search",color:"warning"},{title:"clientsPage.widgets.inactive",value:x.value.inactive,icon:"tabler-user-off",color:"secondary"}]),D=p(()=>[{title:"clientsPage.widgets.entrepreneur",value:x.value.entrepreneur,icon:"tabler-briefcase",color:"primary"},{title:"clientsPage.widgets.startup",value:x.value.startup,icon:"tabler-rocket",color:"info"},{title:"clientsPage.widgets.smallBusiness",value:x.value.small_business,icon:"tabler-building-store",color:"success"}]),he=p(()=>[{title:i("clientsPage.table.headers.client"),key:"name"},{title:i("clientsPage.table.headers.manager"),key:"manager_name"},{title:i("clientsPage.table.headers.type"),key:"client_type"},{title:i("clientsPage.table.headers.activity"),key:"activity"},{title:i("clientsPage.table.headers.city"),key:"city"},{title:i("clientsPage.table.headers.status"),key:"status",sortable:!1},{title:i("clientsPage.table.headers.actions"),key:"actions",sortable:!1}]),xe=async e=>{e&&(await Z(`/v1/users/${e}/deactivate`,{method:"PATCH"}),P())},Ve=async e=>{e&&(await Z(`/v1/users/${e}/activate`,{method:"PATCH"}),P())};return(e,t)=>{const u=Ce,c=ke,_=Pe,k=ze("RouterLink"),M=we;return v(),C("section",null,[l($e,{modelValue:$.value,"onUpdate:modelValue":t[5]||(t[5]=a=>$.value=a),location:"end",temporary:"",scrim:!1,width:"360",class:"clients-filter-drawer",color:"background"},{default:s(()=>[l(ee,{flat:""},{default:s(()=>[l(Ue,null,{default:s(()=>[f(o(r(i)("common.filters")),1)]),_:1}),l(te),l(U,{icon:"",variant:"text",onClick:t[0]||(t[0]=a=>$.value=!1)},{default:s(()=>[l(h,{icon:"tabler-x"})]),_:1})]),_:1}),l(A),l(Ie,{class:"pa-4 d-flex flex-column gap-4 clients-filter-sheet",elevation:"0"},{default:s(()=>[n("div",null,[n("span",Ne,o(r(i)("clientsPage.filters.searchLabel")),1),l(u,{modelValue:z.value,"onUpdate:modelValue":t[1]||(t[1]=a=>z.value=a),placeholder:r(i)("clientsPage.filters.searchPlaceholder"),density:"compact"},null,8,["modelValue","placeholder"])]),n("div",null,[n("span",Fe,o(r(i)("clientsPage.filters.statusLabel")),1),l(c,{modelValue:T.value,"onUpdate:modelValue":t[2]||(t[2]=a=>T.value=a),items:ye.map(a=>({...a,title:r(i)("status."+a.title.toLowerCase())})),placeholder:r(i)("clientsPage.filters.statusPlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),n("div",null,[n("span",qe,o(r(i)("clientsPage.filters.typeLabel")),1),l(c,{modelValue:I.value,"onUpdate:modelValue":t[3]||(t[3]=a=>I.value=a),items:_e.map(a=>({...a,title:r(i)("clientsPage.types."+a.value)})),placeholder:r(i)("clientsPage.filters.typePlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),n("div",null,[n("span",Oe,o(r(i)("clientsPage.filters.createdRangeLabel")),1),l(_,{modelValue:L.value,"onUpdate:modelValue":t[4]||(t[4]=a=>L.value=a),config:{mode:"range",dateFormat:"Y-m-d"},placeholder:r(i)("clientsPage.filters.createdRangePlaceholder")},null,8,["modelValue","placeholder"])]),l(A,{class:"my-2"}),n("div",je,[l(U,{variant:"outlined",color:"secondary",onClick:ge},{default:s(()=>[l(h,{icon:"tabler-refresh",class:"me-1"}),f(" "+o(r(i)("common.reset")),1)]),_:1}),l(U,{class:"clients-filter-btn",variant:"text","prepend-icon":"tabler-filter",onClick:be},{default:s(()=>[f(o(r(i)("common.applyAndClose")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),l(Q,{class:"mb-6"},{default:s(()=>[l(ne,{class:"px-3"},{default:s(()=>[l(oe,null,{default:s(()=>[(v(!0),C(N,null,se(B.value,(a,m)=>(v(),C(N,{key:"top-"+m},[l(re,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:s(()=>[n("div",{class:ie(["d-flex justify-space-between align-center",e.$vuetify.display.xs?m!==B.value.length-1?"border-b pb-4":"":e.$vuetify.display.sm&&m<B.value.length/2?"border-b pb-4":""])},[n("div",Ee,[n("h4",He,o(a.value),1),n("span",Me,o(r(i)(a.title)),1)]),l(ue,{color:a.color,variant:"tonal",rounded:"",size:"42"},{default:s(()=>[l(h,{icon:a.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])],2)]),_:2},1024),(e.$vuetify.display.mdAndUp?m!==B.value.length-1:e.$vuetify.display.smAndUp&&m%2===0)?(v(),F(A,{key:0,vertical:"",inset:"",length:"60"})):X("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),l(Q,{class:"mb-6"},{default:s(()=>[l(ne,{class:"px-3"},{default:s(()=>[l(oe,null,{default:s(()=>[(v(!0),C(N,null,se(D.value,(a,m)=>(v(),C(N,{key:"types-"+m},[l(re,{cols:"12",sm:"6",md:"4",class:"px-6"},{default:s(()=>[n("div",{class:ie(["d-flex justify-space-between align-center",e.$vuetify.display.xs?m!==D.value.length-1?"border-b pb-4":"":e.$vuetify.display.sm&&m<D.value.length/2?"border-b pb-4":""])},[n("div",Qe,[n("h4",Xe,o(a.value),1),n("span",Ye,o(r(i)(a.title)),1)]),l(ue,{color:a.color,variant:"tonal",rounded:"",size:"42"},{default:s(()=>[l(h,{icon:a.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])],2)]),_:2},1024),e.$vuetify.display.mdAndUp&&m!==D.value.length-1?(v(),F(A,{key:0,vertical:"",inset:"",length:"60"})):X("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),l(Q,{id:"clients-list"},{default:s(()=>[l(ee,{flat:"",density:"comfortable",class:"px-4"},{default:s(()=>[n("div",Ge,[n("div",Je,[n("span",null,o(r(i)("common.show")),1),l(c,{"model-value":b.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[6]||(t[6]=a=>b.value=parseInt(a,10))},null,8,["model-value"])]),n("span",Ke,o(r(i)("clientsPage.table.totalClientsLabel",{count:H.value})),1)]),l(te),l(U,{class:"clients-filter-btn",variant:"text","prepend-icon":"tabler-filter",onClick:t[7]||(t[7]=a=>$.value=!0)},{default:s(()=>[f(o(r(i)("common.filters")),1)]),_:1})]),_:1}),l(A),l(Le,{"model-value":J.value,"onUpdate:modelValue":t[9]||(t[9]=a=>J.value=a),"items-per-page":b.value,"onUpdate:itemsPerPage":t[10]||(t[10]=a=>b.value=a),page:y.value,"onUpdate:page":t[11]||(t[11]=a=>y.value=a),"show-select":"",items:W.value,"items-length":H.value,headers:he.value,"item-value":"id",class:"text-no-wrap","onUpdate:options":me},{"item.name":s(({item:a})=>[n("div",Re,[n("h6",We,[l(k,{to:{name:"pages-user-profile-tab",params:{tab:"profile"},query:{clientId:a.id}},class:"font-weight-medium text-link"},{default:s(()=>[f(o(a.name),1)]),_:2},1032,["to"])]),a.shortAddress?(v(),C("div",Ze,o(a.shortAddress),1)):X("",!0)])]),"item.manager_name":s(({item:a})=>[n("div",et,o(a.manager_name),1)]),"item.client_type":s(({item:a})=>[l(ce,{size:"small",label:"",class:"text-capitalize"},{default:s(()=>[f(o(r(i)("clientsPage.types."+a.client_type)),1)]),_:2},1024)]),"item.activity":s(({item:a})=>[n("div",tt,o(a.activity),1)]),"item.city":s(({item:a})=>[n("div",at,o(a.city),1)]),"item.status":s(({item:a})=>[l(ce,{color:ve(a.status),size:"small",label:"",class:"text-capitalize"},{default:s(()=>[f(o(r(i)("status."+fe(a.status))),1)]),_:2},1032,["color"])]),"item.actions":s(({item:a})=>[l(U,{icon:"",variant:"text",color:"medium-emphasis"},{default:s(()=>[l(h,{icon:"tabler-dots-vertical"}),l(Be,{activator:"parent"},{default:s(()=>[l(De,null,{default:s(()=>[l(Y,{to:{name:"pages-user-profile-tab",params:{tab:"profile"},query:{clientId:a.id}}},{prepend:s(()=>[l(h,{icon:"tabler-eye"})]),default:s(()=>[l(G,null,{default:s(()=>[f(o(r(i)("common.view")),1)]),_:1})]),_:2},1032,["to"]),l(A,{class:"my-1"}),Number(a.status)===1?(v(),F(Y,{key:0,onClick:m=>xe(a.userId)},{prepend:s(()=>[l(h,{icon:"tabler-eye-off"})]),default:s(()=>[l(G,null,{default:s(()=>[f(o(r(i)("common.suspend")),1)]),_:1})]),_:2},1032,["onClick"])):(v(),F(Y,{key:1,onClick:m=>Ve(a.userId)},{prepend:s(()=>[l(h,{icon:"tabler-eye"})]),default:s(()=>[l(G,null,{default:s(()=>[f(o(r(i)("common.activate")),1)]),_:1})]),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:s(()=>[l(M,{page:y.value,"onUpdate:page":t[8]||(t[8]=a=>y.value=a),"items-per-page":b.value,"total-items":H.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["model-value","items-per-page","page","items","items-length","headers"])]),_:1})])}}};export{Rt as default};

import{_ as et}from"./TablePagination-DpWfT477.js";import{_ as tt}from"./AppSelect-CFPl_1Hi.js";import{_ as at}from"./AppTextField-COk9xKX0.js";import{u as Ae}from"./useApi-CM-u9C21.js";import{c as Ie}from"./createUrl-g3-_zHjx.js";import{$ as $e}from"./api-CqwGmpgL.js";import{V as st}from"./VNavigationDrawer-CAH00YaA.js";import{V as W,b as pe,d as lt}from"./VCard-DA3WH8Yk.js";import{V as ve}from"./VDialog-u70xaZc_.js";import{V as nt}from"./VSnackbar-CJEsp-dM.js";import{V as Pe,a as ot}from"./VToolbar-KYBSPYsJ.js";import{V as fe}from"./VSpacer-C386geoq.js";import{al as it,r as m,O as _,w as _e,aX as Se,E as ut,c as v,b as n,e as i,o as r,s as y,t as s,l as u,a2 as b,a9 as h,d as t,F as Ue,h as ct,f as A,k as p,v as rt}from"./index-D_BsgN_d.js";import{V as I}from"./VDivider-B9RRXbEE.js";import{V as ye}from"./VSheet-Chqu0LdH.js";import{V as se}from"./VCardText-BreTWY-m.js";import{V as dt,a as mt}from"./VRow-dG5tZQ8o.js";import{V as pt}from"./VAvatar-DiDwKfKQ.js";import{V as vt}from"./VDataTableServer-D7S2xQGo.js";import{V as ft}from"./VMenu-C9ItgqI2.js";import{V as _t,a as he,b as be}from"./VList-C0cyJi1v.js";import{V as yt}from"./VChip-BTQY4HnE.js";import{V as ht}from"./VImg-ht9GXiJm.js";import"./VPagination-NfpXM_oY.js";import"./VLabel-BirfzyCz.js";import"./VSelect-CcUYZ5wP.js";import"./VTextField-BRzklgAv.js";/* empty css                   */import"./VCounter-rHo2n1dF.js";import"./VField-DMdiEKws.js";import"./form-BPS662GX.js";import"./easing-Bybner-F.js";import"./VInput-C1dHExZP.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-xOo4n4OT.js";import"./VOverlay-_8fyux18.js";import"./delay-BE6crMdg.js";import"./lazy-Yg9_h87Z.js";import"./scopeId-D0MMzVks.js";import"./VCheckboxBtn-Bbs9tfyd.js";import"./VSelectionControl-BcJaXfWY.js";import"./index-CvOPxmL5.js";import"./ssrBoot-5EezpzzY.js";/* empty css              */import"./VDataTable-Cufjzu96.js";import"./VTable-Dk3u47PW.js";import"./filter-vR_hWUC6.js";import"./VSlideGroup-CQSza4gX.js";const bt={class:"text-body-2 font-weight-medium mb-1 d-block"},wt={class:"text-body-2 font-weight-medium mb-1 d-block"},xt={class:"text-body-2 font-weight-medium mb-1 d-block"},gt={class:"d-flex gap-3"},kt={class:"text-body-2 font-weight-medium mb-1 d-block"},Rt={class:"d-flex gap-3"},Vt={class:"text-body-2 font-weight-medium mb-1 d-block"},jt={class:"d-flex gap-3"},Nt={class:"d-flex justify-space-between mt-2"},Ct={class:"d-flex flex-column"},At={class:"text-h4"},It={class:"text-body-1 text-capitalize"},$t={class:"d-flex gap-4 align-center flex-wrap"},Pt={class:"d-flex align-center gap-2"},St={class:"text-medium-emphasis text-body-2"},Ut={class:"pa-8 text-center"},Lt={class:"text-h6 mb-1"},Tt={key:0,class:"text-body-2 text-medium-emphasis mb-4"},Bt={class:"d-flex flex-column"},Dt={class:"font-weight-medium"},Ft={class:"d-flex flex-column"},zt={class:"font-weight-medium"},Et={key:0,class:"text-medium-emphasis"},Ot={key:1,class:"text-medium-emphasis"},Mt={class:"d-flex flex-column"},qt={class:"font-weight-medium"},Wt={class:"text-medium-emphasis"},Ht={class:"d-flex flex-column"},Jt={class:"font-weight-medium"},Qt={key:0,class:"text-medium-emphasis"},Xt={class:"d-flex align-center gap-2"},Gt={key:1,class:"text-caption text-medium-emphasis font-italic"},Kt={class:"d-flex flex-column"},Yt={class:"text-medium-emphasis"},Zt={class:"text-medium-emphasis"},ea={class:"d-flex flex-column gap-1"},ta={class:"d-flex justify-space-between"},aa={class:"text-medium-emphasis"},sa={class:"font-weight-medium"},la={class:"d-flex justify-space-between"},na={class:"text-medium-emphasis"},oa={class:"font-weight-medium"},ia={class:"d-flex justify-space-between"},ua={class:"text-medium-emphasis"},ca={class:"font-weight-medium"},ra={class:"d-flex justify-space-between"},da={class:"text-medium-emphasis"},ma={class:"font-weight-medium"},pa={class:"d-flex justify-space-between"},va={class:"text-medium-emphasis"},fa={class:"font-weight-medium"},_a={class:"d-flex justify-space-between"},ya={class:"text-medium-emphasis"},ha={class:"font-weight-medium"},ba={class:"d-flex justify-space-between"},wa={class:"text-medium-emphasis"},xa={class:"font-weight-medium"},ga={key:0,class:"d-flex justify-space-between"},ka={class:"text-medium-emphasis"},Ra={class:"font-weight-medium"},Va={key:1,class:"d-flex justify-space-between"},ja={class:"text-medium-emphasis"},Na={class:"font-weight-medium"},Ca={key:2,class:"d-flex justify-space-between"},Aa={class:"text-medium-emphasis"},Ia={class:"font-weight-medium"},$a={key:3,class:"d-flex justify-space-between"},Pa={class:"text-medium-emphasis"},Sa={class:"font-weight-medium"},Ua={key:4,class:"d-flex justify-space-between"},La={class:"text-medium-emphasis"},Ta={class:"font-weight-medium"},Ba={key:5,class:"d-flex justify-space-between"},Da={class:"text-medium-emphasis"},Fa={class:"font-weight-medium"},za={key:6,class:"d-flex justify-space-between"},Ea={class:"text-medium-emphasis"},Oa={class:"font-weight-medium"},Ma={class:"d-flex justify-space-between"},qa={class:"text-medium-emphasis"},Wa={class:"font-weight-medium"},Ha={class:"d-flex justify-space-between"},Ja={class:"text-medium-emphasis"},Qa={class:"font-weight-medium"},Xa={key:0,class:"mt-3 d-flex align-center gap-2"},Ga={class:"text-body-2 text-medium-emphasis mb-4"},Ka={class:"d-flex flex-column gap-1"},Ya={class:"d-flex justify-space-between"},Za={class:"text-medium-emphasis"},es={class:"font-weight-medium"},ts={class:"d-flex justify-space-between"},as={class:"text-medium-emphasis"},ss={class:"font-weight-medium"},ls={class:"d-flex justify-space-between"},ns={class:"text-medium-emphasis"},os={class:"font-weight-medium"},is={class:"d-flex justify-space-between"},us={class:"text-medium-emphasis"},cs={class:"font-weight-medium"},rs={key:0,class:"d-flex justify-space-between"},ds={class:"text-medium-emphasis"},ms={class:"font-weight-medium"},ps={key:1,class:"d-flex justify-space-between"},vs={class:"text-medium-emphasis"},fs={class:"font-weight-medium"},_s={key:2,class:"d-flex justify-space-between"},ys={class:"text-medium-emphasis"},hs={class:"font-weight-medium"},bs={key:3,class:"d-flex justify-space-between"},ws={class:"text-medium-emphasis"},xs={class:"font-weight-medium"},gs={class:"d-flex justify-space-between"},ks={class:"text-medium-emphasis"},Rs={class:"font-weight-medium"},Vs={key:0,class:"mt-3 d-flex align-center gap-2"},js={key:0,class:"d-flex justify-center"},gl={__name:"index",async setup(Ns){let N,H;const{t:l,locale:Le}=it(),$=m(""),P=m(null),S=m(null),C=m(null),x=m(null),g=m(null),U=m(null),L=m(null),T=m(null),B=m(null),we=m([]),O=m(!1),k=m(10),R=m(1),le=m(),ne=m(),Te=a=>{var e,c,w,F;le.value=(c=(e=a.sortBy)==null?void 0:e[0])==null?void 0:c.key,ne.value=(F=(w=a.sortBy)==null?void 0:w[0])==null?void 0:F.order,k.value=a.itemsPerPage,R.value=a.page},J=m(!1),V=m(null),f=m(null),D=m(!1),Q=m(!1),X=m(null),oe=m(!1),xe=m(""),ge=m("success"),G=(a,e="success")=>{xe.value=a,ge.value=e,oe.value=!0},ke=(a,e)=>{V.value=a,f.value=e,J.value=!0},K=()=>{J.value=!1,V.value=null,f.value=null,D.value=!1},ie=a=>{X.value=a,Q.value=!0},Be=()=>{Q.value=!1,X.value=null},Y=m(!1),d=m(null),De=a=>{d.value=a,Y.value=!0},Fe=()=>{Y.value=!1,d.value=null},ze=_(()=>String(Le.value||"en").startsWith("ar")?"ar":"en"),Re=a=>Number(a??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),Z=a=>ze.value==="ar"?`${Re(a)} ر.س`:`SAR ${Re(a)}`,z=(a,e=90)=>a?a.length<=e?a:a.slice(0,e)+"…":"",Ee=a=>{const e=String(a||"").toLowerCase();return e==="under_review"?"warning":e==="approved"?"success":e==="rejected"||e==="failed"?"error":"secondary"},Ve=a=>{if(!a)return"—";const e=`paymentsReview.statusValues.${a}`,c=l(e);return c===e?String(a).replaceAll("_"," "):c},ee=a=>{if(!a)return"—";const e=String(a||"").toLowerCase(),c=e.replace(/\s+/g,"_");return c==="bank_transfer"?l("paymentsReview.channels.bankTransfer"):c==="wallet"?l("paymentsReview.channels.wallet"):c==="card"?l("paymentsReview.channels.card"):e||"—"},Oe=a=>{if(!a)return{};if(typeof a=="object")return a;try{return JSON.parse(a)||{}}catch{return{}}},ue=_(()=>{var a;return!!((a=$.value)!=null&&a.trim())||!!P.value||!!S.value||!!C.value||x.value!==null&&x.value!==""&&x.value!==void 0||g.value!==null&&g.value!==""&&g.value!==void 0||!!U.value||!!L.value||!!T.value||!!B.value}),ce=()=>{$.value="",P.value=null,S.value=null,C.value=null,x.value=null,g.value=null,U.value=null,L.value=null,T.value=null,B.value=null,R.value=1};_e([$,P,S,C,x,g,U,L,T,B,k],()=>{R.value=1});const{data:Me,execute:qe}=([N,H]=Se(()=>Ae(Ie("/v1/companyBankAccounts",{query:{}}))),N=await N,H(),N);ut(()=>{qe()});const re=_(()=>{var a;return((a=Me.value)==null?void 0:a.data)??[]});_(()=>{const a=new Set;return re.value.forEach(e=>{const c=String(e.channel||"").trim();c&&a.add(c)}),a.size||["bank transfer","wallet","card"].forEach(e=>a.add(e)),Array.from(a).map(e=>({title:ee(e),value:e}))});const We=_(()=>{const a=S.value;return(a?re.value.filter(c=>String(c.channel||"").toLowerCase()===String(a).toLowerCase()):re.value).map(c=>({title:[c.bank_name?c.bank_name:null,c.account_name?c.account_name:null,c.provider?`(${c.provider})`:null,c.channel?`- ${ee(c.channel)}`:null].filter(Boolean).join(" "),value:c.id}))});_e(S,()=>{if(!C.value)return;We.value.some(e=>e.value===C.value)||(C.value=null)});const{data:de,execute:me}=([N,H]=Se(()=>Ae(Ie("/v1/payments",{query:{search:$,status:P,method:S,company_bank_account_id:C,min_amount:x,max_amount:g,created_from:U,created_to:L,paid_from:T,paid_to:B,itemsPerPage:k,page:R,sortBy:le,orderBy:ne}}))),N=await N,H(),N);_e([$,P,S,C,x,g,U,L,T,B,k,R,le,ne],()=>{me()},{immediate:!0});const je=_(()=>{var a;return((a=de.value)==null?void 0:a.data)??[]}),E=_(()=>{var a;return((a=de.value)==null?void 0:a.stats)??{}}),Ne=_(()=>je.value.map(a=>{const e=Oe(a.meta),c=a.company_bank_account||a.bank_account||a.account||e.bank_account||{},w=a.method||c.channel||e.channel||a.channel||"bank_transfer";return{id:a.id,invoiceId:a.invoice_id,invoiceNumber:a.invoice_number,consultationNumber:a.consultation_number,userName:a.user_name,userEmail:a.user_email,clientName:a.client_name,consultantName:a.consultant_name,amount:Number(a.amount??0),transactionReference:a.transaction_reference,accountIdentifier:a.account_identifier,externalPaymentId:a.external_payment_id,proofImg:a.proof_img,status:a.status,paidAt:a.paid_at,createdAt:a.created_at,channel:w,bankId:c.id||a.company_bank_account_id||null,bankChannel:c.channel??e.bank_channel??null,bankProvider:c.provider??e.bank_provider??null,bankAccountName:c.account_name??e.account_name??null,bankName:c.bank_name??e.bank_name??null,bankIban:c.iban??e.iban??null,bankAccountNumber:c.account_number??e.account_number??null,walletNumber:c.wallet_number??e.wallet_number??null,_meta:e}})),te=_(()=>{var a,e,c;return((a=E.value)==null?void 0:a.total)??((c=(e=de.value)==null?void 0:e.meta)==null?void 0:c.total)??je.value.length??0}),M=_(()=>{const a={under_review:0,approved:0,rejected:0,failed:0,total_amount:0};return Ne.value.forEach(e=>{const c=String(e.status||"").toLowerCase();c==="under_review"?a.under_review+=1:c==="approved"?a.approved+=1:c==="rejected"?a.rejected+=1:c==="failed"&&(a.failed+=1),a.total_amount+=e.amount}),a}),q=_(()=>{var a,e,c,w,F;return{total:te.value,under_review:((a=E.value)==null?void 0:a.under_review)??M.value.under_review,approved:((e=E.value)==null?void 0:e.approved)??M.value.approved,rejected:((c=E.value)==null?void 0:c.rejected)??M.value.rejected,failed:((w=E.value)==null?void 0:w.failed)??M.value.failed,total_amount:((F=E.value)==null?void 0:F.total_amount)??M.value.total_amount}}),ae=_(()=>[{title:l("paymentsReview.widgets.underReview"),value:q.value.under_review,icon:"tabler-hourglass",color:"warning"},{title:l("paymentsReview.widgets.approved"),value:q.value.approved,icon:"tabler-check",color:"success"},{title:l("paymentsReview.widgets.rejectedFailed"),value:`${q.value.rejected} / ${q.value.failed}`,icon:"tabler-x",color:"error"},{title:l("paymentsReview.widgets.totalAmountSar"),value:Z(q.value.total_amount),icon:"tabler-coins",color:"primary"}]),He=_(()=>[{title:l("paymentsReview.statusItems.underReview"),value:"under_review"},{title:l("paymentsReview.statusItems.approved"),value:"approved"},{title:l("paymentsReview.statusItems.rejected"),value:"rejected"},{title:l("paymentsReview.statusItems.failed"),value:"failed"}]),Je=_(()=>[{title:l("paymentsReview.table.headers.payment"),key:"payment"},{title:l("paymentsReview.table.headers.payer"),key:"payer",sortable:!1},{title:l("paymentsReview.table.headers.reference"),key:"reference",sortable:!1},{title:l("paymentsReview.table.headers.method"),key:"method",sortable:!1},{title:l("paymentsReview.table.headers.amount"),key:"amount"},{title:l("paymentsReview.table.headers.status"),key:"status",sortable:!1},{title:l("paymentsReview.table.headers.proof"),key:"proof",sortable:!1},{title:l("paymentsReview.table.headers.dates"),key:"dates",sortable:!1},{title:l("paymentsReview.table.headers.actions"),key:"actions",sortable:!1}]),Qe=async a=>{D.value=!0;try{const e=await $e(`/v1/payments/${a.id}/approve`,{method:"POST"});K(),me(),G((e==null?void 0:e.message)||l("paymentsReview.messages.approved"),"success")}catch(e){D.value=!1,G((e==null?void 0:e.message)||l("paymentsReview.messages.approveFailed"),"error")}},Xe=async a=>{D.value=!0;try{const e=await $e(`/v1/payments/${a.id}/reject`,{method:"POST"});K(),me(),G((e==null?void 0:e.message)||l("paymentsReview.messages.rejected"),"success")}catch(e){D.value=!1,G((e==null?void 0:e.message)||l("paymentsReview.messages.rejectFailed"),"error")}},Ge=()=>{if(!(!f.value||!V.value)){if(V.value==="approve")return Qe(f.value);if(V.value==="reject")return Xe(f.value)}},Ce=a=>String(a.channel||"").toLowerCase().replace(/\s+/g,"_")==="bank_transfer",Ke=_(()=>V.value==="approve"?l("paymentsReview.confirm.titleApprove"):l("paymentsReview.confirm.titleReject")),Ye=_(()=>V.value==="approve"?"success":"error"),Ze=_(()=>V.value==="approve"?l("paymentsReview.confirm.hintApprove"):l("paymentsReview.confirm.hintReject"));return(a,e)=>{const c=at,w=tt,F=et;return r(),v("section",null,[n(st,{modelValue:O.value,"onUpdate:modelValue":e[10]||(e[10]=o=>O.value=o),location:"end",temporary:"",scrim:!1,width:"360",class:"review-filter-drawer",color:"background"},{default:i(()=>[n(Pe,{flat:""},{default:i(()=>[n(ot,null,{default:i(()=>[y(s(u(l)("paymentsReview.filters.title")),1)]),_:1}),n(fe),n(b,{icon:"",variant:"text",onClick:e[0]||(e[0]=o=>O.value=!1)},{default:i(()=>[n(h,{icon:"tabler-x"})]),_:1})]),_:1}),n(I),n(ye,{class:"pa-4 d-flex flex-column gap-4 review-filter-sheet",elevation:"0"},{default:i(()=>[t("div",null,[t("span",bt,s(u(l)("paymentsReview.filters.searchLabel")),1),n(c,{modelValue:$.value,"onUpdate:modelValue":e[1]||(e[1]=o=>$.value=o),placeholder:u(l)("paymentsReview.filters.searchPlaceholder"),density:"compact"},null,8,["modelValue","placeholder"])]),t("div",null,[t("span",wt,s(u(l)("paymentsReview.filters.statusLabel")),1),n(w,{modelValue:P.value,"onUpdate:modelValue":e[2]||(e[2]=o=>P.value=o),items:He.value,placeholder:u(l)("paymentsReview.filters.statusPlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),t("div",null,[t("span",xt,s(u(l)("paymentsReview.filters.amountLabel")),1),t("div",gt,[n(c,{modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=o=>x.value=o),type:"number",placeholder:u(l)("paymentsReview.filters.min"),density:"compact"},null,8,["modelValue","placeholder"]),n(c,{modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=o=>g.value=o),type:"number",placeholder:u(l)("paymentsReview.filters.max"),density:"compact"},null,8,["modelValue","placeholder"])])]),t("div",null,[t("span",kt,s(u(l)("paymentsReview.filters.createdAtLabel")),1),t("div",Rt,[n(c,{modelValue:U.value,"onUpdate:modelValue":e[5]||(e[5]=o=>U.value=o),type:"date",density:"compact"},null,8,["modelValue"]),n(c,{modelValue:L.value,"onUpdate:modelValue":e[6]||(e[6]=o=>L.value=o),type:"date",density:"compact"},null,8,["modelValue"])])]),t("div",null,[t("span",Vt,s(u(l)("paymentsReview.filters.paidAtLabel")),1),t("div",jt,[n(c,{modelValue:T.value,"onUpdate:modelValue":e[7]||(e[7]=o=>T.value=o),type:"date",density:"compact"},null,8,["modelValue"]),n(c,{modelValue:B.value,"onUpdate:modelValue":e[8]||(e[8]=o=>B.value=o),type:"date",density:"compact"},null,8,["modelValue"])])]),n(I,{class:"my-2"}),t("div",Nt,[n(b,{variant:"outlined",color:"secondary",onClick:ce},{default:i(()=>[n(h,{icon:"tabler-refresh",class:"me-1"}),y(" "+s(u(l)("paymentsReview.filters.reset")),1)]),_:1}),n(b,{class:"review-filter-btn",variant:"text","prepend-icon":"tabler-filter",onClick:e[9]||(e[9]=o=>O.value=!1)},{default:i(()=>[y(s(u(l)("paymentsReview.filters.applyAndClose")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),n(W,{class:"mb-6"},{default:i(()=>[n(se,{class:"px-3"},{default:i(()=>[n(dt,null,{default:i(()=>[(r(!0),v(Ue,null,ct(ae.value,(o,j)=>(r(),v(Ue,{key:j},[n(mt,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:i(()=>[t("div",{class:rt(["d-flex justify-space-between align-center",a.$vuetify.display.xs?j!==ae.value.length-1?"border-b pb-4":"":a.$vuetify.display.sm&&j<ae.value.length/2?"border-b pb-4":""])},[t("div",Ct,[t("h4",At,s(o.value),1),t("span",It,s(o.title),1)]),n(pt,{color:o.color,variant:"tonal",rounded:"",size:"42"},{default:i(()=>[n(h,{icon:o.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])],2)]),_:2},1024),(a.$vuetify.display.mdAndUp?j!==ae.value.length-1:a.$vuetify.display.smAndUp&&j%2===0)?(r(),A(I,{key:0,vertical:"",inset:"",length:"60"})):p("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),n(W,{id:"review-list"},{default:i(()=>[n(Pe,{flat:"",density:"comfortable",class:"px-4"},{default:i(()=>[t("div",$t,[t("div",Pt,[t("span",null,s(u(l)("paymentsReview.table.show")),1),n(w,{"model-value":k.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":e[11]||(e[11]=o=>k.value=parseInt(o,10))},null,8,["model-value"])]),t("span",St,s(u(l)("paymentsReview.table.totalLabel",{count:te.value})),1)]),n(fe),ue.value?(r(),A(b,{key:0,variant:"outlined",color:"secondary",class:"me-2",onClick:ce},{default:i(()=>[n(h,{icon:"tabler-refresh",class:"me-1"}),y(" "+s(u(l)("paymentsReview.filters.resetFiltersBtn")),1)]),_:1})):p("",!0),n(b,{class:"review-filter-btn",variant:"text","prepend-icon":"tabler-filter",onClick:e[12]||(e[12]=o=>O.value=!0)},{default:i(()=>[y(s(u(l)("paymentsReview.filters.title")),1)]),_:1})]),_:1}),n(I),n(vt,{"model-value":we.value,"onUpdate:modelValue":e[14]||(e[14]=o=>we.value=o),"items-per-page":k.value,"onUpdate:itemsPerPage":e[15]||(e[15]=o=>k.value=o),page:R.value,"onUpdate:page":e[16]||(e[16]=o=>R.value=o),"items-length":te.value,headers:Je.value,items:Ne.value,"item-value":"id",class:"text-no-wrap review-table","onUpdate:options":Te},{"no-data":i(()=>[t("div",Ut,[n(h,{icon:"tabler-receipt",size:"40",class:"mb-2"}),t("div",Lt,s(u(l)("paymentsReview.empty.title")),1),ue.value?(r(),v("div",Tt,s(u(l)("paymentsReview.empty.hint")),1)):p("",!0),ue.value?(r(),A(b,{key:1,variant:"outlined",color:"secondary",onClick:ce},{default:i(()=>[n(h,{icon:"tabler-refresh",class:"me-1"}),y(" "+s(u(l)("paymentsReview.filters.resetFiltersBtn")),1)]),_:1})):p("",!0)])]),"item.payment":i(({item:o})=>[t("div",Bt,[t("span",Dt,s(o.id)+"#",1)])]),"item.payer":i(({item:o})=>[t("div",Ft,[t("span",zt,s(o.userName),1),o.clientName?(r(),v("small",Et,s(u(l)("paymentsReview.table.labels.client"))+": "+s(o.clientName),1)):p("",!0),o.consultantName?(r(),v("small",Ot,s(u(l)("paymentsReview.table.labels.consultant"))+": "+s(o.consultantName),1)):p("",!0)])]),"item.reference":i(({item:o})=>[t("div",Mt,[t("span",qt,s(u(l)("paymentsReview.table.labels.invoice"))+": "+s(o.invoiceNumber||"—"),1),t("small",Wt,s(u(l)("paymentsReview.table.labels.consultation"))+": "+s(o.consultationNumber||"—"),1)])]),"item.method":i(({item:o})=>[t("div",Ht,[t("span",Jt,s(ee(o.channel)),1),o.bankName?(r(),v("small",Qt,s(u(l)("paymentsReview.table.labels.bank"))+": "+s(o.bankName),1)):p("",!0)])]),"item.amount":i(({item:o})=>[y(s(Z(o.amount)),1)]),"item.status":i(({item:o})=>[n(yt,{color:Ee(o.status),size:"small",label:"",class:"text-capitalize"},{default:i(()=>[y(s(Ve(o.status)),1)]),_:2},1032,["color"])]),"item.proof":i(({item:o})=>[t("div",Xt,[o.proofImg?(r(),A(b,{key:0,icon:"",variant:"text",title:u(l)("paymentsReview.actions.viewProof"),onClick:j=>ie(o.proofImg)},{default:i(()=>[n(h,{icon:"tabler-photo"})]),_:2},1032,["title","onClick"])):(r(),v("span",Gt,s(u(l)("paymentsReview.table.labels.noProof")),1))])]),"item.dates":i(({item:o})=>[t("div",Kt,[t("small",Yt,s(u(l)("paymentsReview.table.labels.created"))+": "+s(o.createdAt),1),t("small",Zt,s(u(l)("paymentsReview.table.labels.paidAt"))+": "+s(o.paidAt||"—"),1)])]),"item.actions":i(({item:o})=>[n(b,{icon:"",variant:"text",color:"medium-emphasis"},{default:i(()=>[n(h,{icon:"tabler-dots-vertical"}),n(ft,{activator:"parent"},{default:i(()=>[n(_t,null,{default:i(()=>[n(he,{onClick:j=>De(o)},{prepend:i(()=>[n(h,{icon:"tabler-eye"})]),default:i(()=>[n(be,null,{default:i(()=>[y(s(u(l)("paymentsReview.actions.viewDetails")),1)]),_:1})]),_:2},1032,["onClick"]),o.status==="under_review"&&Ce(o)?(r(),A(he,{key:0,onClick:j=>ke("approve",o)},{prepend:i(()=>[n(h,{icon:"tabler-check",color:"success"})]),default:i(()=>[n(be,null,{default:i(()=>[y(s(u(l)("paymentsReview.actions.approve")),1)]),_:1})]),_:2},1032,["onClick"])):p("",!0),o.status==="under_review"&&Ce(o)?(r(),A(he,{key:1,onClick:j=>ke("reject",o)},{prepend:i(()=>[n(h,{icon:"tabler-x",color:"error"})]),default:i(()=>[n(be,null,{default:i(()=>[y(s(u(l)("paymentsReview.actions.reject")),1)]),_:1})]),_:2},1032,["onClick"])):p("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:i(()=>[n(F,{page:R.value,"onUpdate:page":e[13]||(e[13]=o=>R.value=o),"items-per-page":k.value,"total-items":te.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["model-value","items-per-page","page","items-length","headers","items"])]),_:1}),n(ve,{modelValue:Y.value,"onUpdate:modelValue":e[18]||(e[18]=o=>Y.value=o),"max-width":"650"},{default:i(()=>[n(W,null,{default:i(()=>[n(pe,{class:"d-flex align-center justify-space-between"},{default:i(()=>[t("span",null,s(u(l)("paymentsReview.details.title")),1),n(b,{icon:"",variant:"text",onClick:Fe},{default:i(()=>[n(h,{icon:"tabler-x"})]),_:1})]),_:1}),n(I),d.value?(r(),A(se,{key:0},{default:i(()=>[n(ye,{class:"pa-3",elevation:"0",style:{border:"1px solid rgba(0, 0, 0, 0.06)","border-radius":"14px"}},{default:i(()=>[t("div",ea,[t("div",ta,[t("span",aa,s(u(l)("paymentsReview.details.paymentId")),1),t("span",sa,"#"+s(d.value.id),1)]),t("div",la,[t("span",na,s(u(l)("paymentsReview.details.invoice")),1),t("span",oa,s(d.value.invoiceNumber||"—"),1)]),t("div",ia,[t("span",ua,s(u(l)("paymentsReview.details.consultation")),1),t("span",ca,s(d.value.consultationNumber||"—"),1)]),t("div",ra,[t("span",da,s(u(l)("paymentsReview.details.payer")),1),t("span",ma,s(d.value.userName||"—"),1)]),t("div",pa,[t("span",va,s(u(l)("paymentsReview.details.amount")),1),t("span",fa,s(Z(d.value.amount)),1)]),t("div",_a,[t("span",ya,s(u(l)("paymentsReview.details.status")),1),t("span",ha,s(Ve(d.value.status)),1)]),t("div",ba,[t("span",wa,s(u(l)("paymentsReview.details.method")),1),t("span",xa,s(ee(d.value.channel)),1)]),d.value.bankName?(r(),v("div",ga,[t("span",ka,s(u(l)("paymentsReview.details.bank")),1),t("span",Ra,s(d.value.bankName),1)])):p("",!0),d.value.bankAccountName?(r(),v("div",Va,[t("span",ja,s(u(l)("paymentsReview.details.accountName")),1),t("span",Na,s(d.value.bankAccountName),1)])):p("",!0),d.value.bankIban?(r(),v("div",Ca,[t("span",Aa,s(u(l)("paymentsReview.details.iban")),1),t("span",Ia,s(z(d.value.bankIban,30)),1)])):p("",!0),d.value.bankAccountNumber?(r(),v("div",$a,[t("span",Pa,s(u(l)("paymentsReview.details.accNumber")),1),t("span",Sa,s(z(d.value.bankAccountNumber,30)),1)])):p("",!0),d.value.walletNumber?(r(),v("div",Ua,[t("span",La,s(u(l)("paymentsReview.details.wallet")),1),t("span",Ta,s(z(d.value.walletNumber,30)),1)])):p("",!0),d.value.accountIdentifier?(r(),v("div",Ba,[t("span",Da,s(u(l)("paymentsReview.table.labels.accountId")),1),t("span",Fa,s(d.value.accountIdentifier),1)])):p("",!0),d.value.transactionReference?(r(),v("div",za,[t("span",Ea,s(u(l)("paymentsReview.details.reference")),1),t("span",Oa,s(z(d.value.transactionReference,30)),1)])):p("",!0),t("div",Ma,[t("span",qa,s(u(l)("paymentsReview.details.created")),1),t("span",Wa,s(d.value.createdAt||"—"),1)]),t("div",Ha,[t("span",Ja,s(u(l)("paymentsReview.details.paidAt")),1),t("span",Qa,s(d.value.paidAt||"—"),1)])]),d.value.proofImg?(r(),v("div",Xa,[n(b,{size:"small",variant:"text",onClick:e[17]||(e[17]=o=>ie(d.value.proofImg))},{default:i(()=>[n(h,{icon:"tabler-photo",class:"me-1"}),y(" "+s(u(l)("paymentsReview.actions.viewProof")),1)]),_:1})])):p("",!0)]),_:1})]),_:1})):p("",!0)]),_:1})]),_:1},8,["modelValue"]),n(ve,{modelValue:J.value,"onUpdate:modelValue":e[20]||(e[20]=o=>J.value=o),"max-width":"560"},{default:i(()=>[n(W,null,{default:i(()=>[n(pe,{class:"d-flex align-center justify-space-between"},{default:i(()=>[t("span",null,s(Ke.value),1),n(b,{icon:"",variant:"text",onClick:K},{default:i(()=>[n(h,{icon:"tabler-x"})]),_:1})]),_:1}),n(I),f.value?(r(),A(se,{key:0},{default:i(()=>[t("div",Ga,s(Ze.value),1),n(ye,{class:"pa-3",elevation:"0",style:{border:"1px solid rgba(0, 0, 0, 0.06)","border-radius":"14px"}},{default:i(()=>[t("div",Ka,[t("div",Ya,[t("span",Za,s(u(l)("paymentsReview.confirm.invoice")),1),t("span",es,s(f.value.invoiceNumber||"—"),1)]),t("div",ts,[t("span",as,s(u(l)("paymentsReview.confirm.consultation")),1),t("span",ss,s(f.value.consultationNumber||"—"),1)]),t("div",ls,[t("span",ns,s(u(l)("paymentsReview.confirm.payer")),1),t("span",os,s(f.value.userName||"—"),1)]),t("div",is,[t("span",us,s(u(l)("paymentsReview.confirm.amount")),1),t("span",cs,s(Z(f.value.amount)),1)]),f.value.bankName?(r(),v("div",rs,[t("span",ds,s(u(l)("paymentsReview.confirm.bank")),1),t("span",ms,s(f.value.bankName),1)])):p("",!0),f.value.bankAccountName?(r(),v("div",ps,[t("span",vs,s(u(l)("paymentsReview.confirm.accountName")),1),t("span",fs,s(f.value.bankAccountName),1)])):p("",!0),f.value.bankIban?(r(),v("div",_s,[t("span",ys,s(u(l)("paymentsReview.confirm.iban")),1),t("span",hs,s(z(f.value.bankIban,30)),1)])):p("",!0),f.value.transactionReference?(r(),v("div",bs,[t("span",ws,s(u(l)("paymentsReview.confirm.reference")),1),t("span",xs,s(z(f.value.transactionReference,30)),1)])):p("",!0),t("div",gs,[t("span",ks,s(u(l)("paymentsReview.confirm.created")),1),t("span",Rs,s(f.value.createdAt||"—"),1)])]),f.value.proofImg?(r(),v("div",Vs,[n(b,{size:"small",variant:"text",onClick:e[19]||(e[19]=o=>ie(f.value.proofImg))},{default:i(()=>[n(h,{icon:"tabler-photo",class:"me-1"}),y(" "+s(u(l)("paymentsReview.actions.viewProof")),1)]),_:1})])):p("",!0)]),_:1})]),_:1})):p("",!0),n(I),n(lt,{class:"pa-4"},{default:i(()=>[n(fe),n(b,{variant:"outlined",color:"secondary",disabled:D.value,onClick:K},{default:i(()=>[y(s(u(l)("paymentsReview.actions.cancel")),1)]),_:1},8,["disabled"]),n(b,{color:Ye.value,variant:"flat",loading:D.value,onClick:Ge},{default:i(()=>[y(s(V.value==="approve"?u(l)("paymentsReview.actions.approve"):u(l)("paymentsReview.actions.reject")),1)]),_:1},8,["color","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(ve,{modelValue:Q.value,"onUpdate:modelValue":e[21]||(e[21]=o=>Q.value=o),"max-width":"900"},{default:i(()=>[n(W,null,{default:i(()=>[n(pe,{class:"d-flex align-center justify-space-between"},{default:i(()=>[t("span",null,s(u(l)("paymentsReview.proof.title")),1),n(b,{icon:"",variant:"text",onClick:Be},{default:i(()=>[n(h,{icon:"tabler-x"})]),_:1})]),_:1}),n(I),n(se,{class:"pa-4"},{default:i(()=>[X.value?(r(),v("div",js,[n(ht,{src:X.value,"max-height":"620",contain:""},null,8,["src"])])):p("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(nt,{modelValue:oe.value,"onUpdate:modelValue":e[22]||(e[22]=o=>oe.value=o),color:ge.value,location:"bottom end",timeout:"3500"},{default:i(()=>[y(s(xe.value),1)]),_:1},8,["modelValue","color"])])}}};export{gl as default};

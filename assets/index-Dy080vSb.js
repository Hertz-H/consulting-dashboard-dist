import{_ as J}from"./TablePagination-BKaUcKzz.js";import{_ as K}from"./AppSelect-gDphIo1H.js";import{_ as X}from"./AppTextField-BylwOX1I.js";import{u as Y}from"./useApi-BOhoTgCL.js";import{c as Z}from"./createUrl-Cq40zrf0.js";import{$ as U}from"./api-CTSccuME.js";import{V as ee}from"./VCard-CePL1EOL.js";import{V as te}from"./VCardText-JGefx1Q0.js";import{V as ae}from"./VSpacer-ZjgVpqaL.js";import{V as oe}from"./VDivider-2Bv_8Jov.js";import{V as se}from"./VDataTableServer-Ui-nrPGl.js";import{r as l,aW as re,w as le,O as k,c as ie,b as a,e as o,ap as n,l as r,a as R,o as h,d as p,a2 as ne,a9 as g,f as z,s as m,t as f}from"./index-BvPjFTGu.js";import{V as pe}from"./VMenu-BLpoVuPm.js";import{V as me,a as C,b as S}from"./VList-jvYjHTU1.js";import{V as L}from"./VChip-BbtL5ySO.js";import"./VPagination-JZCd98ld.js";import"./form-BiCiRZ1j.js";import"./VSelect-CUS7aVT3.js";import"./VTextField-N2SGzGBo.js";/* empty css                   */import"./VCounter-B19M3XdA.js";import"./VImg-DnWpPi9K.js";import"./VField-D-Q4NJj0.js";import"./easing-Bybner-F.js";import"./VInput-Bu8JHkCj.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-CM7nAX3a.js";import"./VOverlay-D2sQOqfD.js";import"./delay-B1dxxJfC.js";import"./lazy-DaFJvBXA.js";import"./scopeId-wKNjEvHw.js";import"./VCheckboxBtn-CEAJsFVX.js";import"./VSelectionControl-Bh0_3Wfm.js";import"./VAvatar-Ce5tSu__.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VDataTable-DDW3Fsux.js";import"./VTable-BWyJNcIt.js";import"./filter-DkCXlfy3.js";import"./ssrBoot-K_ycCVMn.js";import"./VSlideGroup-Dk8XVwmJ.js";const ue={class:"d-flex gap-2 align-center"},de={class:"d-flex align-center gap-x-4"},ce={class:"d-flex flex-column"},fe={class:"text-base"},ve={class:"text-sm"},_e={class:"text-body-1 text-high-emphasis text-capitalize"},rt={__name:"index",async setup(Ve){let v,P;const u=l(""),d=l();l();const A=l(),c=l(10),i=l(1),B=l(),$=l(),w=l([]),N=s=>{var e,y;B.value=(e=s.sortBy[0])==null?void 0:e.key,$.value=(y=s.sortBy[0])==null?void 0:y.order},T=[{title:"User",key:"user"},{title:"Phone",key:"phone"},{title:"Roles",key:"roles"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:_,execute:V}=([v,P]=re(()=>Y(Z("/v1/users",{query:{q:u,status:A,role:d||void 0}}))),v=await v,P(),v);le([d,A,u,c,i,B,$],()=>{V()});const D=k(()=>_.value.data),x=k(()=>_.value.meta.total);console.log(_),console.log(_.value.data),console.log(x.value);const I=s=>{const e=(s||"").trim();return e=="مدير النظام"?{color:"primary",icon:"tabler-crown"}:e=="عميل"?{color:"info",icon:"tabler-user"}:e=="مستشار"?{color:"success",icon:"tabler-user-check"}:{color:"secondary",icon:"tabler-user"}},O=k(()=>{const s=new Set(D.value.map(e=>e.roles).filter(Boolean));return Array.from(s).map(e=>({title:e,value:e}))}),q=s=>{const e=s.toLowerCase();return e==="pending"?"warning":e==="active"?"success":e==="inactive"?"secondary":"primary"},b=l(!1),E=async s=>{await U("/apps/users",{method:"POST",body:s}),V()},F=async s=>{await U(`/v1/users/${s}/deactivate`,{method:"Patch"}),V()},M=async s=>{await U(`/v1/users/${s}/activate`,{method:"Patch"}),V()};return(s,e)=>{const y=X,Q=K,W=R("RouterLink"),j=J,G=R("AddNewUserDrawer");return h(),ie("section",null,[a(ee,null,{default:o(()=>[a(te,{class:"d-flex flex-wrap gap-4"},{default:o(()=>[p("div",ue,[a(ae),a(y,{modelValue:r(u),"onUpdate:modelValue":e[0]||(e[0]=t=>n(u)?u.value=t:null),placeholder:"Search User",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),a(Q,{modelValue:r(d),"onUpdate:modelValue":e[1]||(e[1]=t=>n(d)?d.value=t:null),placeholder:"Select Role",items:r(O),clearable:"","clear-icon":"tabler-x",style:{"inline-size":"10rem"}},null,8,["modelValue","items"])])]),_:1}),a(oe),a(se,{"items-per-page":r(c),"onUpdate:itemsPerPage":e[3]||(e[3]=t=>n(c)?c.value=t:null),"model-value":r(w),"onUpdate:modelValue":e[4]||(e[4]=t=>n(w)?w.value=t:null),page:r(i),"onUpdate:page":e[5]||(e[5]=t=>n(i)?i.value=t:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:r(D),"items-length":r(x),headers:T,class:"text-no-wrap","onUpdate:options":N},{"item.user":o(({item:t})=>[p("div",de,[p("div",ce,[p("h6",fe,[a(W,{to:{name:"apps-user-view-id",params:{id:t.id}},class:"font-weight-medium text-link"},{default:o(()=>[m(f(t.name),1)]),_:2},1032,["to"])]),p("div",ve,f(t.email),1)])])]),"item.phone":o(({item:t})=>[p("div",_e,f(t.phone),1)]),"item.roles":o(({item:t})=>[a(L,{color:I(t.roles),size:"small",label:"",class:"text-capitalize"},{default:o(()=>[m(f(t.roles),1)]),_:2},1032,["color"])]),"item.status":o(({item:t})=>[a(L,{color:q(t.status),size:"small",label:"",class:"text-capitalize"},{default:o(()=>[m(f(t.status),1)]),_:2},1032,["color"])]),"item.actions":o(({item:t})=>[a(ne,{icon:"",variant:"text",color:"medium-emphasis"},{default:o(()=>[a(g,{icon:"tabler-dots-vertical"}),a(pe,{activator:"parent"},{default:o(()=>[a(me,null,{default:o(()=>[a(C,{to:{name:"apps-user-view-id",params:{id:t.id}}},{prepend:o(()=>[a(g,{icon:"tabler-pencil"})]),default:o(()=>[a(S,null,{default:o(()=>e[7]||(e[7]=[m("Edit")])),_:1,__:[7]})]),_:2},1032,["to"]),t.status=="active"?(h(),z(C,{key:0,onClick:H=>F(t.id)},{prepend:o(()=>[a(g,{icon:"tabler-eye"})]),default:o(()=>[a(S,null,{default:o(()=>e[8]||(e[8]=[m("Suspend")])),_:1,__:[8]})]),_:2},1032,["onClick"])):(h(),z(C,{key:1,onClick:H=>M(t.id)},{prepend:o(()=>[a(g,{icon:"tabler-eye"})]),default:o(()=>[a(S,null,{default:o(()=>e[9]||(e[9]=[m("activate")])),_:1,__:[9]})]),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:o(()=>[a(j,{page:r(i),"onUpdate:page":e[2]||(e[2]=t=>n(i)?i.value=t:null),"items-per-page":r(c),"total-items":r(x)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1}),a(G,{"is-drawer-open":r(b),"onUpdate:isDrawerOpen":e[6]||(e[6]=t=>n(b)?b.value=t:null),onUserData:E},null,8,["is-drawer-open"])])}}};export{rt as default};

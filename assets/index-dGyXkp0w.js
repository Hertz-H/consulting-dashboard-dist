import{_ as ge}from"./TablePagination-BS9zVhTb.js";import{_ as _e}from"./AppSelect-Cz12NtqF.js";import{_ as he}from"./AppTextField-6Zt2y8Qn.js";import{u as xe}from"./useApi-B07hdb0V.js";import{c as Ve}from"./createUrl-Ch6EJdVn.js";import{$ as J}from"./api-BtdnJSD2.js";import{V as W,a as Pe}from"./VToolbar-DELVTIuK.js";import{V as Y}from"./VSpacer-DoPoSCZt.js";import{al as ke,r as p,O as c,aX as Z,a as we,c as A,o as x,b as l,e as n,s as v,t as i,l as u,a2 as z,a9 as g,d as o,F as ee,h as Ce,f as j,k as te,v as ze}from"./index-DLyiUI4T.js";import{V as U}from"./VDivider-DZkdhmn8.js";import{V as Ue}from"./VSheet-0pTeeTvA.js";import{V as Te}from"./VNavigationDrawer-SPuJxpsz.js";import{V as Ie}from"./VCardText-CNPcEnqc.js";import{V as $e,a as Se}from"./VRow-BThkmVdP.js";import{V as Be}from"./VAvatar-GwUQM--D.js";import{V as ae}from"./VCard-Bp3Y2g69.js";import{V as Le}from"./VDataTableServer-oIz8JhZR.js";import{V as Ne}from"./VMenu-CnM5Ce9N.js";import{V as Ae,a as H,b as M}from"./VList-BLAOQF4q.js";import{V as E}from"./VChip-C_HpRD3G.js";import"./VPagination-CevEurIF.js";import"./VLabel-Bj0ZLaaG.js";import"./VSelect-xtg9jf9g.js";import"./VTextField-D_VDXh9N.js";/* empty css                   */import"./VCounter-DSUdNhJf.js";import"./VImg-W922IUCz.js";import"./VField-DJvLbBqg.js";import"./form-4FzIkTDC.js";import"./easing-Bybner-F.js";import"./VInput-CZKa1bvG.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-B2cZjoh4.js";import"./VOverlay-BpuXFPpY.js";import"./delay-CJQMA8o3.js";import"./lazy-D7mfu-eq.js";import"./scopeId-BqXwnYFS.js";import"./VCheckboxBtn-DpT_qdyT.js";import"./VSelectionControl-DGmCswqu.js";import"./index-CvOPxmL5.js";/* empty css              */import"./ssrBoot-Co57-A6O.js";import"./VDataTable-CZ-vN8BX.js";import"./VTable-C-5dAhBS.js";import"./filter-sNEpt0hK.js";import"./VSlideGroup-BBTw8Lc6.js";const qe={class:"text-body-2 font-weight-medium mb-1 d-block"},De={class:"text-body-2 font-weight-medium mb-1 d-block"},Fe={class:"text-body-2 font-weight-medium mb-1 d-block"},Oe={class:"text-body-2 font-weight-medium mb-1 d-block"},Re={class:"text-body-2 font-weight-medium mb-1 d-block"},je={class:"text-body-2 font-weight-medium mb-1 d-block"},He={class:"d-flex justify-space-between mt-2"},Me={class:"d-flex flex-column"},Ee={class:"text-h4"},Ke={class:"text-body-1 text-capitalize"},Qe={class:"d-flex gap-4 align-center flex-wrap"},Xe={class:"d-flex align-center gap-2"},Ge={class:"text-medium-emphasis text-body-2"},Je={class:"d-flex align-center gap-x-3"},We={class:"d-flex flex-column"},Ye={class:"text-base"},Ze={key:0,class:"text-xs text-medium-emphasis"},et={class:"text-body-1 text-capitalize"},tt={class:"text-body-1"},Gt={__name:"index",async setup(at){let V,T;const{t:s}=ke(),I=p(""),$=p(null),S=p(null),k=p(null),w=p(null),B=p(null),K=p([]),C=p(!1),b=p(10),f=p(1),q=p("id"),D=p("desc"),y=p({q:"",type:null,specialization:null,status:null,licensed:void 0,city:null}),le=c(()=>[{title:s("consultantsPage.types.individual"),value:"individual"},{title:s("consultantsPage.types.office"),value:"office"}]),se=c(()=>[{title:s("status.active"),value:1},{title:s("status.pending"),value:0},{title:s("status.inactive"),value:2}]),ne=c(()=>[{title:s("consultantsPage.license.licensed"),value:"licensed"},{title:s("consultantsPage.license.unlicensed"),value:"unlicensed"}]),F=t=>{if(t==null||t==="")return 2;if(typeof t=="number")return[0,1,2].includes(t)?t:2;const e=String(t).trim();if(e==="0"||e==="1"||e==="2")return Number(e);const d=e.toLowerCase();return d==="active"?1:d==="pending"?0:2},oe={1:"status.active",0:"status.pending",2:"status.inactive"},ie=t=>{const e=F(t);return e===0?"warning":e===1?"success":e===2?"secondary":"primary"},ue=t=>{const e=F(t);return s(oe[e]??"status.inactive")},re=t=>t==="individual"?s("consultantsPage.types.individual"):t==="office"?s("consultantsPage.types.office"):String(t||"—"),ce=t=>t==="individual"?"tabler-user":"tabler-building",de=async t=>{var m;const e=t.page,d=t.itemsPerPage,r=(m=t.sortBy)==null?void 0:m[0],_=(r==null?void 0:r.key)||"id",h=(r==null?void 0:r.order)||"desc",a=e!==f.value||d!==b.value||_!==q.value||h!==D.value;f.value=e,b.value=d,q.value=_,D.value=h,a&&await P()},me=async()=>{var t,e;y.value={q:((t=I.value)==null?void 0:t.trim())||"",type:$.value||null,specialization:S.value||null,status:k.value===null?null:Number(k.value),licensed:w.value==="licensed"?1:w.value==="unlicensed"?0:void 0,city:((e=B.value)==null?void 0:e.trim())||null},f.value=1,await P(),C.value=!1},pe=async()=>{I.value="",$.value=null,S.value=null,k.value=null,w.value=null,B.value=null,y.value={q:"",type:null,specialization:null,status:null,licensed:void 0,city:null},f.value=1,await P()},{data:O,execute:P}=([V,T]=Z(()=>xe(Ve("/v1/consultants",{query:{q:c(()=>y.value.q||void 0),type:c(()=>y.value.type||void 0),specialization:c(()=>y.value.specialization||void 0),status:c(()=>y.value.status===null?void 0:Number(y.value.status)),licensed:c(()=>y.value.licensed),city:c(()=>y.value.city||void 0),page:f,per_page:b,sortBy:q,orderBy:D}}))),V=await V,T(),V);[V,T]=Z(()=>P()),await V,T();const ve=c(()=>{var t;return(((t=O.value)==null?void 0:t.data)??[]).map(e=>{var d,r,_,h,a,m,Q,X,G;return{id:e.id,name:e.name,licenseNumber:e.license_number,type:e.consultant_type,specialization:e.specialization||"—",qualification:e.qualification||"—",city:((d=e.address)==null?void 0:d.city)||((_=(r=e.user)==null?void 0:r.address)==null?void 0:_.city)||"—",shortAddress:((h=e.address)==null?void 0:h.short_address)||((m=(a=e.user)==null?void 0:a.address)==null?void 0:m.short_address)||"",hasBank:!!(e.bank_account||(Q=e.user)!=null&&Q.bank_account),status:F((X=e.user)==null?void 0:X.status),userId:(G=e.user)==null?void 0:G.id}})}),R=c(()=>{var t,e;return((e=(t=O.value)==null?void 0:t.meta)==null?void 0:e.total)??0}),L=c(()=>{var e;const t=(e=O.value)==null?void 0:e.summary;return{total:(t==null?void 0:t.total)??0,active:(t==null?void 0:t.active)??0,pending:(t==null?void 0:t.pending)??0,inactive:(t==null?void 0:t.inactive)??0,licensed:(t==null?void 0:t.licensed)??0,unlicensed:(t==null?void 0:t.unlicensed)??0,individual:(t==null?void 0:t.individual)??0,office:(t==null?void 0:t.office)??0}}),N=c(()=>[{title:s("consultantsPage.widgets.totalConsultants"),value:L.value.total,icon:"tabler-users",color:"primary"},{title:s("status.active"),value:L.value.active,icon:"tabler-user-check",color:"success"},{title:s("status.pending"),value:L.value.pending,icon:"tabler-user-search",color:"warning"},{title:s("status.inactive"),value:L.value.inactive,icon:"tabler-user-off",color:"secondary"}]),fe=c(()=>[{title:s("consultantsPage.table.headers.consultant"),key:"name"},{title:s("consultantsPage.table.headers.license"),key:"licenseBadge",sortable:!1},{title:s("consultantsPage.table.headers.type"),key:"type"},{title:s("consultantsPage.table.headers.specialization"),key:"specialization"},{title:s("consultantsPage.table.headers.city"),key:"city"},{title:s("common.status"),key:"status",sortable:!1},{title:s("common.actions"),key:"actions",sortable:!1}]),ye=async t=>{t&&(await J(`/v1/users/${t}/deactivate`,{method:"PATCH"}),P())},be=async t=>{t&&(await J(`/v1/users/${t}/activate`,{method:"PATCH"}),P())};return(t,e)=>{const d=he,r=_e,_=we("RouterLink"),h=ge;return x(),A("section",null,[l(Te,{modelValue:C.value,"onUpdate:modelValue":e[7]||(e[7]=a=>C.value=a),location:"end",temporary:"",scrim:!1,width:"360",class:"consultants-filter-drawer",color:"background"},{default:n(()=>[l(W,{flat:""},{default:n(()=>[l(Pe,null,{default:n(()=>[v(i(u(s)("common.filters")),1)]),_:1}),l(Y),l(z,{icon:"",variant:"text",onClick:e[0]||(e[0]=a=>C.value=!1)},{default:n(()=>[l(g,{icon:"tabler-x"})]),_:1})]),_:1}),l(U),l(Ue,{class:"pa-4 d-flex flex-column gap-4 consultants-filter-sheet",elevation:"0"},{default:n(()=>[o("div",null,[o("span",qe,i(u(s)("common.search")),1),l(d,{modelValue:I.value,"onUpdate:modelValue":e[1]||(e[1]=a=>I.value=a),placeholder:u(s)("consultantsPage.filters.searchPlaceholder"),density:"compact"},null,8,["modelValue","placeholder"])]),o("div",null,[o("span",De,i(u(s)("common.status")),1),l(r,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=a=>k.value=a),items:se.value,placeholder:u(s)("consultantsPage.filters.statusPlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),o("div",null,[o("span",Fe,i(u(s)("consultantsPage.filters.typeLabel")),1),l(r,{modelValue:$.value,"onUpdate:modelValue":e[3]||(e[3]=a=>$.value=a),items:le.value,placeholder:u(s)("consultantsPage.filters.typePlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),o("div",null,[o("span",Oe,i(u(s)("consultantsPage.filters.specializationLabel")),1),l(d,{modelValue:S.value,"onUpdate:modelValue":e[4]||(e[4]=a=>S.value=a),placeholder:u(s)("consultantsPage.filters.specializationPlaceholder"),density:"compact"},null,8,["modelValue","placeholder"])]),o("div",null,[o("span",Re,i(u(s)("consultantsPage.filters.cityLabel")),1),l(d,{modelValue:B.value,"onUpdate:modelValue":e[5]||(e[5]=a=>B.value=a),placeholder:u(s)("consultantsPage.filters.cityPlaceholder"),density:"compact"},null,8,["modelValue","placeholder"])]),o("div",null,[o("span",je,i(u(s)("consultantsPage.filters.licenseLabel")),1),l(r,{modelValue:w.value,"onUpdate:modelValue":e[6]||(e[6]=a=>w.value=a),items:ne.value,placeholder:u(s)("consultantsPage.filters.licensePlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),l(U,{class:"my-2"}),o("div",He,[l(z,{variant:"outlined",color:"secondary",onClick:pe},{default:n(()=>[l(g,{icon:"tabler-refresh",class:"me-1"}),v(" "+i(u(s)("common.reset")),1)]),_:1}),l(z,{class:"consultants-filter-btn",variant:"text","prepend-icon":"tabler-filter",onClick:me},{default:n(()=>[v(i(u(s)("consultantsPage.filters.apply")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),l(ae,{class:"mb-6"},{default:n(()=>[l(Ie,{class:"px-3"},{default:n(()=>[l($e,null,{default:n(()=>[(x(!0),A(ee,null,Ce(N.value,(a,m)=>(x(),A(ee,{key:"top-"+m},[l(Se,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:n(()=>[o("div",{class:ze(["d-flex justify-space-between align-center",t.$vuetify.display.xs?m!==N.value.length-1?"border-b pb-4":"":t.$vuetify.display.sm&&m<N.value.length/2?"border-b pb-4":""])},[o("div",Me,[o("h4",Ee,i(a.value),1),o("span",Ke,i(a.title),1)]),l(Be,{color:a.color,variant:"tonal",rounded:"",size:"42"},{default:n(()=>[l(g,{icon:a.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])],2)]),_:2},1024),(t.$vuetify.display.mdAndUp?m!==N.value.length-1:t.$vuetify.display.smAndUp&&m%2===0)?(x(),j(U,{key:0,vertical:"",inset:"",length:"60"})):te("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),l(ae,{id:"consultants-list"},{default:n(()=>[l(W,{flat:"",density:"comfortable",class:"px-4"},{default:n(()=>[o("div",Qe,[o("div",Xe,[o("span",null,i(u(s)("common.show")),1),l(r,{"model-value":b.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":e[8]||(e[8]=a=>b.value=parseInt(a,10))},null,8,["model-value"])]),o("span",Ge,i(u(s)("consultantsPage.table.totalConsultantsLabel",{count:R.value})),1)]),l(Y),l(z,{class:"consultants-filter-btn",variant:"text","prepend-icon":"tabler-filter",onClick:e[9]||(e[9]=a=>C.value=!0)},{default:n(()=>[v(i(u(s)("common.filters")),1)]),_:1})]),_:1}),l(U),l(Le,{"model-value":K.value,"onUpdate:modelValue":e[11]||(e[11]=a=>K.value=a),"items-per-page":b.value,"onUpdate:itemsPerPage":e[12]||(e[12]=a=>b.value=a),page:f.value,"onUpdate:page":e[13]||(e[13]=a=>f.value=a),items:ve.value,"items-length":R.value,headers:fe.value,class:"text-no-wrap","onUpdate:options":de},{"item.name":n(({item:a})=>[o("div",Je,[l(g,{icon:ce(a.type),size:"20",class:"text-medium-emphasis"},null,8,["icon"]),o("div",We,[o("h6",Ye,[l(_,{to:{name:"pages-consultant-profile-tab",params:{tab:"profile"},query:{consultantId:a.id}},class:"font-weight-medium text-link"},{default:n(()=>[v(i(a.name),1)]),_:2},1032,["to"])]),a.shortAddress?(x(),A("div",Ze,i(a.shortAddress),1)):te("",!0)])])]),"item.licenseBadge":n(({item:a})=>[l(E,{color:a.licenseNumber?"success":"warning",size:"small",label:""},{default:n(()=>[v(i(a.licenseNumber||u(s)("consultantsPage.license.unlicensedShort")),1)]),_:2},1032,["color"])]),"item.type":n(({item:a})=>[l(E,{size:"small",label:"",class:"text-capitalize"},{default:n(()=>[v(i(re(a.type)),1)]),_:2},1024)]),"item.specialization":n(({item:a})=>[o("div",et,i(a.specialization),1)]),"item.city":n(({item:a})=>[o("div",tt,i(a.city),1)]),"item.status":n(({item:a})=>[l(E,{color:ie(a.status),size:"small",label:"",class:"text-capitalize"},{default:n(()=>[v(i(ue(a.status)),1)]),_:2},1032,["color"])]),"item.actions":n(({item:a})=>[l(z,{icon:"",variant:"text",color:"medium-emphasis"},{default:n(()=>[l(g,{icon:"tabler-dots-vertical"}),l(Ne,{activator:"parent"},{default:n(()=>[l(Ae,null,{default:n(()=>[l(H,{to:{name:"pages-consultant-profile-tab",params:{tab:"profile"},query:{consultantId:a.id}}},{prepend:n(()=>[l(g,{icon:"tabler-eye"})]),default:n(()=>[l(M,null,{default:n(()=>[v(i(u(s)("common.view")),1)]),_:1})]),_:2},1032,["to"]),l(U,{class:"my-1"}),Number(a.status)===1?(x(),j(H,{key:0,onClick:m=>ye(a.userId)},{prepend:n(()=>[l(g,{icon:"tabler-eye-off"})]),default:n(()=>[l(M,null,{default:n(()=>[v(i(u(s)("common.suspend")),1)]),_:1})]),_:2},1032,["onClick"])):(x(),j(H,{key:1,onClick:m=>be(a.userId)},{prepend:n(()=>[l(g,{icon:"tabler-eye"})]),default:n(()=>[l(M,null,{default:n(()=>[v(i(u(s)("common.activate")),1)]),_:1})]),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:n(()=>[l(h,{page:f.value,"onUpdate:page":e[10]||(e[10]=a=>f.value=a),"items-per-page":b.value,"total-items":R.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["model-value","items-per-page","page","items","items-length","headers"])]),_:1})])}}};export{Gt as default};

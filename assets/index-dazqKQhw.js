import{_ as Oe}from"./TablePagination-D7f5ul2k.js";import{_ as Ee}from"./AppDateTimePicker-DjvW9ODG.js";import{_ as qe}from"./AppSelect-DYxxggoM.js";import{_ as Ge}from"./AppTextField-jGANKBQX.js";import{u as He}from"./globalStore-BpBUMNSr.js";import{al as Qe,aL as We,O as h,r as _,w as re,aX as Xe,E as Ye,c as y,b as a,e as o,o as m,s as f,t as u,l as r,a2 as D,a9 as p,d as i,F as T,h as ae,f as x,k as w,v as ce}from"./index-Df0vDIYO.js";import{u as Je}from"./useApi-CrpjD065.js";import{c as Ze}from"./createUrl-o_joqIJK.js";import{V as et}from"./VNavigationDrawer-DGRoOqLq.js";import{V as Q,b as tt,d as lt}from"./VCard-CgfAP4z1.js";import{V as at}from"./VDialog-CsbQggch.js";import{V as de,a as ze}from"./VToolbar-Bqo_mXVK.js";import{V as se}from"./VSpacer-OQhTJPOQ.js";import{V as j}from"./VDivider-CvbwvjDI.js";import{V as st}from"./VSheet-9kb09pNt.js";import{V as oe}from"./VCardText-CB6nWipv.js";import{V as me,a as pe}from"./VRow-C48oP8rF.js";import{V as Le}from"./VAvatar-BSK7_YRS.js";import{V as ot}from"./VDataTableServer-DD0iE3iI.js";import{V as nt}from"./VMenu-C7B5GYAD.js";import{V as it,a as fe,b as be}from"./VList-D8VvcoUD.js";import{V}from"./VChip-LN2DMLlg.js";import"./VPagination-6MvuIzEc.js";import"./VField-uLTC6ZdN.js";import"./VLabel-X6aAEUPa.js";import"./form-CH_H7Z9j.js";import"./easing-Bybner-F.js";import"./VInput-DH7V_F8-.js";import"./VImg-D-iRAKzb.js";import"./VSelect-CiKewoE0.js";import"./VTextField-Bk-xicTH.js";/* empty css                   */import"./VCounter-CDNaFmaS.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-Nz-Hs-46.js";import"./VOverlay-CEc4fXoL.js";import"./delay-FQ7L2EsZ.js";import"./lazy-B5EM0j6M.js";import"./scopeId-DhzGCC8_.js";import"./VCheckboxBtn-OmBKmHEk.js";import"./VSelectionControl-_zBaxSyp.js";import"./api-BZDa_H6V.js";import"./index-CvOPxmL5.js";import"./ssrBoot-DilY_-64.js";/* empty css              */import"./VDataTable-YI0ZECWl.js";import"./VTable-DtUBh9GH.js";import"./filter-B_pzyqKE.js";import"./VSlideGroup-Dk-H89GK.js";const ut={class:"text-body-2 font-weight-medium mb-1 d-block"},rt={class:"text-body-2 font-weight-medium mb-1 d-block"},ct={class:"text-body-2 font-weight-medium mb-1 d-block"},dt={class:"text-body-2 font-weight-medium mb-1 d-block"},mt={class:"text-body-2 font-weight-medium mb-1 d-block"},pt={class:"text-body-2 font-weight-medium mb-1 d-block"},ft={class:"d-flex justify-space-between mt-2"},bt={class:"d-flex flex-column"},vt={class:"text-h4"},_t={class:"text-body-1 text-capitalize"},gt={class:"d-flex flex-column"},yt={class:"text-h4"},ht={key:0,class:"text-body-2 ms-1"},Pt={class:"text-body-1 text-capitalize"},At={class:"d-flex gap-4 align-center flex-wrap"},xt={class:"d-flex align-center gap-2"},wt={class:"text-medium-emphasis text-body-2"},kt={class:"pa-8 text-center"},Vt={class:"text-h6 mb-1"},St={class:"text-body-2 text-medium-emphasis mb-4"},Ct={class:"d-flex flex-column"},zt={class:"text-base font-weight-medium text-link"},Lt={class:"text-body-1"},Dt={class:"text-body-1"},jt={class:"text-body-1"},$t={class:"d-flex align-center gap-2"},Ut={key:0,class:"consultation-price"},Ft={class:"consultation-price__value"},Tt={key:1,class:"text-body-1"},Bt={class:"details-top mb-4"},It={class:"details-badge"},Rt={class:"text-caption text-medium-emphasis"},Nt={class:"text-h6 font-weight-bold"},Kt={class:"d-flex flex-wrap gap-2 justify-end"},Mt={class:"text-body-1 font-weight-semibold"},Ot={class:"details-rows"},Et={class:"d-flex align-center gap-2"},qt={class:"text-body-2 font-weight-medium details-row__label"},Gt={class:"details-row__value"},Ht=["href"],El={__name:"index",async setup(Qt){let W,ve;const{t:s}=Qe(),k=He(),De=We(),X=h(()=>k.currentLanguage),Y=(e,t)=>{const n=t||X.value;return e==null?"—":typeof e=="string"?e:e[n]??e.en??e.ar??"—"},je=e=>{const t=typeof e=="object"?e.en||e.ar||"":e||"";return String(t).trim().toLowerCase()},I=_(""),R=_(null),N=_(null),K=_(null),M=_(null),O=_(null),$=_(void 0),U=_(void 0),S=_(10),C=_(1),J=_(),Z=_(),_e=_([]),E=_(!1),$e=e=>{var t,n;J.value=(t=e.sortBy[0])==null?void 0:t.key,Z.value=(n=e.sortBy[0])==null?void 0:n.order,S.value=e.itemsPerPage,C.value=e.page},B=e=>e?e instanceof Date?e.toISOString().slice(0,10):String(e).slice(0,10):void 0;re(R,e=>{if(!e){$.value=void 0,U.value=void 0;return}if(Array.isArray(e)){const[t,n]=e;$.value=B(t),U.value=B(n);return}if(typeof e=="object"){$.value=B(e.start),U.value=B(e.end);return}if(typeof e=="string"){const t=e.split(" to ");$.value=B(t[0]||""),U.value=B(t[1]||"");return}$.value=void 0,U.value=void 0},{immediate:!0});const z=e=>{const t=String(e||"").toLowerCase();return t==="chat"?{icon:"tabler-message-circle",color:"info",label:s("consultationsAllPage.method.chat")}:t==="session"?{icon:"tabler-video",color:"success",label:s("consultationsAllPage.method.session")}:t==="none"?{icon:"tabler-minus",color:"secondary",label:s("consultationsAllPage.method.none")}:{icon:"tabler-circle-dashed",color:"secondary",label:s("consultationsAllPage.method.dash")}},ge=e=>{const t=String(e||"").trim().toLowerCase();return t==="collected"?"paid":t==="issue"?"rejected":t==="pending_review"?"under_review":t||"unpaid"},F=e=>{const t=ge(e);return t==="paid"?{color:"success",icon:"tabler-checks",label:s("consultationsAllPage.paymentStatus.paid")}:t==="under_review"?{color:"warning",icon:"tabler-hourglass",label:s("consultationsAllPage.paymentStatus.under_review")}:t==="rejected"?{color:"error",icon:"tabler-x",label:s("consultationsAllPage.paymentStatus.rejected")}:t==="failed"?{color:"error",icon:"tabler-alert-circle",label:s("consultationsAllPage.paymentStatus.failed")}:t==="unpaid"?{color:"primary",icon:"tabler-circle-off",label:s("consultationsAllPage.paymentStatus.unpaid")}:{color:"secondary",icon:"tabler-circle-dashed",label:s("consultationsAllPage.paymentStatus.dash")}},Ue=h(()=>[{title:s("consultationsAllPage.table.headers.consultationNumber"),key:"consultation_number"},{title:s("consultationsAllPage.table.headers.subject"),key:"subject",sortable:!1},{title:s("consultationsAllPage.table.headers.date"),key:"date",sortable:!1},{title:s("consultationsAllPage.table.headers.type"),key:"type",sortable:!1},{title:s("consultationsAllPage.table.headers.method"),key:"method",sortable:!1},{title:s("consultationsAllPage.table.headers.price"),key:"price"},{title:s("consultationsAllPage.table.headers.paymentStatus"),key:"payment_status",sortable:!1},{title:s("consultationsAllPage.table.headers.status"),key:"status",sortable:!1},{title:s("consultationsAllPage.table.headers.actions"),key:"actions",sortable:!1}]),{data:q,execute:Fe}=([W,ve]=Xe(()=>Je(Ze("/v1/all/consultations",{query:{search:I,type_id:K,status:N,method:M,payment_status:O,date_from:$,date_to:U,itemsPerPage:S,page:C,sortBy:J,orderBy:Z}}))),W=await W,ve(),W);re([I,R,N,K,M,O,S,C,J,Z],()=>Fe());const Te=h(()=>{var t;const e=X.value;return(((t=q.value)==null?void 0:t.data)||[]).map(n=>{var l,d,P,b,v,G,H;const c=je((l=n.status)==null?void 0:l.title),A=n.total_price??null,L=ge(n.payment_status??n.paymentStatus??n.invoice_status??((d=n.invoice)==null?void 0:d.status)??n.collection_status??n.collectionStatus??"unpaid");return{id:n.id,consultation_number:n.consultation_number,subject:n.subject||"—",description:n.description||"—",date:n.date,attachments_count:((P=n.attachments)==null?void 0:P.length)||0,type:Y((b=n.type)==null?void 0:b.name,e),status:Y((v=n.status)==null?void 0:v.title,e),status_id:((G=n.status)==null?void 0:G.id)||null,method:n.oppointment_method||"none",method_date:n.oppointment_date||null,method_time:n.oppointment_time||null,method_url:n.oppointment_url||null,price:A,payment_status:L,_type_id:((H=n.type)==null?void 0:H.id)||n.type_id,_statusKey:c}})}),ne=h(()=>{var e,t;return((t=(e=q.value)==null?void 0:e.meta)==null?void 0:t.total)||0}),ye=h(()=>{var t,n,c,A,L,l,d,P,b,v,G,H,Ae,xe,we,ke,Ve,Se,Ce;const e=((t=q.value)==null?void 0:t.stats)||{};return{total:e.total??((c=(n=q.value)==null?void 0:n.meta)==null?void 0:c.total)??(((L=(A=q.value)==null?void 0:A.data)==null?void 0:L.length)||0),status:{new:((l=e.status)==null?void 0:l.new)??0,under_study:((d=e.status)==null?void 0:d.under_study)??0,finished:((P=e.status)==null?void 0:P.finished)??0},methods:{chat:((b=e.methods)==null?void 0:b.chat)??0,session:((v=e.methods)==null?void 0:v.session)??0,none:((G=e.methods)==null?void 0:G.none)??0},revenue:{paid_total:((H=e.revenue)==null?void 0:H.paid_total)??0,unpaid_total:((Ae=e.revenue)==null?void 0:Ae.unpaid_total)??0,under_review_total:((xe=e.revenue)==null?void 0:xe.under_review_total)??0},payment_status:{paid:((we=e.payment_status)==null?void 0:we.paid)??0,unpaid:((ke=e.payment_status)==null?void 0:ke.unpaid)??0,under_review:((Ve=e.payment_status)==null?void 0:Ve.under_review)??0,rejected:((Se=e.payment_status)==null?void 0:Se.rejected)??0,failed:((Ce=e.payment_status)==null?void 0:Ce.failed)??0}}}),ee=h(()=>{const e=ye.value;return[{title:s("consultationsAllPage.widgets.new"),value:e.status.new,icon:"tabler-sparkles",color:"info"},{title:s("consultationsAllPage.widgets.underStudy"),value:e.status.under_study,icon:"tabler-clock-hour-4",color:"warning"},{title:s("consultationsAllPage.widgets.finished"),value:e.status.finished,icon:"tabler-checks",color:"success"},{title:s("consultationsAllPage.widgets.sessionsChats"),value:`${e.methods.session} / ${e.methods.chat}`,icon:"tabler-video",color:"primary"}]}),ie=e=>Number(e||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),te=h(()=>{const e=ye.value;return[{title:s("consultationsAllPage.widgets.totalPaid"),value:ie(e.revenue.paid_total),suffix:"SAR",icon:"tabler-currency-riyal",color:"success"},{title:s("consultationsAllPage.widgets.totalUnpaid"),value:ie(e.revenue.unpaid_total),suffix:"SAR",icon:"tabler-currency-riyal",color:"primary"},{title:s("consultationsAllPage.widgets.totalUnderReview"),value:ie(e.revenue.under_review_total),suffix:"SAR",icon:"tabler-currency-riyal",color:"warning"},{title:s("consultationsAllPage.widgets.unpaidCount"),value:e.payment_status.unpaid,icon:"tabler-circle-off",color:"primary"}]}),Be=h(()=>{const e=k.consultations_types||[],t=X.value;return e.map(n=>({title:Y(n.name,t)||"—",value:n.id}))}),Ie=h(()=>{const e=k.consultations_statuses||[],t=X.value,n=c=>{var l,d,P,b;const L=[c.slug,c.key,c.code,c.name,c.title,(l=c.title)==null?void 0:l.en,(d=c.title)==null?void 0:d.ar,(P=c.name)==null?void 0:P.en,(b=c.name)==null?void 0:b.ar].map(v=>typeof v=="object"?(v==null?void 0:v.en)||(v==null?void 0:v.ar)||"":v).filter(Boolean).join(" ");return String(L).trim().toLowerCase()};return e.filter(c=>!n(c).includes("draft")).map(c=>{var A;return{title:Y(c.title||c.name,t)||"—",value:c.id??c.slug??c.key??((A=c.name)==null?void 0:A.toLowerCase())??""}})}),Re=h(()=>[{title:s("consultationsAllPage.method.chat"),value:"chat"},{title:s("consultationsAllPage.method.session"),value:"session"},{title:s("consultationsAllPage.method.none"),value:"none"}]),Ne=h(()=>[{title:s("consultationsAllPage.paymentStatus.paid"),value:"paid"},{title:s("consultationsAllPage.paymentStatus.unpaid"),value:"unpaid"},{title:s("consultationsAllPage.paymentStatus.under_review"),value:"under_review"},{title:s("consultationsAllPage.paymentStatus.rejected"),value:"rejected"},{title:s("consultationsAllPage.paymentStatus.failed"),value:"failed"}]),he=()=>{I.value="",K.value=null,N.value=null,M.value=null,O.value=null,R.value=null,$.value=void 0,U.value=void 0,C.value=1,J.value=void 0,Z.value=void 0};Ye(async()=>{var e,t,n;(!((e=k.activities)!=null&&e.length)||!((t=k.consultations_types)!=null&&t.length)||!((n=k.consultations_statuses)!=null&&n.length))&&await k.fetchFeedData()}),re(()=>k.currentLanguage,()=>{k.fetchFeedData()});const ue=e=>{const t=String(e||"").toLowerCase();return t==="pending"||t==="under study"?"warning":t==="closed"||t==="finished"?"success":t==="new"?"info":t==="archived"?"secondary":t==="draft"?"info":"primary"},le=_(!1),g=_(null),Ke=e=>{g.value=e||null,le.value=!0},Pe=()=>{le.value=!1,g.value=null},Me=h(()=>{const e=g.value||{},t=z(e.method),n=F(e.payment_status);return[{title:s("consultationsAllPage.detailsPopup.sections.basic"),icon:"tabler-info-circle",rows:[{label:s("consultationsAllPage.detailsPopup.labels.number"),value:e.consultation_number??"—",icon:"tabler-hash"},{label:s("consultationsAllPage.detailsPopup.labels.subject"),value:e.subject??"—",icon:"tabler-notes"},{label:s("consultationsAllPage.detailsPopup.labels.date"),value:e.date??"—",icon:"tabler-calendar"},{label:s("consultationsAllPage.detailsPopup.labels.type"),value:e.type??"—",icon:"tabler-category"}]},{title:s("consultationsAllPage.detailsPopup.sections.payment"),icon:"tabler-credit-card",rows:[{label:s("consultationsAllPage.detailsPopup.labels.price"),value:e.price!==null&&e.price!==void 0&&e.price!==""?`${Number(e.price).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})} SAR`:"—",icon:"tabler-currency-riyal"},{label:s("consultationsAllPage.detailsPopup.labels.paymentStatus"),value:n.label,icon:n.icon,chip:{color:n.color}}]},{title:s("consultationsAllPage.detailsPopup.sections.method"),icon:"tabler-video",rows:[{label:s("consultationsAllPage.detailsPopup.labels.method"),value:t.label,icon:t.icon,chip:{color:t.color}},{label:s("consultationsAllPage.detailsPopup.labels.methodDate"),value:e.method_date??"—",icon:"tabler-calendar"},{label:s("consultationsAllPage.detailsPopup.labels.methodTime"),value:e.method_time??"—",icon:"tabler-clock"},{label:s("consultationsAllPage.detailsPopup.labels.methodUrl"),value:e.method_url??"—",icon:"tabler-link",link:e.method_url||null}]},{title:s("consultationsAllPage.detailsPopup.sections.more"),icon:"tabler-list-details",rows:[{label:s("consultationsAllPage.detailsPopup.labels.status"),value:e.status??"—",icon:"tabler-circle-dot",chip:{color:ue(e._statusKey)}},{label:s("consultationsAllPage.detailsPopup.labels.attachments"),value:String(e.attachments_count??0),icon:"tabler-paperclip"},{label:s("consultationsAllPage.detailsPopup.labels.description"),value:e.description??"—",icon:"tabler-align-left",multiline:!0}]}]});return(e,t)=>{const n=Ge,c=qe,A=Ee,L=Oe;return m(),y("section",null,[a(et,{modelValue:E.value,"onUpdate:modelValue":t[8]||(t[8]=l=>E.value=l),location:"end",temporary:"",scrim:!1,width:"360",class:"consultation-filter-drawer",color:"background"},{default:o(()=>[a(de,{flat:""},{default:o(()=>[a(ze,null,{default:o(()=>[f(u(r(s)("consultationsAllPage.filters.title")),1)]),_:1}),a(se),a(D,{icon:"",variant:"text",onClick:t[0]||(t[0]=l=>E.value=!1)},{default:o(()=>[a(p,{icon:"tabler-x"})]),_:1})]),_:1}),a(j),a(st,{class:"pa-4 d-flex flex-column gap-4 consultation-filter-sheet",elevation:"0"},{default:o(()=>[i("div",null,[i("span",ut,u(r(s)("consultationsAllPage.filters.searchLabel")),1),a(n,{modelValue:I.value,"onUpdate:modelValue":t[1]||(t[1]=l=>I.value=l),placeholder:r(s)("consultationsAllPage.filters.searchPlaceholder"),density:"compact"},null,8,["modelValue","placeholder"])]),i("div",null,[i("span",rt,u(r(s)("consultationsAllPage.filters.typeLabel")),1),a(c,{modelValue:K.value,"onUpdate:modelValue":t[2]||(t[2]=l=>K.value=l),items:Be.value,placeholder:r(s)("consultationsAllPage.filters.typePlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),i("div",null,[i("span",ct,u(r(s)("consultationsAllPage.filters.statusLabel")),1),a(c,{modelValue:N.value,"onUpdate:modelValue":t[3]||(t[3]=l=>N.value=l),items:Ie.value,placeholder:r(s)("consultationsAllPage.filters.statusPlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),i("div",null,[i("span",dt,u(r(s)("consultationsAllPage.filters.paymentStatusLabel")),1),a(c,{modelValue:O.value,"onUpdate:modelValue":t[4]||(t[4]=l=>O.value=l),items:Ne.value,placeholder:r(s)("consultationsAllPage.filters.paymentStatusPlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),i("div",null,[i("span",mt,u(r(s)("consultationsAllPage.filters.methodLabel")),1),a(c,{modelValue:M.value,"onUpdate:modelValue":t[5]||(t[5]=l=>M.value=l),items:Re.value,placeholder:r(s)("consultationsAllPage.filters.methodPlaceholder"),clearable:"","clear-icon":"tabler-x",density:"compact"},null,8,["modelValue","items","placeholder"])]),i("div",null,[i("span",pt,u(r(s)("consultationsAllPage.filters.dateRangeLabel")),1),a(A,{modelValue:R.value,"onUpdate:modelValue":t[6]||(t[6]=l=>R.value=l),config:{mode:"range",dateFormat:"Y-m-d"},density:"compact",class:"mt-1",placeholder:r(s)("consultationsAllPage.filters.dateRangePlaceholder")},null,8,["modelValue","placeholder"])]),a(j,{class:"my-2"}),i("div",ft,[a(D,{variant:"outlined",color:"secondary",onClick:he},{default:o(()=>[a(p,{icon:"tabler-refresh",class:"me-1"}),f(" "+u(r(s)("consultationsAllPage.filters.reset")),1)]),_:1}),a(D,{class:"consultation-filter-btn",variant:"text","prepend-icon":"tabler-filter",onClick:t[7]||(t[7]=l=>E.value=!1)},{default:o(()=>[f(u(r(s)("consultationsAllPage.filters.applyAndClose")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),a(Q,{class:"mb-6"},{default:o(()=>[a(oe,{class:"px-3"},{default:o(()=>[a(me,null,{default:o(()=>[(m(!0),y(T,null,ae(ee.value,(l,d)=>(m(),y(T,{key:d},[a(pe,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:o(()=>[i("div",{class:ce(["d-flex justify-space-between align-center",e.$vuetify.display.xs?d!==ee.value.length-1?"border-b pb-4":"":e.$vuetify.display.sm&&d<ee.value.length/2?"border-b pb-4":""])},[i("div",bt,[i("h4",vt,u(l.value),1),i("span",_t,u(l.title),1)]),a(Le,{color:l.color,variant:"tonal",rounded:"",size:"42"},{default:o(()=>[a(p,{icon:l.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])],2)]),_:2},1024),(e.$vuetify.display.mdAndUp?d!==ee.value.length-1:e.$vuetify.display.smAndUp&&d%2===0)?(m(),x(j,{key:0,vertical:"",inset:"",length:"60"})):w("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),a(Q,{class:"mb-6"},{default:o(()=>[a(oe,{class:"px-3"},{default:o(()=>[a(me,null,{default:o(()=>[(m(!0),y(T,null,ae(te.value,(l,d)=>(m(),y(T,{key:`tot-${d}`},[a(pe,{cols:"12",sm:"6",md:"3",class:"px-6"},{default:o(()=>[i("div",{class:ce(["d-flex justify-space-between align-center",e.$vuetify.display.xs?d!==te.value.length-1?"border-b pb-4":"":e.$vuetify.display.sm&&d<te.value.length/2?"border-b pb-4":""])},[i("div",gt,[i("h4",yt,[f(u(l.value)+" ",1),l.suffix?(m(),y("span",ht,u(l.suffix),1)):w("",!0)]),i("span",Pt,u(l.title),1)]),a(Le,{color:l.color,variant:"tonal",rounded:"",size:"42"},{default:o(()=>[a(p,{icon:l.icon,size:"26"},null,8,["icon"])]),_:2},1032,["color"])],2)]),_:2},1024),(e.$vuetify.display.mdAndUp?d!==te.value.length-1:e.$vuetify.display.smAndUp&&d%2===0)?(m(),x(j,{key:0,vertical:"",inset:"",length:"60"})):w("",!0)],64))),128))]),_:1})]),_:1})]),_:1}),a(Q,{id:"consultation-list"},{default:o(()=>[a(de,{flat:"",density:"comfortable",class:"px-4"},{default:o(()=>[i("div",At,[i("div",xt,[i("span",null,u(r(s)("consultationsAllPage.table.show")),1),a(c,{"model-value":S.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[9]||(t[9]=l=>S.value=parseInt(l,10))},null,8,["model-value"])]),i("span",wt,u(r(s)("consultationsAllPage.table.totalLabel",{count:ne.value})),1)]),a(se),a(D,{class:"consultation-filter-btn",variant:"text","prepend-icon":"tabler-filter",onClick:t[10]||(t[10]=l=>E.value=!0)},{default:o(()=>[f(u(r(s)("consultationsAllPage.filters.title")),1)]),_:1})]),_:1}),a(j),a(ot,{"items-per-page":S.value,"onUpdate:itemsPerPage":t[12]||(t[12]=l=>S.value=l),"model-value":_e.value,"onUpdate:modelValue":t[13]||(t[13]=l=>_e.value=l),page:C.value,"onUpdate:page":t[14]||(t[14]=l=>C.value=l),items:Te.value,"items-length":ne.value,headers:Ue.value,class:"text-no-wrap","onUpdate:options":$e},{"no-data":o(()=>[i("div",kt,[a(p,{icon:"tabler-clipboard-list",size:"40",class:"mb-2"}),i("div",Vt,u(r(s)("consultationsAllPage.table.noDataTitle")),1),i("div",St,u(r(s)("consultationsAllPage.table.noDataHint")),1),a(D,{variant:"outlined",color:"secondary",onClick:he},{default:o(()=>[a(p,{icon:"tabler-refresh",class:"me-1"}),f(" "+u(r(s)("consultationsAllPage.filters.resetFilters")),1)]),_:1})])]),"item.consultation_number":o(({item:l})=>[i("div",Ct,[i("h6",zt,u(l.consultation_number),1)])]),"item.subject":o(({item:l})=>[i("div",Lt,u(l.subject),1)]),"item.date":o(({item:l})=>[i("div",Dt,u(l.date),1)]),"item.type":o(({item:l})=>[i("div",jt,u(l.type),1)]),"item.method":o(({item:l})=>[i("div",$t,[a(V,{color:z(l.method).label===r(s)("consultationsAllPage.method.dash")?"secondary":z(l.method).color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>[a(p,{icon:z(l.method).icon,class:"me-1"},null,8,["icon"]),f(" "+u(z(l.method).label),1)]),_:2},1032,["color"]),l.method&&l.method!=="none"?(m(),y(T,{key:0},[l.method_date?(m(),x(V,{key:0,size:"x-small",variant:"tonal",color:"primary"},{default:o(()=>[a(p,{icon:"tabler-calendar",class:"me-1"}),f(" "+u(l.method_date),1)]),_:2},1024)):w("",!0),l.method_time?(m(),x(V,{key:1,size:"x-small",variant:"tonal",color:"primary"},{default:o(()=>[a(p,{icon:"tabler-clock",class:"me-1"}),f(" "+u(l.method_time),1)]),_:2},1024)):w("",!0)],64)):w("",!0)])]),"item.price":o(({item:l})=>[l.price!==null&&l.price!==void 0&&l.price!==""?(m(),y("div",Ut,[i("span",Ft,u(Number(l.price).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})),1),t[16]||(t[16]=i("span",{class:"consultation-price__currency"},"SAR",-1))])):(m(),y("div",Tt,"—"))]),"item.payment_status":o(({item:l})=>[a(V,{color:F(l.payment_status).color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>[a(p,{icon:F(l.payment_status).icon,class:"me-1"},null,8,["icon"]),f(" "+u(F(l.payment_status).label),1)]),_:2},1032,["color"])]),"item.status":o(({item:l})=>[a(V,{color:ue(l._statusKey),size:"small",label:"",class:"text-capitalize"},{default:o(()=>[f(u(l.status),1)]),_:2},1032,["color"])]),"item.actions":o(({item:l})=>[a(D,{icon:"",variant:"text",color:"medium-emphasis"},{default:o(()=>[a(p,{icon:"tabler-dots-vertical"}),a(nt,{activator:"parent"},{default:o(()=>[a(it,null,{default:o(()=>[a(fe,{to:{name:"apps-consultations-show-id",params:{id:l.id}}},{prepend:o(()=>[a(p,{icon:"tabler-eye"})]),default:o(()=>[a(be,null,{default:o(()=>[f(u(r(s)("consultationsAllPage.table.actions.view")),1)]),_:1})]),_:2},1032,["to"]),a(fe,{onClick:d=>Ke(l)},{prepend:o(()=>[a(p,{icon:"tabler-eye-filled"})]),default:o(()=>[a(be,null,{default:o(()=>[f(u(r(s)("consultationsAllPage.detailsPopup.action")),1)]),_:1})]),_:2},1032,["onClick"]),r(De).can("update","consultation")&&l.status_id==1?(m(),x(fe,{key:0,to:{name:"apps-consultations-edit-id",params:{id:l.id}}},{prepend:o(()=>[a(p,{icon:"tabler-pencil"})]),default:o(()=>[a(be,null,{default:o(()=>[f(u(r(s)("consultationsAllPage.table.actions.edit")),1)]),_:1})]),_:2},1032,["to"])):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:o(()=>[a(L,{page:C.value,"onUpdate:page":t[11]||(t[11]=l=>C.value=l),"items-per-page":S.value,"total-items":ne.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length","headers"])]),_:1}),a(at,{modelValue:le.value,"onUpdate:modelValue":t[15]||(t[15]=l=>le.value=l),width:"880",scrollable:""},{default:o(()=>[a(Q,{class:"details-card"},{default:o(()=>[a(de,{flat:"",class:"px-4"},{default:o(()=>[a(p,{icon:"tabler-eye",class:"me-2"}),a(ze,{class:"text-subtitle-1 font-weight-semibold"},{default:o(()=>[f(u(r(s)("consultationsAllPage.detailsPopup.title")),1)]),_:1}),a(se),a(D,{icon:"",variant:"text",onClick:Pe},{default:o(()=>[a(p,{icon:"tabler-x"})]),_:1})]),_:1}),a(j),a(oe,{class:"pa-4"},{default:o(()=>{var l;return[i("div",Bt,[i("div",It,[i("div",Rt,u(r(s)("consultationsAllPage.detailsPopup.labels.number")),1),i("div",Nt,u(((l=g.value)==null?void 0:l.consultation_number)||"—"),1)]),i("div",Kt,[g.value?(m(),x(V,{key:0,color:F(g.value.payment_status).color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>[a(p,{icon:F(g.value.payment_status).icon,class:"me-1"},null,8,["icon"]),f(" "+u(F(g.value.payment_status).label),1)]),_:1},8,["color"])):w("",!0),g.value?(m(),x(V,{key:1,color:ue(g.value._statusKey),size:"small",label:"",class:"text-capitalize"},{default:o(()=>[f(u(g.value.status),1)]),_:1},8,["color"])):w("",!0),g.value?(m(),x(V,{key:2,color:z(g.value.method).color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>[a(p,{icon:z(g.value.method).icon,class:"me-1"},null,8,["icon"]),f(" "+u(z(g.value.method).label),1)]),_:1},8,["color"])):w("",!0)])]),a(me,null,{default:o(()=>[(m(!0),y(T,null,ae(Me.value,(d,P)=>(m(),x(pe,{key:`sec-${P}`,cols:"12",md:"6"},{default:o(()=>[a(Q,{variant:"outlined",class:"details-section"},{default:o(()=>[a(tt,{class:"d-flex align-center gap-2 py-3 px-4"},{default:o(()=>[a(p,{icon:d.icon},null,8,["icon"]),i("span",Mt,u(d.title),1)]),_:2},1024),a(j),a(oe,{class:"px-4 py-3"},{default:o(()=>[i("div",Ot,[(m(!0),y(T,null,ae(d.rows,(b,v)=>(m(),y("div",{key:`r-${P}-${v}`,class:"details-row"},[i("div",Et,[a(p,{icon:b.icon,size:"18",class:"details-row__icon"},null,8,["icon"]),i("div",qt,u(b.label),1)]),i("div",Gt,[b.chip?(m(),x(V,{key:0,color:b.chip.color,size:"small",label:"",class:"text-capitalize"},{default:o(()=>[f(u(b.value),1)]),_:2},1032,["color"])):b.link?(m(),y("a",{key:1,href:b.link,target:"_blank",class:"details-link"},[a(p,{icon:"tabler-external-link",size:"16",class:"me-1"}),f(" "+u(r(s)("consultationsAllPage.detailsPopup.openLink")),1)],8,Ht)):(m(),y("div",{key:2,class:ce(b.multiline?"details-multiline":"")},u(b.value),3))])]))),128))])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]}),_:1}),a(j),a(lt,{class:"px-4 py-3"},{default:o(()=>[a(se),a(D,{variant:"outlined",color:"secondary",onClick:Pe},{default:o(()=>[a(p,{icon:"tabler-x",class:"me-1"}),f(" "+u(r(s)("consultationsAllPage.detailsPopup.close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{El as default};

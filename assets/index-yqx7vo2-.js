import{_ as A}from"./AppTextField-COk9xKX0.js";import{bd as P,r as V,bc as D,E as M,f as _,e as o,o as s,b as t,s as j,t as $,aF as H,d,a9 as c,c as p,k as f,a2 as O}from"./index-D_BsgN_d.js";import{a as K}from"./images-DNnnEzYI.js";import{$ as w}from"./api-CqwGmpgL.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as v,a as i}from"./VRow-dG5tZQ8o.js";import{V as q}from"./VCard-DA3WH8Yk.js";import{V as B}from"./VCardText-BreTWY-m.js";import{V as z}from"./VSnackbar-CJEsp-dM.js";import{V as G}from"./VForm-CRRIjVuM.js";import{V as R}from"./VSheet-Chqu0LdH.js";import{V as J}from"./VLabel-BirfzyCz.js";import{V as x}from"./VFileInput-Luwm0nUA.js";import"./VTextField-BRzklgAv.js";/* empty css                   */import"./VCounter-rHo2n1dF.js";import"./VImg-ht9GXiJm.js";import"./VField-DMdiEKws.js";import"./form-BPS662GX.js";import"./easing-Bybner-F.js";import"./VInput-C1dHExZP.js";import"./forwardRefs-C-GTDzx5.js";import"./index-CvOPxmL5.js";/* empty css              */import"./VAvatar-DiDwKfKQ.js";import"./VOverlay-_8fyux18.js";import"./delay-BE6crMdg.js";import"./lazy-Yg9_h87Z.js";import"./scopeId-D0MMzVks.js";import"./VChip-BTQY4HnE.js";import"./VSlideGroup-CQSza4gX.js";const Q={class:"d-flex align-center gap-2"},X={class:"text-body-2"},Y={key:0},Z=["href"],ee={key:1},te=["href"],le={key:2},oe=["href"],ae={key:3},ne=["href"],re={key:4},ie=["href"],se={key:5,class:"text-caption"},ue={class:"d-flex align-center gap-2"},de="/v1/offices",ce="POST",me={__name:"index",setup(_e){const F=P(),I=F.user.office.id;console.log(F.user.office.id,"office in the store"),console.log(F.user,"user in the store");const N=I?`/v1/offices/${I}`:null,b=V(!1),k=V(""),y=V("deep-purple-accent-4"),S=V(!1),m=V(0),l=D({commercial_registration_number:"",establishment_number:"",unified_number:"",tax_number:"",insurance_number:"",logo:null,letterhead:null,unified_doc:null,establishment_doc:null,registeration_doc:null}),a=D({logo_url:null,letterhead_url:null,unified_doc_url:null,establishment_doc_url:null,registeration_doc_url:null});function E(n){const e=(n==null?void 0:n.data)??n??{};l.commercial_registration_number=e.commercial_registration_number??"",l.establishment_number=e.establishment_number??"",l.unified_number=e.unified_number??"",l.tax_number=e.tax_number??"",l.insurance_number=e.insurance_number??"",a.logo_url=e.logo_url??e.logo??null,a.letterhead_url=e.letterhead_url??e.letterhead??null,a.unified_doc_url=e.unified_doc_url??e.unified_doc??null,a.establishment_doc_url=e.establishment_doc_url??e.establishment_doc??null,a.registeration_doc_url=e.registeration_doc_url??e.registeration_doc??null,l.logo=l.letterhead=l.unified_doc=l.establishment_doc=l.registeration_doc=null,m.value++}async function U(){if(N)try{const n=await w(N);E(n)}catch{}}M(U);async function g(n){var r,C,h;const e=(r=n==null?void 0:n.target)==null?void 0:r.name,u=((h=(C=n==null?void 0:n.target)==null?void 0:C.files)==null?void 0:h[0])||null;e&&(l[e]=u?await K(u):null)}function T(){return{commercial_registration_number:l.commercial_registration_number||null,establishment_number:l.establishment_number||null,unified_number:l.unified_number||null,tax_number:l.tax_number||null,insurance_number:l.insurance_number||null,logo:l.logo,letterhead:l.letterhead,unified_doc:l.unified_doc,establishment_doc:l.establishment_doc,registeration_doc:l.registeration_doc}}async function L(){S.value=!0;try{const n=T(),e=await w(de,{method:ce,body:n,onResponseError({response:u}){var h;const r=((h=u._data)==null?void 0:h.errors)||{},C=Object.values(r).flat().filter(Boolean).join(`
`);k.value=C||"Failed to save office info.",y.value="error",b.value=!0}});E(e),k.value="Office info saved successfully!",y.value="success",b.value=!0}catch{k.value="Failed to save office info.",y.value="error",b.value=!0}finally{S.value=!1}}return(n,e)=>{const u=A;return s(),_(v,null,{default:o(()=>[t(i,{cols:"12"},{default:o(()=>[t(q,null,{default:o(()=>[t(B,{class:"d-flex"},{default:o(()=>[t(z,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=r=>b.value=r),timeout:2200,color:y.value,class:"elevation-24",location:"top right"},{default:o(()=>[j($(k.value),1)]),_:1},8,["modelValue","color"])]),_:1}),t(B,{class:"pt-0"},{default:o(()=>[t(G,{class:"mt-0",onSubmit:H(L,["prevent"])},{default:o(()=>[t(i,{cols:"12",class:"mt-0"},{default:o(()=>[t(R,{variant:"flat",class:"section-bar bg-grey-lighten-3"},{default:o(()=>[d("div",Q,[t(c,{icon:"tabler-building"}),e[6]||(e[6]=d("span",{class:"text-subtitle-1 section-title"},"Office Information",-1))])]),_:1})]),_:1}),t(v,null,{default:o(()=>[t(i,{md:"4",cols:"12"},{default:o(()=>[t(u,{modelValue:l.commercial_registration_number,"onUpdate:modelValue":e[1]||(e[1]=r=>l.commercial_registration_number=r),label:"Commercial Registration No. (optional)","prepend-inner-icon":"tabler-building"},null,8,["modelValue"])]),_:1}),t(i,{md:"4",cols:"12"},{default:o(()=>[t(u,{modelValue:l.establishment_number,"onUpdate:modelValue":e[2]||(e[2]=r=>l.establishment_number=r),label:"Establishment No. (optional)","prepend-inner-icon":"tabler-id"},null,8,["modelValue"])]),_:1}),t(i,{md:"4",cols:"12"},{default:o(()=>[t(u,{modelValue:l.unified_number,"onUpdate:modelValue":e[3]||(e[3]=r=>l.unified_number=r),label:"Unified No. (optional)","prepend-inner-icon":"tabler-hash"},null,8,["modelValue"])]),_:1}),t(i,{md:"4",cols:"12"},{default:o(()=>[t(u,{modelValue:l.tax_number,"onUpdate:modelValue":e[4]||(e[4]=r=>l.tax_number=r),label:"Tax No. (optional)","prepend-inner-icon":"tabler-receipt-tax"},null,8,["modelValue"])]),_:1}),t(i,{md:"4",cols:"12"},{default:o(()=>[t(u,{modelValue:l.insurance_number,"onUpdate:modelValue":e[5]||(e[5]=r=>l.insurance_number=r),label:"Insurance No. (optional)","prepend-inner-icon":"tabler-shield-lock"},null,8,["modelValue"])]),_:1})]),_:1}),t(v,{class:"mt-2"},{default:o(()=>[t(i,{cols:"12",md:"8"},{default:o(()=>[t(J,{class:"text-subtitle-1 mb-1"},{default:o(()=>e[7]||(e[7]=[j("Existing Files")])),_:1,__:[7]}),d("div",X,[a.logo_url?(s(),p("div",Y,[t(c,{icon:"tabler-paperclip",class:"me-1"}),d("a",{href:a.logo_url,target:"_blank"},"Current Logo",8,Z)])):f("",!0),a.letterhead_url?(s(),p("div",ee,[t(c,{icon:"tabler-paperclip",class:"me-1"}),d("a",{href:a.letterhead_url,target:"_blank"},"Current Letterhead",8,te)])):f("",!0),a.unified_doc_url?(s(),p("div",le,[t(c,{icon:"tabler-paperclip",class:"me-1"}),d("a",{href:a.unified_doc_url,target:"_blank"},"Current Unified Doc",8,oe)])):f("",!0),a.establishment_doc_url?(s(),p("div",ae,[t(c,{icon:"tabler-paperclip",class:"me-1"}),d("a",{href:a.establishment_doc_url,target:"_blank"},"Current Establishment Doc",8,ne)])):f("",!0),a.registeration_doc_url?(s(),p("div",re,[t(c,{icon:"tabler-paperclip",class:"me-1"}),d("a",{href:a.registeration_doc_url,target:"_blank"},"Current Registration Doc",8,ie)])):f("",!0),!a.logo_url&&!a.letterhead_url&&!a.unified_doc_url&&!a.establishment_doc_url&&!a.registeration_doc_url?(s(),p("div",se," No files on record. ")):f("",!0)])]),_:1})]),_:1}),t(v,null,{default:o(()=>[t(i,{cols:"12",class:"mt-2"},{default:o(()=>[t(R,{variant:"flat",class:"section-bar bg-grey-lighten-3"},{default:o(()=>[d("div",ue,[t(c,{icon:"tabler-paperclip"}),e[8]||(e[8]=d("span",{class:"text-subtitle-1 section-title"},"Upload Files ",-1))])]),_:1})]),_:1}),t(i,{md:"4",cols:"12"},{default:o(()=>[(s(),_(x,{key:m.value+"-logo",name:"logo",label:"Logo (optional)","prepend-icon":"tabler-paperclip",accept:".jpg,.jpeg,.png,.gif,.webp",onChange:g}))]),_:1}),t(i,{md:"4",cols:"12"},{default:o(()=>[(s(),_(x,{key:m.value+"-letterhead",name:"letterhead",label:"Letterhead (optional)","prepend-icon":"tabler-paperclip",accept:".pdf,.jpg,.jpeg,.png",onChange:g}))]),_:1}),t(i,{md:"4",cols:"12"},{default:o(()=>[(s(),_(x,{key:m.value+"-unified_doc",name:"unified_doc",label:"Unified Number Doc (optional)","prepend-icon":"tabler-paperclip",accept:".pdf,.jpg,.jpeg,.png",onChange:g}))]),_:1}),t(i,{md:"4",cols:"12"},{default:o(()=>[(s(),_(x,{key:m.value+"-establishment_doc",name:"establishment_doc",label:"Establishment Doc (optional)","prepend-icon":"tabler-paperclip",accept:".pdf,.jpg,.jpeg,.png",onChange:g}))]),_:1}),t(i,{md:"4",cols:"12"},{default:o(()=>[(s(),_(x,{key:m.value+"-registeration_doc",name:"registeration_doc",label:"Registration Doc (optional)","prepend-icon":"tabler-paperclip",accept:".pdf,.jpg,.jpeg,.png",onChange:g}))]),_:1})]),_:1}),t(v,null,{default:o(()=>[t(i,{cols:"12",class:"d-flex flex-wrap gap-4 mt-4"},{default:o(()=>[t(O,{type:"submit",loading:S.value,color:"primary"},{default:o(()=>[t(c,{icon:"tabler-device-floppy",class:"me-2"}),e[9]||(e[9]=j(" Save Office Info "))]),_:1,__:[9]},8,["loading"]),t(O,{color:"secondary",variant:"tonal",onClick:U},{default:o(()=>[t(c,{icon:"tabler-refresh",class:"me-2"}),e[10]||(e[10]=j(" Reload "))]),_:1,__:[10]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},We=W(me,[["__scopeId","data-v-72dcb606"]]);export{We as default};

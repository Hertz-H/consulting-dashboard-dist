import{_ as U}from"./AppTextField-B_Hg2V0D.js";import{al as R,i as z,u as A,r as m,O as D,c as S,o as T,b as a,e as s,d as t,l as i,k as E,s as f,a9 as b,t as u,aF as M,a2 as j,au as q}from"./index-C7qtdPxF.js";import{u as O}from"./authStore-C6H5sLnu.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as B,a as p}from"./VRow-B7mc-M76.js";import{V as P}from"./VCard-CvoYH-tB.js";import{V as G}from"./VCardText--YnIOn_v.js";import{V as H}from"./VForm-BtIWxjHn.js";import{V as J}from"./VCheckbox-B3LmINkY.js";import{V as K}from"./VContainer-BaHIFDT3.js";import{V as L}from"./VSnackbar-B-K0RDQC.js";import"./VLabel-BL0IdVQU.js";import"./VTextField-BsIs5QE9.js";/* empty css                   */import"./VCounter-Cj1o1Vys.js";import"./VImg-CqiRrtog.js";import"./VField-BqJwITnM.js";import"./form-ZFmfzYYs.js";import"./easing-Bybner-F.js";import"./VInput-CbX7aBHh.js";import"./forwardRefs-C-GTDzx5.js";import"./useApi-Dcbdi9nb.js";/* empty css              */import"./VAvatar-G0k920wU.js";import"./VCheckboxBtn-DtO76zpK.js";import"./VSelectionControl-B5WYu4tx.js";import"./VOverlay-CWnbyjJr.js";import"./delay-DqFvUsxw.js";import"./lazy-CS65LDuN.js";import"./scopeId-CskrSFPb.js";const Q="/assets/sc-D-nvcS_v.png",W={class:"admin-login-page",dir:"rtl"},X={class:"hero-visual"},Y={class:"hero-image"},Z={class:"img-container"},ee=["alt"],te={class:"float-card float-top float-top--mini"},ae={class:"mini-head"},le={class:"mini-badge"},oe={class:"mini-state"},se={key:0,class:"mini-desc"},ie={class:"float-card float-bottom"},re={class:"d-flex align-center justify-space-between"},ne={class:"float-muted"},ue={class:"float-big"},de={class:"float-icon"},me={class:"secure-hint"},ce={class:"hero-copy"},pe={class:"hero-title"},fe={class:"hero-subtitle"},ve={__name:"login",setup(_e){const{t:o}=R(),y=z(),w=A(),F=O(),g=m(!1),v=m(!1),h=m(!1),x=m(""),k=m("success"),V=(d,e="success")=>{x.value=d,k.value=e,h.value=!0},r=m({email:"",password:"",remember:!0}),I=D(()=>{var d,e;return!!((d=r.value.email)!=null&&d.trim())&&!!((e=r.value.password)!=null&&e.trim())}),c=m(""),N=async()=>{var d,e;if(!I.value){V(o("auth.login.validation_required"),"error");return}g.value=!0,c.value="";try{const{isVerified:n,message:l}=await F.login({email:r.value.email,password:r.value.password,remember:r.value.remember});if(l&&(c.value=l),n===!1){V(c.value||o("auth.login.verify_required"),"warning"),await q(()=>y.replace({name:"verify"}));return}const _=w.query.to?String(w.query.to):"/";await q(()=>y.replace(_))}catch(n){const l=(d=n==null?void 0:n.response)==null?void 0:d.data;let _=(l==null?void 0:l.message)||(n==null?void 0:n.message)||c.value||o("auth.login.invalid");const C=l!=null&&l.errors?(e=Object.values(l.errors).flat())==null?void 0:e[0]:null;C&&(_=C),V(_,"error")}finally{g.value=!1}};return(d,e)=>{const n=U;return T(),S("section",W,[a(K,{class:"content",fluid:""},{default:s(()=>[a(B,{class:"align-center",style:{"min-height":"100vh"}},{default:s(()=>[a(p,{cols:"12",md:"6",class:"d-flex justify-center"},{default:s(()=>[t("div",X,[t("div",Y,[e[7]||(e[7]=t("div",{class:"shimmer"},null,-1)),e[8]||(e[8]=t("div",{class:"visual-bg"},null,-1)),e[9]||(e[9]=t("span",{class:"orb orb-1"},null,-1)),e[10]||(e[10]=t("span",{class:"orb orb-2"},null,-1)),e[11]||(e[11]=t("span",{class:"orb orb-3"},null,-1)),t("div",Z,[t("img",{src:Q,alt:i(o)("auth.login.title")},null,8,ee)]),t("div",te,[t("div",ae,[t("div",le,[a(b,{icon:"tabler-shield-lock",size:"16",class:"me-1"}),f(" "+u(i(o)("auth.login.admin_portal")),1)]),t("div",oe,[e[5]||(e[5]=t("span",{class:"mini-dot"},null,-1)),f(" "+u(i(o)("auth.login.protected")),1)])]),c.value?(T(),S("div",se,u(c.value),1)):E("",!0)]),t("div",ie,[t("div",re,[t("div",null,[t("div",ne,u(i(o)("auth.login.system")),1),t("div",ue,u(i(o)("auth.login.dashboard")),1)]),t("div",de,[a(b,{icon:"tabler-layout-dashboard",size:"22"})])]),t("div",me,[e[6]||(e[6]=t("span",{class:"dot"},null,-1)),t("span",null,u(i(o)("auth.login.admin_only")),1)])])])])]),_:1}),a(p,{cols:"12",md:"6"},{default:s(()=>[t("div",ce,[t("h1",pe,u(i(o)("auth.login.title")),1),t("p",fe,u(i(o)("auth.login.subtitle")),1),a(P,{class:"login-card",elevation:"0"},{default:s(()=>[a(G,null,{default:s(()=>[a(H,{onSubmit:M(N,["prevent"])},{default:s(()=>[a(B,null,{default:s(()=>[a(p,{cols:"12"},{default:s(()=>[a(n,{modelValue:r.value.email,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value.email=l),label:i(o)("auth.login.email"),placeholder:i(o)("auth.login.email_placeholder"),"prepend-inner-icon":"tabler-mail",autocomplete:"email"},null,8,["modelValue","label","placeholder"])]),_:1}),a(p,{cols:"12"},{default:s(()=>[a(n,{modelValue:r.value.password,"onUpdate:modelValue":e[1]||(e[1]=l=>r.value.password=l),type:v.value?"text":"password",label:i(o)("auth.login.password"),placeholder:i(o)("auth.login.password_placeholder"),"prepend-inner-icon":"tabler-lock","append-inner-icon":v.value?"tabler-eye-off":"tabler-eye","onClick:appendInner":e[2]||(e[2]=l=>v.value=!v.value),autocomplete:"current-password"},null,8,["modelValue","type","label","placeholder","append-inner-icon"])]),_:1}),a(p,{cols:"12",class:"d-flex align-center justify-space-between"},{default:s(()=>[a(J,{modelValue:r.value.remember,"onUpdate:modelValue":e[3]||(e[3]=l=>r.value.remember=l),density:"compact","hide-details":"",label:i(o)("auth.login.remember")},null,8,["modelValue","label"])]),_:1}),a(p,{cols:"12",class:"d-flex gap-3 mt-2"},{default:s(()=>[a(j,{type:"submit",loading:g.value,color:"primary",class:"btn-primary"},{default:s(()=>[a(b,{icon:"tabler-login",class:"me-2"}),f(" "+u(i(o)("auth.login.submit")),1)]),_:1},8,["loading"]),a(j,{variant:"outlined",class:"btn-outline",href:"http://smrt-consulting.net/",target:"_blank"},{default:s(()=>[a(b,{icon:"tabler-home",class:"me-2"}),f(" "+u(i(o)("auth.login.home")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1}),a(L,{modelValue:h.value,"onUpdate:modelValue":e[4]||(e[4]=l=>h.value=l),color:k.value,location:"bottom end",timeout:"3500"},{default:s(()=>[f(u(x.value),1)]),_:1},8,["modelValue","color"])])}}},Ke=$(ve,[["__scopeId","data-v-595dfbd0"]]);export{Ke as default};
